
                            Г Л А В А  5
                            ============

                      СРЕДА   JPI  Modula - 2
                      =======================

         Среда разработки JPI Modula-2 - это многооконная интегрированная система разработки. В
    среде вы можете создавать и редактировать свои программы, компилировать текст в исполняемый
    код и затем запускать свои полные программы.
         Все это можно выполнять не выходя из среды и без длинных или составных командных  пос-
    ледовательностей.  Среда  также  обнаруживает  ошибки во время компиляции или запуска вашей
    программы, а также указывает на позицию ошибки в редакторе.
         Среда разработана специально для создания программ, содержащих более одного компилиру-
    емого модуля,  как это обычно и бывает в случае программ на Modula-2. Среда содержит четыре
    окна редактирования,  что позволяет одновременно обрабатывать четыре файла. Вы можете наби-
    рать текст модуля реализации в одном окне, имея перед глазами соответствующий файл описаний
    в другом. Помимо этих четырех окон, среда имеет еще одно внешнее окно редактирования, в ко-
    тором выдаются ошибки времени компиляции или времени исполнения в исходном тексте.
         Имеющаяся в  среде возможность автоматического построения (Make) программ гарантирует,
    что компилироваться будут только корректные ( с  точки  зрения  времени  создания)  модули.
    Т.о., если изменяется некоторая часть программы, то все модули, на которые влияют внесенные
    изменения,  будут автоматически перекомпилированы и будет  сгенерирован  новый  исполняемый
    файл.
         Система меню и установки ключей полностью могут быть переконфигурированы под ваши тре-
    бования простым редактированием текстового файла (М2.MNU). Это позволяет вам изменить текст
    и структуру дерева меню, назначения функциональных клавиш, вызывающих функции среды. Вы да-
    же можете включить свои собственные программы в меню и команды клавиш.
         Многооконный редактор,  в свою очередь,  полностью переконфигурируется и  легко  может
    быть  сделан похожим на тот редактор,  который больше всего нравится вам.  Первоначально он
    конфигурируется подобным на WordStar,  что похоже на редакторы Turbo Pascal  или  SideKick,
    хотя  и  имеет  возможность редактировать до 5 файлов независимо и с большим числом функций
    обработки файлов.  Помимо редактирования разных файлов в разных окнах среда  позволяет  вам
    также редактировать один файл в разных позициях текста.  Например,  вы можете просматривать
    глобальные переменные модуля в одном окне,  а в другом - редактировать оставшуюся часть мо-
    дуля.
         При выходе из среды запоминается текущее состояние системы,  включая имена редактируе-
    мых файлов и позицию в каждом файле. Помимо этого сохраняется схема расположения окон и все
    опции пользователя.  После того,  как вы вернетесь в среду, все параметры будут установлены
    автоматически, что позволит вам немедленно начать работу.
         Чтобы помочь поддерживать систему директории ДОС при обработке файлов, среда позволяет
    назначить пути поиска для них.  Эти пути определяют, в каких директориях располагаются фай-
    лы. Эта мощная возможность позволяет вам содержать файлы определенных типов ( напр. OBJ или
    DEF)  в  отдельном каталоге.  Таким способом вы можете поддерживать свою файловую систему в
    порядке, не используя дополнительных рабочих директорий.
         Чтобы сделать известными логические файлы, следует отредактировать текстовый файл, оп-
    ределяющий назначения файлов по директориям (М2.RED). Более подробную информацию см. в раз-
    деле "Файл назначения".


                          УСТАНОВКА СРЕДЫ
                          ===============

         Для запуска среды вы должны ввести команду М2 в ответ на подсказку ДОС.  Среда старту-
    ет,  при этом сначала создается экран, содержащий заголовок JPI Modula-2, а затем - Главное
    Меню (Main Menu).
        В состав среды входят следующие файлы:
        М2.ЕХЕ          Среда JPI Modula-2
        M2.OVL          Оверлей для M2.EXE
        M2.MNU          Определение системы меню
        M2.ERR          Сообщения об ошибках
        M2.HLP          Текст подсказки (HELP)
         Все эти файлы должны находиться в директории,  из которой запускается Modula-2, т.е. в
    котором находится М2.ЕХЕ.
         Дополнительно могут существовать следующие файлы:
         M2.RED Файл назначений
         M2.SES Файл сеанса.
         Файл М2.SES  содержит  подробности  вашего  последнего сеанса в среде.  Если этот файл
    включен в каталог, то среда устанавливается в то состояние, в котором вы вышли из нее.


                       СИСТЕМА ПОМОЩИ (Help)
                       =====================

         Если вы находитесь в среде,  то вы можете всегда получить контекстно-зависимый Help на
    экране путем нажатия на <F1>,  что даст вам информацию,  описывающую ситуацию, в которой вы
    находитесь в среде.  Вы можете просмотреть весь Help, если вам это интересно. Для этого на-
    до,  войдя в Help-систему, нажать <F1>, что выведет вас в раздел Индекса для всех доступных
    тем системы Help.


                          Строки подсказок
                          ----------------

         Нижняя строка на экране содержит назначения функциональных клавиш  для  текущего  кон-
    текста.  Это поможет вам использовать незнакомые функции без обращения к системе Help или к
    руководству.
         Строки помощи для Главного меню и Окон редактирования могут быть изменены. Можно и от-
    менить вывод этих строк.  Более подробно это описано в разделе "Изменение строк подсказок".


                            СИСТЕМА МЕНЮ
                            ============

         Все возможности среды JPI Modula-2 доступны при помощи системы меню.  Для выбора и ак-
    тивизации  любой  функции требуется применение всего нескольких клавиш.  Система меню может
    быть полностью переконфигурирована согласно вашим требованиям (см.  раздел  "Настройка  ме-
    ню").
         В любой момент времени активным является только одно окно меню, даже если видимо боль-
    ше  чем  одно меню на экране.  Активное меню всегда можно распознать по его двойной рамке и
    выделенным цветом символам команд.
         Команды могут  выбираться  только  в активном меню.  Текущая команда выделяется другим
    (инверсным) цветом.  Строка с текущей командой называется строкой меню и  используется  для
    идентификации текущей выбранной команды.

                        Перемещения по меню
                        -------------------

         Для продвижения по дереву меню используются клавиши:

         <стрелка вниз> -    на строку вниз;
         <стрелка вверх> -   на строку вверх;

         <ВВОД> (Enter) - открыть подменю,  если оно есть, или, если его нет, то активизировать
    выбранную команду;

         <КЛЮЧ> (Esc) - закрыть текущее меню;
         <НАЧ> (Home) - установить в первую линию меню;
         <КОН> (End) - установить в последнюю линию меню;

         <Буква> - нажатие буквы,  выделенной цветом в активном меню,  передвинет строку меню в
    линию, содержащую эту букву и затем активизирует связанную функцию или подменю;

         <F10> -  возврат  в Главное меню из любого места системы меню.  Помимо этого,  нажатие
    этой клавиши активизирует Главное меню из-за пределов системы меню,  например,  из Окна ре-
    дактора.

         В дополнение к вышесказанному в системе есть общие клавиши, позволяющие кратчайшим пу-
    тем вызвать меню и команды. Они называются клавишами Кратчайшего Пути (КП). КП - клавиши не
    зависят от окон меню и могут использоваться,  даже если на экране активных окон нет. Напри-
    мер, в приведенном выше списке <F10> является КП - клавишей, вызывающей Главное меню.
         Список КП - клавиш,  а также порядок их изменения и до-
    бавления, описаны в разделе "Изменение КП - клавиш".
         Полная схема Главного меню приведена на следующем рисунке:


    ==JPI Modula-2==
    || Files      ||_________
    || Edit       ||         |            ====Load file========
    || Compile    ||         |            || Window 1: *.MOD ||
    || Make       ||   ======Files=====___|| Window 2: *.DEF ||
    || Link       ||   || Load file  ||   || Window 3: *.MOD ||
    || Run        ||   || Pick file  ||__ || Window 4: *.DEF ||
    || Options    ||   || Save file  || | =====================
    || Info       ||   || All save   || |
    || TechLine   ||   || Main module|| |  =======Pick file========
    ================   || Change dir || |__|| C:\DATABASE\TR.MOD ||
           |           || Files dir  ||    || C:\DATABASE\TR.DEF ||
           |           || Dos shell  ||    || C:\DATABASE\RE.MOD ||
           |           || Execute    ||    || C:\M2\LIB\STR.DEF  ||
           |           || Quit       ||    || C:\M2\LIB\IO.DEF   ||
           |           ================    || C:\M2\LIB\FIO.DEF  ||
           |                               || C:\DATABASE\TR.TXT ||
           |                               || - -  Load file  - -||
           |                               ========================
           |
     ====Options===         =======Compiler Options==========
     || Compiler ||_________|| E - Stop on lst error  : OFF||
     || Linker   ||_______  || F - Filename check     : ON ||
     || Run      ||______ | || N - Line numbers       : OFF||
     || Editor   ||____ | | || V - Volatile variables : OFF||
     || Setur    ||   | | | =================================
     || Make all ||   | | |
     =============|   | | | ==============Linker Options============
           |          | | | || M - Map file                 : ON  ||
           |          | | |_|| I - Initialize segments      : OFF ||
           |          | |   || S - Detailed segment map     : OFF ||
           |          | |   || T - Trace module references  : OFF ||
           |          | |   || C - Case sensitive link      : ON  ||
           |          | |   || W - Supress warnings         : OFF ||
           |          | |   ========================================
           |          | |
           |          | |   =========Run Options=========
           |          | |   || C - Command line        ||
           |          | |___|| A - Auto make     : ON  ||
           |          |     || T - Timed run     : OFF ||
           |          |     || F - Find error          ||
           |          |     =============================
           |          |______________________
           |                                |
     ====Environment Options======          |
     | C - CGA snow check  : OFF |  ========Editor Options========
     | B - Bios scrolling  : OFF |  | A - Auto save files  : OFF |
     | H - High background : OFF |  | F - Default filenames      |
     | X - Solid cursor    : OFF |  | E - Default extensions     |
     |---------------------------|  | N - Number of backups : 1  |
     | R - Load redirection file |  | T - Top scroll zone   : 0  |
     | L - Load options/windows  |  | B - Bottom scroll zon : 1  |
     | S - Save options/windows  |  ==============================
     =============================


         Активизировать любую из функций среды можно одним из трех путей:
         - Выбрать требуемую функцию и нажать <ВВОД> (Enter).
         - Нажать буквенную клавишу, соответсвующую выделенной цветом букве в требуемой строке.
         - Нажать соответствующую КП-клавишу (если она существует).


             Клавиши Кратчайшего Пути (КП -  клавиши )
             -----------------------------------------


         В среде определен ряд КП-клавиш для часто используемых функций.  Вы можете изменить их
    назначения или добавить их редактированием файла конфигурации меню (см.  "Изменение КП-кла-
    виш"). Первоначально определены следующие КП-клавиши:

         <F10> - Вызывает Главное меню.

         <ДОП+X> (Alt+X) - Завершение JPI Modula-2 и выход в ДОС.  Это тождественно команде  из
    меню Files - Quit. Следует отметить, что прежде, чем вы завершите работу, вам будет предос-
    тавлена возможность сохранить отредактированный текст, после чего будет сохранено состояние
    среды.

         <ДОП+Е> (Alt+E) - Вызывает редактор. Если задействовано более чем одно редактирование,
    то <ДОП-Е> введет вас в то окно,  которое использовалось последним.  Эквивалент  -  команда
    Editor в Главном меню. Для получения дополнительной информации см. раздел "Редактор".

         <ДОП+1> (Alt+1) - Вызывает первое окно редактора.

         <ДОП+2> (Alt+2) - Вызывает второе окно редактора.

         <ДОП+3> (Alt+3) - Вызывает третье окно редактора.

         <ДОП+4> (Alt+4) - Вызывает четвертое окно редактора.

         <ДОП+0> (Alt+0) - Вызывает окно редактирования ошибок, если оно активно.

         <F5> -  Операция  ZOOM  с  текущим окном редактирования,  делает его полноэкранным или
    возвращает его в исходное состояние.

         <F6> - Циклический просмотр открытых в настоящее время окон редактора.

         <ДОП+F5> (Alt+F5) - Просмотр экрана ДОС. Позволяет просмотреть последние выходные дан-
    ные  программы  или  оболочки ДОС.  Режим полеэен при проверке результатов работы программы
    после возвращения в среду. При входе в среду загружается такой экран просмотра, который был
    виден последним. Функции среды Compile, Make, Link автоматически очищают экран обзора, под-
    готавливая его к следующему пуску программы.

         <ДОП+I> (Alt+I) - Активизирует информационное окно,  содержащее полезную информацию  о
    состоянии среды. Эквивалент в Главном меню - команда Info (см. "Информационное окно").

         <ДОП+С> (Alt+C) - Компиляция отдельного файла.

         <ДОП+М> (Alt+M) - Построение загрузочного кода программы,  компиляция, перекомпиляция,
    если необходимо (в зависимости от даты создания), связывание модулей.

         <ДОП+L> (Alt+L) - Связывает уже откомпилированные файлы в исполняемую программу.

         <ДОП+R> (Alt+R) - Создает исполняемую программу и затем запускает ее. Четырем перечис-
    ленным выше командам соответствуют команды Главного меню Compile,  Make, Link, Run, создаю-
    щие интерфейсы к компилятору и линкеру JPI Modula-2.  Для получения дополнительной информа-
    ции обратитесь к разделу "Компиляция и запуск программ".

         <ДОП+D> (Alt+D) - Вызов оболочки ДОС, в которой вы можете выполнить команды и програм-
    мы ДОС.  При выходе из оболочки (вводом EXIT) среда будет восстановлена в  своем  начальном
    состоянии.  Эквивалентно команде Files DOS-Shell Главного меню (см. раздел "Оболочка ДОС").

                            ОКНА В СРЕДЕ
                            ============

         Взаимодействие между пользователями и средой JPI Modula -2 происходит в перекрывающих-
    ся окнах. Позиция, размер и цвета окон могут быть динамически изменены по вашему желанию.
         Как правило,  каждое окно связано с определенной функцией.  Например,  Окно  Редактора
    позволяет вам редактировать текст,  а окно компилятора будет содержать сообщения компилято-
    ра.
         Чтобы выделить положение каждого окна на экране,  оно окружается прямоугольной рамкой,
    которая совместно с выделением цветом окна ясно указывает его  положение  на  экране,  даже
    когда окно частично перекрыто.
         В каждый момент времени в среде может быть активно только одно окно.  Как было указано
    выше,  это окно относится к текущей выполняемой функции, будет ли это редактор, компилятор,
    меню либо любая другая функция среды. Активное окно выделяется двойной рамкой, в отличие от
    одинарной рамки неактивного окна.
         Перекрывающиеся окна помещаются в стек в порядке их вызова.  Верхнее окно стека всегда
    является активным окном.  Нажатие в среде клавиши <КЛЮЧ> (Esc) всегда удаляет активное окно
    с экрана и делает активным следующее окно из стека.  Активное окно всегда полностью видимо,
    т.е. оно никогда не перекрывается другими окнами.


                          ИЗМЕНЕНИЕ ОКОН
                          ==============

         В любой момент вы можете изменить положение,  размер и цвета активного окна.  Это осу-
    ществляется нажатием <ФСД> (ScrollLock),  которое переводит среду в режим управления окном.
    В  этом  режиме  вы  можете  изменить  размер  и положение окна или нажатием клавиши <ВВОД>
    (Enter) изменить цвет окна. Для выхода из режима управления окном вы должны повторно нажать
    <ФСД>  (ScrollLock).  В дополнение к режиму управления окнами его текущий размер может быть
    изменен функциями Zoom/ UnZoom по клавише <F5>.

                        Изменение положения
                        -------------------

         Чтобы изменить местоположение окна на экране,  используйте клавиши перемещения курсора
    на дополнительной клавиатуре после нажатия <ФСД> (ScrollLock). При этом окно переместится в
    новую позицию,  а окна,  которые, возможно, находятся над ним, откроются. Конечно, полноэк-
    ранное окно,  увеличенное командой ZOOM,  не может быть никуда передвинуто. После того, как
    окна  будут расставлены в требуемые позиции,  информация об их положениях будет сохранена в
    файлах описаний конфигурации и сеанса.  Вы можете создать свое расположение окон, например,
    расположив их рядом либо поместив одно поверх всех остальных.

                        Изменение размеров
                        ------------------

         После входа в режим управления окнами размер каждого из окон редактирования ( и только
    их! ) может быть изменен при помощи комбинации нажатия клавиш перемещения курсора совместно
    с клавишами <ЗАГ> (Shift).
         При изменении  размера окна верхний левый угол остается на той же позиции,  а нижняя и
    правая стороны перемещаются.  Т.о.,  <ЗАГ+стрелка вниз> (Shift+стрелка вниз) - уменьшает, а
    <ЗАГ+стрелка   вверх>   (Shift+стрелка  вверх)  -  увеличивает  высоту  окна.  Точно  также
    <ЗАГ+стрелка влево> (Shift+стрелка влево) - уменьшает, а <ЗАГ+стрелка вправо> (Shift+стрел-
    ка  вправо)  -  увеличивает  ширину окна.  Размер каждого окна сохраняется в файле сессии и
    восстанавливается при новом входе в среду.

                         Изменение цветов
                         ----------------

         Цвета активного   окна   можно   изменить,  нажимая  <ВВОД>  (Enter)  вслед  за  <ФСД>
    (ScrollLock).  Цвета различных областей могут быть изменены после выбора области  нажатиями
    клавиш <ПРЕД> (PgUp) или <СЛЕД> (PgDn),  пока текст в этих областях не начнет мигать. После
    этого можно изменить цвет фона клавишами <стрелка влево> и <стрелка вправо>,  а цвет перед-
    него  плана  -  клавишами <стрелка вверх> и <стрелка вниз>.  После того,  как будет получен
    удовлетворительный цвет,  можно либо выбрать следующую область, либо завершить режим управ-
    ления окнами повторным нажатием <ФСД> (ScrollLock). Если вы захотели прервать процесс изме-
    нения цветов, то <УПР+U> (Ctrl+U) восстановит первоначальные цвета. Цвет строки подсказки в
    нижней  части экрана (см.  "Строки подсказок") может быть изменен последовательным нажатием
    <ФСД + ВВОД + *> (ScrollLock + Enter + *).
         Цвет каждого окна сохраняется в файлах конфигурации и сессии.
         Если в Главном меню опция High-Background (см.  "Интенсивный фон") (доступ  к  которой
    организуется  по пути OptionsSetup-HighBackground) включена (т.е.  установлена в ON),  и вы
    работаете на машине IBM PC либо используете CGA-совместимый дисплей,  то вы можете  устано-
    вить  фон  в один из 16-ти допустимых цветов,  включающие яркие фоновые цвета.  В противном
    случае вы будете располагать только восьмью фоновыми и шестнадцатью основными цветами.
         Следует иметь в виду, что для облегчения установки цветов окна, имеющие сходное приме-
    нение, объединяются в Классы Окон.
         Изменение цвета  любого окна из некоторого класса приведет к автоматическому изменению
    цветов всех прочих окон данного класса.
         В среде определены следующие классы окон:
         - Окна меню;
         - Окна ошибок (предупреждений);
         - Окна подсказок;
         - Окна ввода данных;
         - Окна выбора директорий/файлов;
         - Окна Компиляции/Построения/Связывания;
         - Каждое из окон редактора (5 окон).

                            Zoom/UnZoom
                            -----------

         Каждое из  окон редактора может быть расширено до максимально возможного размера (раз-
    мера экрана) нажатием <F5>. При этом удаляются правая, левая и нижняя рамки окна (кроме Ок-
    на Ошибок,  в котором нижняя линия зарезервирована для выдачи сообщений об ошибках).  Такой
    режим удобен для полноэкранного редактирования,  предоставляющего  максимальную  допустимую
    область  для вывода текста.  Если требуется считать (UnZoom) окно,  то следует вновь нажать
    клавишу <F5>, и окно примет свои исходные размеры.
         Zoom-состояние каждого окна сохраняется в файлах конфигурации и сессии.


                    ОКНА ДИАЛОГА С ПОЛЬЗОВАТЕЛЕМ
                    ============================

         Если среде нужны какие-либо данные для продолжения работы, она открывает окно для вво-
    да. Эти окна, относящиеся к классу Окон диалога, имеют три возможные формы:
         - ввод одной строки;
         - ввод нескольких строк;
         - выбор файла.

                         Ввод одной строки
                         -----------------

         Если среде нужно ввести одну строку данных,  она открывает окно  ввода  одной  строки.
    Пример - запрос на ввод имени файла.  В окно ввода включается подсказка о характере требуе-
    мого ввода (например, Filename:), за которой следует выделенное цветом поле редактирования.
    В этом поле вы можете вводить и редактировать данные, а затем нажатием <ВВОД> (Enter) сооб-
    щить,  что ввод данных закончен. При редактировании вы можете использовать следующие клави-
    ши:

         <стрелка влево> или
         <УПР+S> (Ctrl+S) - перемещение курсора на символ влево;

         <стрелка вправо>  или
         <УПР+D> (Ctrl+D) - перемещение курсора на символ вправо;

         <УПР+стрелка влево>  (Ctrl+стрелка  влево)  или
         <УПР+А> (Ctrl+A) - перемещение курсора на слово влево;

         <УПР+стрелка вправо> (Ctrl+стрелка право) или
         <УПР+F> (Ctrl+F) - перемещение курсора на слово вправо;

         <ЗАБОЙ> (BackSpace) или
         <УПР+H> (Ctrl+H) - удалить символ слева;

         <УДЛ> (Del) или
         <УПР+G> (Ctrl+G) - удалить символ справа;

         <табуляция> (Тав) или
         <УПР+I> (Ctrl+I) - табуляция;

         <ВСТ> (Ins) или
         <УПР+V> (Ctrl+V) - переключение режимов: вставка/запись поверх;

         <НАЧ> (Home) - перемещение курсора в начало поля;

         <КОН> (End) - перемещение курсора в конец поля;

         <УПР+T> (Ctrl+Т) - удалить слово;

         <УПР+Y> (Ctrl+Y) - очистить поле.

         Первоначально в поле редактирования выдается либо текст умолчания, либо последний вве-
    денный перед этим текст.  Этот текст может быть либо передан на обработку как новый входной
    нажатием  <ВВОД> (Enter),  либо отредактирован при помощи клавиш перемещения курсора,  либо
    очищен вводом поверх него в поле редактирования.  Поле редактирования (строка ввода)  может
    оказаться длиннее входного окна.  В таком случае поле будет прокручиваться при редактирова-
    нии вправо либо влево.
         Чтобы снять ввод,  надо нажать <КЛЮЧ> (Esc), что приведет к закрытию окна ввода и ава-
    рийному завершению функции, требовавшей ввод.

                      Ввод множественных строк
                      ------------------------
         Если среде нужно ввести более одной строки текста (например, в режиме Поиск (Search) в
    редакторе),  либо  требуется ваш выбор из нескольких альтернатив (например,  Загрузить файл
    (Load file)),  создается окно ввода нескольких строк с несколькими полями ввода.  Эти  поля
    могут  быть  выбраны  при  помощи  клавиш  <стрелка  вверх>  и <стрелка вниз> (либо <УПР+Е>
    (Ctrl+E) и <УПР+X> (Ctrl+X)), и затем отредактированы описанным выше способом. Как и в пре-
    дыдущем  случае,  ввод  может быть прекращен либо нажатием <КЛЮЧ> (Esc) для снятия функции,
    либо <ВВОД> (Enter) для передачи входного сообщения и продолжения работы.

                         Окно выбора файлов
                         ------------------
         Если среда запрашивает имя файла (например, в Load file), вы можете ввести Универсаль-
    ное имя файла.  Универсальное имя - это такое имя, которое содержит один или более символов
    '?' или '*'.  Символ '?' используется для указания любого одиночного символа,  а '*' -  для
    указания любой последовательности символов. Если введено Универсальное имя файла, то откры-
    вается окно выбора файлов. Такое окно имеет один из двух форматов:

     ================C:\NIGEL\MOD\CORE\*.*=======================
     |                                                          |
     | ASCII.DEF      ASCII.MOD      ASCII.OBJ     CORE.TXT     |
     | CORELIB.EXE    CORELIB.MOD    CORELIB.OBJ   DB.BAT       |
     | EXEC.RED       INOUT.DEF      INOUT.MOD     INOUT.OBJ    |
     | REALINOU.DEF   REALINOU.MOD   REALINOU.OBJ  STRINGS.DEF  |
     | STRINGS.MOD    STRINGS2.DEF   STRINGS2.MOD  TERMINAL.DEF |
     | TERMINAL.MOD   TERMINAL.OBJ   \..                        |
     ============================================================

     ============C:\NIGEL\MOD\CORE\*.*===================
     |                                                  |
     |  ASCII.DEF       509     8-19-87         12:46pm |
     |  ASCII.MOD        78     8-02-87          4:10pm |
     |  ASCII.OBJ       444    10-27-87          1:02am |
     |  CORE.TXT        325     8-05-87          5:44pm |
     |  CORELIB.EXE    8412    10-27-87          1:12am |
     |  CORELIB.MOD    1269    10-27-87         12:05am |
     |  CORELIB.OBJ    2861    10-27-87          1:02am |
     |  DB.BAT           48     8-19-87          8:32am |
     |  EXEC.RED        165     4-14-87          1:37pm |
     |  INOUT.DEF       826    10-14-87         10:59am |
     |  INOUT.MOD      4030    10-27-87          1:02am |
     |  REALINOU.MOD   2096    10-27-87          1:03am |
     ====================================================

         Вы можете выбрать тот или иной формат нажатием SpaceBar.
         Для того, чтобы выбрать файл, вы должны переместить световой маркер к требуемому имени
    файла и затем нажать <ВВОД> (Enter).  Переместить маркер вы можете либо при  помощи  клавиш
    перемещения  курсора,  либо нажав первую букву имени требуемого файла.  Подкаталоги и роди-
    тельский каталог (обозначаемый(..)) начинаются с символа '\'  и  выделяются  цветом.  Чтобы
    войти в подкаталог либо родительский каталог,  можно точно так же использовать либо клавиши
    курсора, либо символ '\' и затем нажать <ВВОД> (Enter). При этом откроется новое окно ката-
    лога  и  вы сможете выбрать файл в нем.  Для аварийного прекращения выбора вы можете нажать
    <КЛЮЧ> (Esc).


               МЕНЮ  ФАЙЛОВ ("Files" в Главном меню )
               ======================================

         Меню файлов содержит команды для загрузки и  сохранения  файлов,  просмотра  каталогов
    ДОС,  изменения текущего каталога,  выполнения команды ДОС или выхода в оболочку ДОС, и для
    выхода из среды JPI Modula-2.

                     Загрузить файл (Load file)
                     --------------------------

         Короткий путь <F3>.
         Загружает файл в одно из четырех окон редактора и затем
    открывает это окно для редактирования. При выборе опции Load File открывается окно загрузки
    файлов, имеющее следующий вид.

        ===========Load file===========
        |                             |
        | Window 1: *.MOD             |
        | Window 2: *.DEF             |
        | Window 3: *.MOD             |
        | Window 4: *.DEF             |
        |                             |
        ===============================

         Для того,  чтобы загрузить файл, вы прежде должны выбрать требуемое окно редактора при
    помощи клавиш <стрелка вверх> и <стрелка вниз>.  Затем вы можете ввести имя файла для  заг-
    рузки.  Если задается универсальное имя файла, то открывается окно выбора файла (см. раздел
    "Окно выбора файла").  После того,  как файл выбран, он загружается в Окно редактирования и
    вы можете начать редактирование.
         Если требуемый (запрошенный) файл не  существует,  то  автоматически  создается  новый
    файл.

                      Выбрать файл (Pick file)
                      ------------------------

         Короткий путь <ДОП+F3> (Alt+F3).
         Позволяет вам выбрать имя загружаемого файла из списка ранее загружавшихся файлов. За-
    поминается не более восьми имен файлов.  Курсор при этом переустанавливается в  позицию,  в
    которой вы в последний раз редактировали файл.  Для того, чтобы выбрать файл, вы должны пе-
    реместить маркер на имя требуемого файла и затем нажать <ВВОД> (Enter). Файл будет загружен
    в активное окно редактора и будет готов к продолжению работы с ним,  начиная с позиции, где
    было закончено предыдущее редактирование файла.
         Список Выбора (Pick List) автоматически сохраняется в файле сеанса и будет загружаться
    при перезагрузке среды. Клавиша <УПР+Y> (Ctrl+Y) может использоваться для удаления элемента
    из Списка Выбора.

                     Сохранить файл (Save file)
                     --------------------------

         Короткий путь F2.
         Сохраняет текущий редактируемый файл на диске. Команда эквивалентна команде Save (<УПР
    +K D> (Ctrl+K D)), которая может быть выдана из редактора (см. раздел "Сохранение файлов").

                   Сохранить все файлы (All save)
                   ------------------------------

         Сохраняет все редактируемые файлы, которые изменялись после последнего сохранения. Эта
    команда - весьма удобное средство для гарантии сохранения на диске всех  внесенных  измене-
    ний.

                    Главный модуль (Main module)
                    ----------------------------

         Устанавливает имя Главного модуля. Это имя используется в командах Run, Make, Make All
    и Link (см.  раздел "Главный модуль"). Вы можете удалить имя Главного модуля вводом пустого
    имени.

                   Изменить каталог (Change dir)
                   -----------------------------

         Изменяет назначение текущего каталога ДОС. Команда выдает подсказку на ввод нового ка-
    талога и выдает имя текущего каталога,  которое вы можете редактировать.  Если  вы  введете
    пустое имя каталога,  то откроется окно выбора, позволяющее вам выбрать новый каталог путем
    перемещения курсора.

                    Каталоги файлов (Files dir)
                    ---------------------------

         Выводит список файлов каталога после запроса маски (шаблона) имен файлов. Отображаются
    все файлы в заданном каталоге,  удовлетворяющие заданной маске (например, *.MOD). Если вве-
    ден пустой, то выдается список файлов текущего каталога.
         Существуют две формы каталогов: уточненный каталог, содержащий размер и дату последней
    модификации для каждого файла, и короткий каталог, содержащий только имена файлов. Вы може-
    те выбрать ту или иную форму нажатием SpaceBar.
         Чтобы вызвать  другие каталоги,  надо переместить маркер выбора на требуемый каталог и
    нажать <ВВОД> (Enter). При этом выведется новый каталог.

                      Оболочка ДОС (Dos shell)
                      ------------------------

         Короткий путь <ДОП+D> (Alt+D).
         Вызывает оболочку ДОС, из которой вы можете выполнять команды ДОС и запускать програм-
    мы.  Чтобы выйти из оболочки,  надо ввести команду EXIT. При этом вы вернетесь в среду в ту
    позицию,  в которой вы находились перед выходом в ДОС.  Если вы хотите, чтобы редактируемые
    файлы автоматически сохранялись перед входом в оболочку ДОС (т.е.,  если вы хотите просмот-
    реть эти файлы в оболочке), вы должны установить опцию Auto-Save (в состояние ON) в подменю
    Editor функции Options Главного меню (см. "Автоматическое сохранение файлов").

                        Выполнить (Execute)
                        -------------------

         Позволяет выполнить одну команду ДОС и сразу вернуться в  среду.  Это  удобный  способ
    быстрого выполнения программ без выхода из среды.
         Как в команде Dos Shell,  опция Auto Save используется для обеспечения сохранения всех
    редактируемых файлов.
         Следует отметить,  что,  если вам требуется часто выполнять отдельную команду ДОС  или
    программу,  вы можете поместить ее прямо в меню среды, что позволит выполнять ее либо выбо-
    ром в меню, либо по клавише Короткого Пути.

                            Выйти (Quit)
                            ------------

         Короткий Путь <Доп+Х> (Alt+X).
         Завершает работу среды JPI Modula-2 и возвращается в ДОС. Среда сделает запрос - хоти-
    те  ли  вы  сохранить  редактируемые файлы перед выходом;  если опция Auto Save установлена
    (ON),  то файлы будут сохранены автоматически. Среда сохраняет также подробности вашего се-
    анса  в файле M2.SES,  который затем может использоваться для перезапуска с установкой пос-
    леднего рабочего состояния.  Сохраняемая информация содержит схему  размещения  окон  и  их
    цвет, все установки опций, файлы, загруженные в каждое окно редактора, Главный модуль и со-
    держимое списка выбора.
         Файл сеанса может быть удален, если требуется "забыть" состояние предыдущего сеанса, и
    создан заново.






                              РЕДАКТОР
                              ========

         Короткий Путь <Доп+Е> (Alt+E).
         Редактор JPI Modula-2 - это многооконный редактор,  позволяющий редактировать до четы-
    рех независимых файлов.  Команды редактирования устанавливаются вначале подобными  командам
    редактора WordStar,  но легко могут быть изменены редактированием файла М2.MNU (см.  "Наст-
    ройка меню").  Следующее ниже описание доступных  в  редакторе  возможностей  подразумевает
    стандартную конфигурацию по умолчанию.


                       Систем меню редактора
                       ---------------------

         Функции редактирования  могут вызываться как при помощи специальных клавиш,  так и при
    помощи всплывающих меню.  Если вы находитесь в одном из окон редактора, то нажатие <F9> вы-
    зовет появление на экране Меню Редактора.
         Из этого меню вы можете вызвать функции редактирования таким  же  образом,  как  и  из
    Главного меню.
         Дерево меню редактирования приведено ниже:


       ======Editor Menu=====
       | L - load new file  |
       | S - save file      |      ========Quick Menu==========
       | W - write to...    |______| F - find                 |
       | Q - quick commands |____  | A - replace              |
       | K - block commands |___ | | E - top of window        |
       | E - editor options |  | | | X - bottom of window     |
       ======================  | | | R - top of file          |
                               | | | C - bottom of file       |
                               | | | S - start of line        |
                               | | | D - end of line          |
                               | | | B - beginning of block   |
                               | | | K - end of block         |
                               | | | P - previous position    |
                               | | | Y - delete to end of line|
                               | | | L - restore line         |
                               | | | G - goto line            |
                               | | ============================
                               | |
                               | |   ======Block Menu====
                      _________| |___| D - save file    |
                      |              | B - begin block  |
                      |              | K - end block    |
                      |              | H - hide block   |
                      |              | T - mark word    |
                      |              | L - mark line    |
                      |              | C - copy block   |
                      |              | V - move block   |
                      |              | Y - delete block |
        ======Options Menu =======   | R - read block   |
        | V - insert mode  : 0FF |   | W - write block  |
        | I - auto indent  : 0FF |   | G - get block    |
        | T - hard tabs    : 0FF |   | P - print block  |
        | W - tab width    : 8   |   | I - indent block |
        ==========================   ====================


                          Всплывающее меню
                          ----------------

         Чтобы облегчить выбор,  подменю редактора будут автоматически "всплывать" после корот-
    кой задержки, когда введена только часть более длинной команды; так,
         - нажатие <УПР+К> (CTRL+K) вызовет Block - меню;
         - нажатие <УПР+Q> (CTRL+Q) вызовет Quick - меню;
         - нажатие <УПР+O> (CTRL+O) вызовет Options - меню.
         Если вводится полная последовательность команды (например,  нажата <УПР+K  D>  (CTRL+K
    D)), то меню не будет всплывать, и функция будет выполняться немедленно.

                           Загрузка файла
                           --------------

         Начать редактирование файла можно одним из четырех способов:
         - по команде Load File в меню Files или по короткому пути <F3>.
         Такая возможность описана в разделе "Загрузить файл";
         - при  помощи команды Pick File из меню Files или по короткому пути <ДОП+F3> (Alt+F3).
    Описано в разделе "Выбрать файл";
         - вызовом команды Editor из главного меню или по клавише <ДОП+Е> (Alt+E). При этом вы-
    зывается активное окно редактора (первоначально 1);
         - нажатием  одной из комбинации клавиш <ДОП+1> - <ДОП+4> для открытия окон редактора 1
    - 4 (см."Перемещение между окнами редактора").
         Если вызывается пустое окно редактора, т.е. такое, которое предварительно не было заг-
    ружено, то система запрашивает у вас имя файла для редактирования. Если вы зададите имя не-
    существующего файла, то будет создан новый файл.
         Загрузить новый файл в окно редактора вы можете либо нажатием <F3>,  либо выбором  ко-
    манды Load New File (Загрузить новый файл) в меню редактора.  Система всегда запросит вас -
    сохранять ли изменения, если редактировался текущий файл.
         Окно редактирования ошибок загружается всегда,  когда вы редактируете файл,  в котором
    выявлены ошибки при компиляции либо запуске программы.
         Если один и тот же файл загружается в два или более окон редактирования,  то этот файл
    будет разделен между окнами.  Любые изменения,  внесенные в одном окне,  будут отражены  во
    всех окнах,  разделяющих этот файл. Эта мощная возможность позволяет вам редактировать файл
    в более чем одной позиции независимо.  Окно редактирования ошибок также будет  разделено  с
    любым из других окон, содержащих редактируемый файл.


                          Сохранение файла
                          ----------------

         Сохранить отредактированный  файл на диске можно нажатием <F2>,  вводом команды <УПР+K
    D> (CTRL+K D) или выбором команды Save file (сохранить файл) в окне редактора. Есть возмож-
    ность сохранить редактируемый текст в файле с другим именем выбором команды Write to (запи-
    сать) в меню редактора.
         Среда гарантирует,  что  вы  не сможете нечаянно потерять внесенные в текст изменения;
    для этого либо она запросит вас о сохранении файлов при выходе из среды, либо автоматически
    сохранит  файлы  (см."Автоматическое сохранение файлов").  Гарантию сохранения изменений во
    всех отредактированных файлах дает выбор команды All save (сохранить все) в меню Files.
         При сохранении файла на диске автоматически создается резервная копия, содержащая пре-
    дыдущее содержимое файла,  если только опция Number Of Backups (Число резервных копий) меню
    Options редактора не установлена в 0.

                     Максимальные размеры файла
                     --------------------------

         Редактор поддерживает ведение страниц на диске и,  следовательно,  может редактировать
    файлы, размер которых превышает размер доступной оперативной памяти компьютера.
         Отдельные редактируемые файлы могут достигать размера 500К символов,  но общий  размер
    всех загружаемых файлов не должен превышать 1Мбайта. Файл обмена, содержащий временные дан-
    ные,  называется М2.$$$ и не должен быть удален в ходе одного сеанса  редактирования.  Файл
    обмена будет автоматически удаляться при выходе из среды.
         Если вы достигнете одной из указанных выше границ,  вы будете предупреждены об этом, а
    возможности превысить размер файла иметь не будете.


                 Перемещение между окнами редактора
                 ----------------------------------

         Для перемещения между четырьмя окнами редактора вы можете использовать комбинации кла-
    виш <ДОП+1>,  <ДОП+2>, <ДОП+3>, <ДОП+4>, обеспечивающие переход в окна редактора 1- 4 соот-
    ветственно. Помимо этого, вы можете попасть в окно редактирования ошибок, если оно активно,
    нажатием <ДОП+0> (Alt +0).
         Перемещаться по  окнам редактора можно также нажатием на клавишу циклического перехода
    - <F6>, которая будет циклически перемещать вас по всем открытым окнам редактирования.


                         Команды редактора
                         -----------------

         Редактор среды обеспечивает большой набор функций для редактирования.  Каждая  функция
    может быть вызвана либо из меню,  либо посредством последовательности клавиш. Как было ука-
    зано выше,  вы можете настроить все меню и все клавиши под свои требования (см.  "Настройка
    меню").
         Начальная конфигурация, приведенная ниже, подобна командам редактора WordStar и расши-
    рена некоторыми полезными для редактирования программ возможностями.

                        Перемещения курсора
                        -------------------

         Следующая таблица описывает клавиши перемещения курсора,  позволяющие перемещаться  по
    редактируемому файлу:

         <стрелка влево> или
         <ДОП+S> (CTRL+S) - перемещение курсора влево;

         <стрелка вправо> или
         <УПР+D> (CTRL+D) - перемещение курсора вправо;

         <стрелка вверх> или
         <ДОП+Е> (CTRL+E) - перемещение курсора вверх;

         <стрелка вниз>  или
         <ДОП+X> (CTRL+X) - перемещение курсора вниз;

         <ДОП+стрелка влево> (CTRL+стрелка влево) или
         <ДОП+А> (CTRL+A) - перемещение курсора к предыдущему слову;

         <ДОП+стрелка вправо> (CTRL+стрелка вправо) или
         <ДОП+F> (CTRL+F) - перемещение курсора к следующему слову;

         <ДОП+W> (CTRL+W) - прокрутка вверх;

         <ДОП+Z> (CTRL+Z) -  прокрутка вниз;

         <ПРЕД> (PqUp) или
         <ДОП+R> (CTRL+R) -  cтраница вверх;

         <СЛЕД> (PqDn) или
         <ДОП+С> (CTRL+C) - страница вниз;

         <НАЧ> (Home) или
         <ДОП+Q S> (CTRL+Q S) - в начало строки;

         <КОН> (End) или
         <ДОП+Q D> (CTRL+Q D) - в конец строки;

         <ДОП+НАЧ> (CTRL+Home)  или
         <ДОП+Q E> (CTRL+Q E) - в начало экрана;

         <ДОП+КОН> (CTRL+End) или
         <ДОП+Q X> (CTRL+Q X) - в конец экрана;

         <ДОП+ПРЕД> (CTRL+PqUp) или
         <ДОП+Q R> (CTRL+Q R) - в начало файла;

         <ДОП+СЛЕД> (CTRL+PqDn) или
         <ДОП+Q C> (CTRL+Q C) - в конец файла;

         <ДОП+Q B> (CTRL+Q B) - в начало блока;

         <ДОП+Q K> (CTRL+Q K) - в конец блока;

         <ДОП+Q P> (CTRL+Q P) - в предыдущую позицию курсора;

         <ДОП+Q G> (CTRL+Q G) - запрашивает номер строки и затем перемещается в эту строку.


                         Вставка и удаление
                         ------------------

         Следующие комбинации  клавиш позволяют вам вставить или перезаписать символы,  а также
    удалять символы, слова и строки:

         <ВСТ> (Ins) или
         <УПР+V> (Ctrl+V) - переключатель вставка/замена.

         <ВВОД> (Enter) или
         <УПР+M> (Ctrl+M) - вставка строки.

         <УПР+N> (Ctrl+N) - вставка строки ниже.

         <Табуляция> (Tab) или
         <УПР+I> (Ctrl+I) - вставка последовательности пробелов или символа табуляции (см. "Ре-
    жимы редактора").

         <УДЛ> (Del) или
         <УПР+G> (Ctrl+G) - удаление символов в позиции маркера.

         <ЗАБОЙ> (BackSpace) или
         <УПР+H> (Ctrl+H) - удаление символов слева от позиции маркера.

         <УПР+T> (Ctrl+T) - удаление слова справа от позиции маркера.

         <УПР+Y> (Ctrl+Y) - удаление строки.

         <УПР+Q Y> (Ctrl+Q Y) - удаление от позиции маркера до конца строки.

         <УПР+P> (Ctrl+P) - Ctrl - префикс.  Позволяет вводить управляющие символы  как  текст.
    Введенные символы отображаются графически.
