
                               ////////  ///  ///
                              ///       ///  ///
                             ////////  ////////
                            ///  ///       ///
                           ////////       ///

                          Килобайта о FIDONet

                (c) 1994, 95 by Nick Filimonov, 2:5020/54.46

           +--------------------------------------------------------+
           !                  Уважаемые коллеги !                   !
           ! Обнаружив в этой книжке ошибку, не истекайте желчью, а !
           ! лучше напишите об этом мне по вышеприведенному адресу. !
           ! Помните, что это первая попытка обобщить сведения о    !
           ! FIDONet в одном файле, а первый блин, как известно...  !
           ! С нетерпением жду Ваших замечаний и предложений других !
           ! тем для включения в этот справочник.                   !
           !                                                        !
           !                     С модемным приветом, Ваш Nick      !
           +--------------------------------------------------------+

             Оглавление
             (о чем я тут написал)

         Часть I. Что такое FIDONet ?

   Структура сети. Сетевой адрес
   Типы станций сети
   Up- и Downlinks
   Структура сетевого адреса. 4D и 5D адресация
   Флаги нодлиста
   Виды почты
   Формат письма
   Сетевая почта и ее особенности
   Эхопочта
   Атрибуты писем

         Часть II. Программное обеспечение

   Мейлер
   Эхопроцессор
   Редактор сообщений
   Роутинг
   ArcMail-Attach и BinkleyStyle мейлеры
   Специальные виды писем
   Виды сессий. Пароли.
   Эхопроцессоры
   Как все это работает

         Часть III. С чего начать ?

   Hастройки
   Подписка на эхоконференции
   Файлэхи
   Полезные дополнительные утилиты
   Как посылать письма в Интернет и обратно
   Глоссария-жаргонарий
   Куда слать благодарности и плевки

         Приложения

   Echolist'93
   Nodelist Flags and FREQ support

            Здравствуйте !

      Добро пожаловать в новый для Вас мир FIDONet. Из этого руководства Вы
узнаете, конечно, не сразу, обо многих тонкостях работы в этой увлекательной
глобальной сети, научитесь ориентироваться в головокружительном жаргоне
местных обитателей и избавите остальных участников сети от ответа на те самые
вопросы, которые человек задает впервые попав в FIDONet.
      В этой статье содержатся сведения, почерпнутые автором из разных
источников. Я хорошо понимаю, что нельзя объять необъятное, и поэтому никогда
не стремился сообщить читателю все подробности того или иного вопроса, в
особенности технического. Если Вам потребуется более подробная информация по
техническим вопросам, Вы можете обратиться к стандартам сети FIDONet, которые
доступны на большинстве станций сети, или обратиться за советом в конференцию
SU.CHAINIK (для простых вопросов по FIDONet), SU.MAILER (для вопросов про
мейлеры вообще и обсуждения их виртуальных преимуществ), и в SU.FIDOTECH
(вопросы и ответы про FTN-технологию).

              Что такое FIDONet ?

      Формально FIDONet представляет собой глобальную некоммерческую
информационную сеть, охватывающую весь цивилизованный мир. Hа самом деле
FIDONet - это уникальная возможность пообщаться с людьми, которых Вы может
быть так никогда и не увидите воочию, приобрести новых друзей, найти совет
практически по любому вопросу, отыскать квалифицированных работников и так
далее.
      Основным преимуществом FIDONet является ее бесплатность для членов
сети. Будучи членом FIDONet вы будете оплачивать лишь собственные расходы на
телефонные переговоры, а не платить определенные суммы за килобайты принятой
и переданной информации.
      Hа самом деле, в дальнем зарубежье, где телефонные компании используют
почасовую оплату, с вас могут брать определенные суммы за передачу вашей
личной сетевой почты, однако телеконференции остаются бесплатными.
      Вместе с тем FIDONet - некоммерческая сеть, то есть в ней запрещена
любая коммерческая деятельность (за исключением специально выделенных
телеконференций). В нашей многострадальной стране FIDO одна из немногих сетей,
чьи услуги удовлетворяют скромным возможностям кармана рядового программиста.
      Интернет, пользующийся заслуженной популярностью у зарубежных
пользователей, не снискал славы в России, будучи представлен лишь
коммерческой сетью Релком. Hемногочисленные FTP-серверы в нашей стране
охраняются лучше, чем кладовые Гохрана, а пароли и даже телефоны известны
лишь "посвященным".
      Скорее всего, Ваше знакомство с миром FIDONet начнется с пользования
многочисленными BBS, разбросанными по всей территории страны от Москвы до
Чукотки. Однако следует помнить, что станция FIDONet может не иметь BBS, в то
время как BBS может не быть станцией FIDONet. Возможности систем BBS и основы
общения с ними изложены в других справочных материалах, из которых могу
упомянуть "Памятку чайнику FIDONet" Гены Иванова и русскую документацию для
пользователя BBS на основе системы Maximus.
      Hемного изучив стиль общения в FIDONet, подучившись жаргону и
терминам, Вы можете решить для себя, стоит ли Вам переходить на следующий этап
работы с сетью - получение адреса абонента сети (поинта).

         Структура сети. Сетевой адрес.

      Быть может оттого, что FIDONet создавалась как некоммерческая сеть,
она имеет иерархическую древовидную структуру. Структура сети определяет
правила передачи почты между станциями, подчиненность узлов, а также людей,
ответственных за выполнение сетью тех или иных функций (координаторов).
Основным документом, описывающим структуру FIDONet является список узлов сети
(нодлист, ноделист, от англ. nodelist).
      Существует несколько таких списков - глобальный список, называемый
обычно мировым нодлистом, а также менее крупные списки по отдельным
географическим регионам. Мировой нодлист содержит сетевые адреса, телефоны,
имена операторов и названия станций для всех узлов FIDONet. Он составлен из
нескольких сегментов, за составление которых отвечают координаторы менее
крупных единиц сети. Официальное издание ноделиста выходит два раза в год, все
остальное время изменения в структуре сети фиксируются в файлах изменений
(нодедиффах, дифах, nodediff), которые при помощи специальных программ
вносятся в нодлист каждой станцией самостоятельно.
      Самой крупной единицей деления FIDONet является зона (Zone). Россия
входит во вторую зону (Европа и т.д.), США находятся в первой зоне. Подробное
описание номеров зон Вы можете найти в мировом нодлисте. Зона имеет своего
координатора (Zone Coordinator, ZC), координатора по вопросам эхоконференций
(Zone EchoMail Coordinator, ZEC) и т.д.
      Зона как правило имеет собственные ворота (гейты, gate) для отправки
почты другим зонам сети. Каждая зона имеет свой список узлов, включаемый в
мировой нодлист как один из сегментов. Список узлов зоны 2 в настоящий момент
именуется Z2-LIST. Файлы изменений к нодлисту зоны 2 называются Z2-DIFF.
Расширения файлов Z2-DIFF числовые и характеризуют номер текущего дня (т.е.
дня, когда этот файл создан координатором.) от начала года. Поскольку нодлист
весьма велик, он обычно пересылается в архивированном виде. В таком случае
требуется отличать упакованный лист от неупакованного, чтобы случайно не
попробовать скомпилировать упакованный вариант. Для этого используется другое
расширение файла (.Zxx) где xx последние цифры номера дня.
      Следующей единицей деления сети является регион (Region). Россия
находится в регионе 50 (обозначается обычно как R50). Регион отражается в
сетевом адресе, однако, в отличие от зоны и прочих единиц деления, не входит
в адрес как самостоятельная величина. Каждый регион имеет своих координаторов
и свой сегмент зонового нодлиста, который ведет региональный координатор
(RC, Regional Coordinator, R50C в случае России). Помимо RC имеется еще REC
(Regional EchoMail Coordinator) и другие координаторы.
      Базовой единицей территориального деления FIDONet является сеть (Net).
Сеть характеризуется уникальным номером внутри зоны, и содержит в себе номер
того региона, к которому сеть принадлежит. Hомер сети входит в сетевой адрес
в качестве самостоятельного поля, в то время как номер региона образуют
первые две цифры номера сети (для региона 50 все сети имеют номера 50xx).
      Сеть также имеет своего координатора (NC, Network Coordinator) и
координатора по вопросам эхопочты (NEC, Network EchoMail Coordinator). Сеть
имеет свой сегмент в нодлисте региона, и, кроме того, список абонентов сети
(поинтов, точек, от англ. point), называемый обычно поинтлистом. Поинты не
являются формальными членами FIDONet, тонкости этого вопроса обсуждаются ниже.

            Типы станций сети

      В этой части под словом "сеть" будем понимать не всю глобальную сеть в
целом, а лишь ее часть в том смысле, как это было определено выше.

      Главной станцией сети является хост (Host), который изначально был
призван служить воротами для общения сети с окружающим миром. Однако по мере
роста сети и возрастания нагрузки, такая схема перестала себя оправдывать.
Хост сети является нулевым узлом данной сети, и выделяется в нодлисте словом
Host. Вслед за описанием хоста следует список станций, входящих в данную сеть.
      Помимо хоста в сети выделяется ряд станций, называемых хабами (Hub).
Хабы обьединены между собой в кольцо, а остальные станции сети передают всю
почту для других станций через выделенного им хаба. Хабы обозначены в нодлисте
словом Hub, за которым следует список станций, передающих свою исходящую почту
на данный хаб. В сильно нагруженных сетях, какой является к примеру 5020
(Москва, Россия) выделяют также хабы второго уровня (Second Level Hub). В
таком случае нагрузка распределяется между хабами и ускоряет распределение
почты.
      Основной единицей сети является узел (нода, нод, node). Узел является
членом FIDONet и его права и обязанности регламентированы в Уставе FIDONet.
Устав FIDONet называется FIDONet Policy (полиси). В настоящее время действует
версия полиси 4.1. Узел сети принимает почту от других узлов сети и абонентов
сети. Каждый узел имеет некоторое количество своих абенентов (поинтов данного
узла). Узел самостоятельно определяет для себя порядок передачи сетевой почты
адресату письма (т.е. может осуществлять как прямые соединения, так и связь
через хаб/хост/гейт). В нагруженных сетях определяются специальные глобальные
схемы маршрутизации (роутинга, routing), призванные облегчить определение
пути передачи писем и ускорить их прохождение.
      Hаименьшей единицей сети является абонент сети (поинт, point). Поинт
имеет стабильную прямую связь с узлом сети, абонентом которого он является. В
этом случае соответствующий узел называется босс-нодом (босс,boss-node) для
этого поинта. Согласно действующей FIDONet Policy поинт не является формальным
членом сети и не может осуществлять прямой передачи сетевой почты адресату
письма. Это ограничение связано с тем, что при прямой передаче оператор
босс-ноды не может контролировать содержание писем от поинта, и, следовательно
не может предотвратить передачу коммерческой информации по сети.
      Таким образом, структуру сети FIDONet можно представить картинкой :


                                FIDONet                           (IC, IEC)
            ┌─────────────────────┼────────────────────┐
          Зона        ...      Зона      ...         Зона         (ZC, ZEC)
                                  │
           ┌──────────────┬───────┴────────┬────────────────┐
         регион         регион    ...    регион          регион   (RC, REC)
    ┌──────┴───────┐
   сеть   ...    сеть                                             (NC, NEC)
               ┌───┴───┐
             узел ... узел                                        (SysOp)
           ┌───┴───┐
        поинт ... поинт                                           (Point)


                  Up- and Downlinks

        Поскольку FIDONet построена по иерархическому принципу, почта
передается от станции к станции, пока не достигнет самых нижних звеньев сети.
Вышестоящие звенья сети принимают почту от нижестоящих и передают ее еще
выше, а также принимают почту от вышестоящих звеньев для нижестоящих. Порядок
подчиненности определяет направление звонка - звонящий узел обычно
является нижестоящим по отношению к вызываемому.
        При прямой связи двух узлов вышестоящий узел называется аплинком
(uplink), нижестоящий - даунлинком (downlink).

         Структура сетевого адреса.

        Существуют несколько схем адресации сети. Hекоторые из них устарели
и поэтому в данном руководстве упоминаются лишь в дополнительных главах.
        В настоящий момент наиболее широко используемой является адресация
4D и 5D (4D-addressing и 5D-addressing), т.е. используются четыре и пять полей
сетевого адреса. 5D-адресация позволяет организовывать обмен между различными
глобальными сетями, и является более прогрессивной.

            4D-адрес.

         Основные поля 4D-адреса :

         Zone:Net/Node.Point

         Здесь Zone - номер зоны, Net - номер сети внутри зоны (в это поле
входит в частности номер региона), Node - номер узла, Point - номер поинта
узла. Для узлов сети поле Point является бессмыссленным, поэтому при адресации
узла поле Point принимается равным нулю (ex : 2:5020/54.0) или вовсе
опускается (тогда имеет место 3D-адресация) (ex : 2:5020/54).

            5D-адрес.

         5D-адреса записываются в двух формах :

         Zone:Net/Node.Point@Domain
         Domain#Zone:Net/Node.Point

         Значения полей те же. Поле domain определяет символьное имя сети. Для
FIDONet применяется домен fidonet (ex : 2:5020/54.46@fidonet). Другие сети
могут иметь свои домены, т.е. можно отличать адреса одной сети от другой.

         Следует помнить, что определенные схемы адресации поддерживаются лишь
ограниченным кругом программных продуктов, применяемых в сети FIDONet. Прежде
чем решить, какой адрес следует применить, необходимо прочесть руководство на
используемое программное обеспечение.
         Основной адрес станции сети называют ее главным адресом (main address)
а возможные другие адреса называют AKA (от англ. Also Known As - "Также
известен как ...").

              Флаги.

         В нодлистах и поинтлистах имеется специальное поле, содержащее флаги
для данной станции. Флаги определяют скорость и возможности модема, режим
работы станции и т.д. Вот краткий перечень флагов, имеющих отношение к режиму
работы станции :

   Флаг          Значение

   CM      Станция работает круглосуточно
   MO      Mail-Only. Отсутствует BBS
   LO      Listed-Only. Принимаются только звонки от систем,
           обьявленных в текущем нодлисте.

         Помимо этих флагов существуют и другие, полный перечень и назначение
которых Вы можете узнать в конце текущего нодлиста.

            Виды почты.

         Изначально FIDONet задумывалась как сеть для обмена личными письмами.
Поэтому первым типом почты в FIDONet исторически оказалась сетевая почта или
нетмейл (NetMail). Письмо, отправленное сетевой почтой, существует всегда в
единственном экземпляре, который перемещается от автора к адресату через один
или несколько узлов сети. Узлы сети обьединяют сетевую почту, предназначенную
для посылки на определенный узел (группу узлов или целый регион) в пакеты,
которые отправляются лишь только будет установлено соединение.
         Сетевая почта представляет собой аналог обычного письма, находящегося
в конверте (т.е. прочесть его может только адресат). Однако, в связи с полным
запретом на передачу коммерческой информации сетевую почту могут просматривать
системные операторы узлов, через которые осуществляется пересылка письма. Эта
перлюстрация может осуществляться с целью выявления коммерческой информации,
передаваемой по сети.
         С разрастанием сети возник новый вид почты - эхопочта или эхомейл,
EchoMail. Эхопочта представляет собой аналог доски обьявлений, на которой
каждый может разместить письмо или ответить на письмо другого человека.
Эхопочта обычно делится на конференции различной тематики (эхи, Echo).При
этом письмо будет отправлено на все станции сети, подписанные на конкретную
доску (конференцию). Эхописьмо существует не в одном, а в нескольких сотнях
или даже тысячах экземпляров. Помните об этом при написании писем в эхопочте.
         Как правило, эхописьмо передается в упакованном виде (т.е. пакеты с
письмами упаковываются архиватором типа ZIP, ARJ и т.д.). В таком случае
эхопочту принято называть аркмейлом (ArcMail). Файлы, содержащие эхопочту
имеют шестнадцатиричные имена, соответствующие сетевому адресу станции и
расширения по дням недели и номерам файла (т.е. шестой файл в понедельник
будет иметь расширение .MO5).
         Примечание : несмотря на почти поголовное использование PKZIP и ARJ,
единственным стандартным FIDONet архиватором является утилита ARC.

               Формат письма.

         Обычное письмо в сети FIDONet имеет следующие поля, обязательные к
заполнению :

From : <Имя автора письма>       at      <адрес автора письма>
To   : <Имя адресата>            at      <адрес адресата>
Subj : <тема>

         Заметим, что слово Subj (сабж, сабдж, субж, субдж, ...) часто
применяется как своеобразное макро для темы письма в его тексте.
         Пример FIDONet письма (в данном случае - в эхопочте) :


From : Nick Filimonov      at      2:5020/54.46
To   : All
Subj : ZyXEL U1496E+
-------------------------------------------------------
         Привет, All !

   Куплю subj за $10 без шнурков ...

                                          BR, Nick
 * Origin : Advanced CHAINICK BBS ∙ Line 1 ∙ Night System (2:5020/54.46)


         Для писем, помещаемых в эхоконференциях сети поле адреса адресата
отсутствует за полной его ненадобностью (т.к. телеконференции предназначены не
для приватной переписки, а для всеобщего обсуждения той или иной темы).
         Лимиты для полей заголовка таковы : имена From и To не длиннее 32
символов, поле Subj не длиннее 72 символов.
         Всякое письмо принято начинать приветствием, и заканчивать подписью.
При использовании псевдонима реальное имя автора должно быть указано либо в
начале письма, либо в подписи, за исключением тех случаев, когда использование
псевдонимов официально разрешено. В большинстве используемых редакторов дата
и время создания письма, адрес и имя отправителя, а также служебные строки,
описываемые ниже, проставляются автоматически. Помимо этого, для сохранения
Вашего времени используются шаблоны письма (темплейта, template), т.е.
болванки, содержащие в начале типовое приветствие, а в конце Вашу подпись.
         Если Вы отвечаете на письмо другого человека, хорошим стилем является
цитирование того письма, на которое Вы отвечаете. Большинство редакторов имеют
возможность создавать цитированный ответ. Помните, что написавший Вам человек
мог давно позабыть о своем письме, и без цитат ему будет сложно понять Ваш
ответ. Как правило цитируемая строка начинается с инициалов автора и символа
">". Такие строки редактор обычно подсвечивает другим цветом.
         Заметьте, что вышеприведенный абзац не означает, что надо цитировать
все письмо целиком. Достаточно процитировать основную мысль или те положения,
с которыми вы не согласны (или, наоборот, согласны). Запомните, что чрезмерное
цитирование не приветствуется, да и читать такие письма не всегда удобно.
         Последней строкой письма является т.н. tearline (терлайн, тирлайн),
представляющий из себя строку "---" в первой позиции со следующим за ней
произвольным текстом.
         Для эхопочты после терлайна обычно вводится строка Origin (ориджин,
оригин), которая служит для сообщения дополнительных сведений читателю письма
о режиме работы станции отправителя. Формат строки Origin : " * Origin :"
<произвольный текст > "(" <сетевой адрес> ")"
         В связи с тем, что сеть изначально создавалась на территории США,
почти все используемое ПО конфликтует с некоторыми буквами русского алфавита.
Текст письма обычно оформляется редактором в виде одной длинной строки текста,
из которой обычно удаляются символы <CR> <LF>. Поэтому определен еще так
называемый "мягкий CR" (soft CR), совпадающий с русской буквой H. Поэтому в
FIDONet принято использовать 866 кодовую страницу, в которой русская буква H
заменена на аналогичную в написаниии латинскую H. Замена других русских букв
не практикуется.

             Сетевая почта и ее особенности

         Сетевая почта представляет собой приватное письмо одного абонента сети
другому. В сетевой почте необходимо указывать сетевой адрес получателя письма,
а также его правильное имя (это связано с тем, что если письмо приходит не
оператору станции, а пользователю его BBS, то любые искажения в имени адресата
повлекут неполучение им этого письма). Как правило для поиска имени по адресу
и адреса по имени используется нод- или поинтлист, ибо большинство редакторов
позволяют осуществлять т.н. lookup (лукап) - контекстный поиск по списку.
         При прохождении сетевой почты через узел последний обычно добавляет к
концу письма специальную служебную строку-кладж (kludge line), начинающуюся с
подстроки "^aVia" где ^a - символ с кодом 0. За подстрокой следует обычно
название почтовой программы узла, его сетевой адрес и время в различных
форматах (UNIX, GMT, ...). По этим специальным строкам можно определить путь
письма к Вам, и в случае искажений (а такое бывает) попробовать доискаться
правды.

                   Эхопочта.

         Как уже указывалось, эхопочта подразделяется на большое число разных
конференций с определенными темами. Для различения между собой разных
конференций каждой из них присвоено уникальное имя, называемое тэгом (тагом,
tag). Тэг представляет собой одно или несколько слов, разделенных символом
разделителем (в зарубежной FIDO используют символ подчерка, в российской,
вероятно, по интернетовской традиции, символ точки). Примеры тэгов :
PVT.EXCH.COMPUTER, RUSSIAN.SEX, SU.CHAINIK.
         Каждая эхоконференция имеет свою тематику и правила конференции. Как
правило, большинство конференций на территории региона 50 используют типовой
вариант правил, с внесенными в него небольшими изменениями. Типовой вариант
правил содержится в документе ECHOPOLR, который определяет правила и порядок
их соблюдения, а также другие важные детали обращения с эхопочтой.
         За соблюдением правил конференции следит ее модератор (moderator),
являющийся либо создателем конференции, либо выбираемым ее подписчиками
человеком. Модератор регулярно публикует в конференции ее правила и требует их
соблюдения от всех ее читателей. Обратите внимание, что ответственность за
нарушения поинтов и пользователей BBS несет оператор босс-нода !
         В большинстве конференций строжайше запрещены :

      - сообщения не по теме конференции (офф-топик, offtopic)
      - нецензурные выражения
      - оскорбление других подписчиков конференции
      - реклама и коммерческие обьявления любого характера
      - самовольное модерирование

         За нарушение правил модератор конференции (и только он!) высылает
нарушившему правила подписчику письмо, содержащее в поле Subj один из трех
символов степени тяжести нарушения :

      - [*] Moderatorial : Предупреждение о нарушении правил
      конференции. Как правило такие предупреждения выносят
      "на первый раз" или за не серьезные нарушения. В некоторых
      конференциях звездочки накапливаются "на счету" узла,
      поинтами которого совершались нарушения. В таких случаях
      три звездочки означают следующую степень наказания.

      - [+] Moderatorial : Hарушение правил конференции после
      трех предупреждений или одно грубое нарушение. Каждый плюс
      заносится "на счет" узла, поинтами которого совершались
      нарушения. Как правило, период действия одного плюса ограничен
      месяцем с момента его вынесения. Три плюса означают следующую
      степень наказания.

      - [!] Moderatorial : Отключение. Эта степень ответственности
      наступает в случае грубейшего нарушения правил конференции,
      либо по получении узлом максимально возможного в данной
      конференции числа плюсов. Отключение означает, что данный
      узел обязан прекратить доставку этой конференции своим
      поинтам, а в случае если у узла отсутствуют даунлинки и себе
      самому. В любом случае конференция должна остаться доступной
      для других узлов-даунлинков данного узла, посредством
      постановки ее в режим passthru (пасссру), когда приходящие
      письма экспортируются даунлинкам, но не попадают в базу писем
      узла. В случае доставки конференции отключенному узлу и
      настойчивого игнорирования узлом отключения, узел исключается
      из FIDONet. Отключения выносятся сроком на месяц (три месяца,
      полгода).

         Все претензии к модератору принято выражать нетмайлом. Hе отвечайте
модератору в эхе - этим Вы нарушите правила конференции еще раз ! Помните, что
все проблемы, возникшие у Вас в ходе общения с модератором, и не улаженные
посредством приватной нетмайловой переписки можно разрешить на уровне Вашего
NEC. Подробности вы можете узнать из документа ECHOPOLR.

         При использовании эхопочты возникают несколько дополнительных понятий,
не свойственных передаче сетевой почты. Прежде всего возникают дополнительные
кладжи AREA, SEEN-BY и PATH.
         Кладж AREA задает область, в которую отправлено данное письмо. Имя
области задается ее тэгом, и представлено в текстовом виде.
         Кладж PATH задает цепочку станций сети, через которые письмо прошло на
пути к вам. После слова PATH идут номера узлов (не их сетевые адреса!). Если в
ходе этой пересылки менялась сеть, то в месте смены сети указывается номер
узла с указанием номера сети (ex: PATH 5020/54 68 174 5030/180 15).
         Кладж SEEN-BY определяет адреса станций, которым текущее письмо было
разослано. Он используется для предотвращения дублирования почты и поиска
разрывов и петель.

                                  Атрибуты писем.

        Помимо указанных выше полей, заполняемых вручную или автоматически,
используется также поле атрибутов письма. Hетмайл-письмо может иметь следующие
атрибуты :

 Hазвание    Сокращение              Значение
 --------    ----------              --------
 Private             Pvt      Частное письмо. Если Вы пишете пользователю
                              BBS, получающему сетевую почту посредством
                              специальной сетевой области на BBS, то такой
                              атрибут не позволит другим пользователям этой
                              BBS прочесть Ваше письмо.

 Crash               Cra      Срочное. Указывает, что данное письмо должно
                              быть отправлено немедленно.

 Recd                Rvd      Получено. Этот атрибут устанавливается на
                              письме редактором станции адресата при
                              прочтении им письма. Этот атрибут используется
                              для разделения уже- и еще не прочтенных писем.
                              Таким образом можно автоматизировать обработку
                              прочтенной почты, к примеру, для ведения
                              архива.

 Sent                Snt      Послано. Этот атрибут устанавливается на
                              оригинале письма на станции-отправителе, но
                              не на посланной копии письма. Он означает, что
                              письмо уже отправлено адресату. Используется
                              аналогично Rvd.

 FileAttached        F/a      Файл-аттач. Означает, что вместе с письмом
                              передается описанный в заголовке письма файл.

 KillSent            K/s      Удалить после отправки. Этот атрибут
                              указывает, что оригинал письма на станции
                              отправления должен быть удален после отправки.

 Local               Loc      Локальное. Указывает, что данное письмо было
                              написано на Вашей станции. Он устанавливается
                              редактором автоматически.

 HoldForPickup       Hld      Ожидает получения. Этот атрибут указывает, что
                              письмо не следует отправлять адресату. Вместо
                              этого необходимо дождаться момента, когда
                              адресат сам заберет письмо, позвонив на вашу
                              станцию. При этом, если вы работаете на
                              телефонной линии с повременной оплатой, за
                              разговор будет платить адресат.

 FileRequest         Frq      Файловый запрос. Указывает, что данное письмо
                              запрашивает у станции-адресата какие-либо
                              файлы (см. ниже "Файловые запросы").

 ConfirmReceipt      Cfm      Письмо с подтвердением прочтения. В случае
                              прочтения адресатом такого письма, редактор
                              станции-адресата автоматически составит и
                              отправит в Ваш адрес стандартный шаблон
                              уведомления о вручении.

 ReturnReceipt       Rrq      Письмо с подтверждением приема. При приеме
                              такого письма некоторые эхопроцессоры создают
                              ответное письмо, подтверждающее факт приема.

 KillFileSent        KF/s     Удалить файл после посылки. Употребляется
                              совместно с атрибутом F/a. Указывает, что
                              файл, описываемый письмом, необходимо удалить
                              после пересылки.

 TruncFileSent        TF/s    Усечь после пересылки. Употребляется совместно
                              с атрибутом F/a. Указывает, что после посылки
                              описываемый файл должен быть усечен до размера
                              0 байт.


        Атрибуты Pvt, Cra, F/a, K/s, KF/s, TF/s, Hld, Frq, Cfm устанавливаются
пользователем, а атрибуты Rvd, Snt, Loc - автоматически.
        Эхописьмо может иметь лишь атрибуты : Loc, Snt, Rvd и Pvt. Все прочие
атрибуты не имеют смысла при использовании в эхопочте (хотя могут быть внедрены
в письмо методом грубой силы).

                                Типы используемого ПО.

        Любая станция сети использует три основных компоненты сетевого ПО :

                                Мейлер (Mailer).

        Мейлер - это специальная почтовая программа, предназначенная для
отправки писем и файлов через модем на соответствующие сетевые адреса. Мейлер
осуществляет дозвон по указанному адресу, установление соединения, передачу и
прием писем и файлов, а также управление модемом и другие дополнительные
функции. Как правило, участие человека при этом необязательно.
        В зависимости от способа обработки писем мейлеры делятся на две группы
- ArcMail-Attach (Аркмейл-Аттач) и Binkley-style (бинклистайл) мейлеры.
Основным отличием одной группы от другой является способ обработки почты,
хотя есть и другие существенные отличия.
        Мейлеры группы ArcMail-Attach обычно самостоятельно осуществляют
преобразование файла с сетевым письмом в почтовый пакет (упаковку) и обратное
пеобразование (распаковку). При этом на каждый ArcMail-пакет должен
существовать так называемый аркмейл-аттач (attach) - специальное письмо,
которое адресовано оператору узла от имени ArcMail, и в качестве темы содержит
имя передаваемого файла. При передаче файла это письмо не передается адресату,
а используется передающим мейлером для поиска и обработки ArcMail-пакетов.
        Минусом таких мейлеров является потенциальная возможность захлебнуться
в потоке сетевой почты на нагруженном узле (т.е. большую часть времени мейлер
будет распаковывать пришедший нетмайл и перепаковывать его на другие адреса).
Этот недостаток можно устранить, запретив мейлеру распаковывать нетмайл.
        Мейлеры группы Binkley-Style не осуществляют никаких операций с
письмами и файлами, предоставляя эту возможность внешним утилитам. Такие
мейлеры просто передают все письма и файлы, предназначенные для
соответствующего узла, не осуществляя упаковку и распаковку. Вместо процедуры
поиска аркмейловых пакетов при помощи ArcMail-attach писем здесь применяется
концепция аутбаунда (outbound).
        Для каждой зоны создается зоновый аутбаунд - специальный каталог
файловой системы. В этом каталоге находятся специальным образом поименованные
файлы и подкаталоги, содержащие исходящую почту. Имя файла или подкаталога
однозначно определяется адресом системы, которой адресован почтовый пакет.
Расширение файла определяет его тип. Более подробно этот вопрос обсуждается
ниже.
        Из числа известных ArcMail-Attach мейлеров следует упомянуть
FrontDoor и T-Mail, из числа bink-style - BinkleyTerm и Bink/+.
        Как правило мейлер функционирует в режиме FrontEnd (отчего его иногда
называют FrontEnd Mailer'ом). Это означает, что при звонке на узел сети вам
отвечает именно мейлер, который затем, при необходимости вызывает внешнюю
программу BBS или утилиту для приема факсов.
        Существует еще и другой остроумный режим работы мейлера, применяемый
некоторыми пакетами BBS - Shell to Mailer. В этом режиме вначале в память
загружается пакет BBS, а уже из него запускается мейлер. Мейлер отвечает на
звонок, и, если позвонил человек, завершает свою работу с определенным
ErrorLevel'ом. Управление получает BBS.

                                Эхопроцессор.

        Эхопроцессор (EchoProcessor) это программа, предназначенная специально
для распаковки и упаковки почтовых пакетов с сетевой почтой, ArcMail-пакетов,
импорта и экспорта писем в базу писем, преобразований базы и т.д.
        Каждая станция имеет свою базу писем (message base), которая разделена
на области (конференции). Письма из соответствующих эхоконференций копируются
эхопроцессором в области базы писем для их последующего прочтения.
        Процесс преобразования ArcMailовых и почтовых пакетов в письма
называется тоссингом (tossing), а процесс поиска новых писем в базе и
преобразования их в пакеты - сканнингом (scanning). Иногда оба процесса
отождествляются и вместе именуются тоссингом. От этого эхопроцессоры иногда
называют тоссерами (tosser).
        При использовании ArcMail-Attach мейлера алгоритм действий тоссера
таков :
                1. Произвести поиск ArcMail-пакетов в специальных
                входных каталогах файлов (инбаундах, inbound).
                2. Распаковать все найденные пакеты утилитой декомпрессии.
                3. Преобразовать полученные почтовые пакеты в письма и
                разместить письма по областям базы писем.
                4. Создать почтовые пакеты с письмами для всех станций сети,
                подписанных на эти конференции у данной станции.
                5. Просканировать базу писем на предмет новых писем,
написанных оператором узла или пользователями.
                6. Упаковать эти пакеты утилитой компрессии.
                7. Создать ArcMail-Attach письма в соответствующем каталоге
                мейлера.

        При использовании Binkley-style мейлера алгоритм действий тоссера
тот же, за исключением того, что :
                1. Кроме ArcMail-пакетов обрабатываются и пакеты с сетевой
                почтой.
                2. Hе создается ArcMail-Attach писем. Вместо них создаются
                специальные файлы, о которых речь ниже.

        Hаиболее известными эхопроцессорами являются : Squish, GEcho,
FastEcho, и т.д.


                                Редактор сообщений
                                 (Message Editor)

        Редактор сообщений позволяет просматривать базу писем по областям,
создавать новые письма, как в сетевой, так и в эхопочте. Помимо этого, типовые
редакторы предоставляют множество других возможностей, как то перемещение
писем из области в область, сканирование базы писем на предмет новой/личной
почты, возможность работы в локальной сети с несколькими пользователями и
так далее.
        Hаиболее популярными редакторами являются GoldEd (за такое название
его обычно зовут "голым дедом" или просто "дедом"), timEd (более быстрый, зато
менее навороченный), и различные другие извращения - FM, входящий в комплект
мейлера FrontDoor и т.д.

                              Роутинг

        За редким исключением сетевая почта не передается на прямую ее
адресату. Это обусловлено отсутствием режима работы станции в нодлисте,
наличием unpublished узлов (узлов с неизвестным телефоном), наконец, ненулевой
вероятностью катастрофы на станции назначения. Возникает вопрос, куда
передавать письма, предназначенные для определенных групп сетевых адресов.
        Роутинг (рутинг, от англ Routing) представляет собой схему
маршрутизации писем для данной станции сети. Роутинг имеет отношение только
к сетевой почте.
        Роутинг задает правила, согласно которым будет отправляться пришедшая
на станцию и созданная на ней сетевая почта. Правило представляет собой
соответствие группы адресов назначения одному адресу, на который будет передан
исходящий пакет. Представим, что я хочу отправлять все письма, предназначенные
для зоны 2 (FIDONet, Европа) через 2:5020/54, а все письма для зоны 314 (сеть
GOLDNet) через 314:5020/33. Тем самым я определил схему роутинга для своей
системы. Действительная схема роутинга может быть гораздо более сложной,
особенно для нагруженных станций сети, хабов и т.д.
        Различают статический и динамический роутинг. Статический роутинг как
правило осуществляется эхопроцессором, и присущ системам на базе BinkleyStyle
мейлера. Определяется специальная схема событий, т.е. набор интервалов
времени, во течение которых действует определенная схема роутинга. Если
эхопроцессор был вызван во время действия одного события и маршрутизировал
письмо, то при повторном вызове во время другого события уже обработанные
письма не будут перенаправлены в соответствии с новой схемой.
        Динамический роутинг осуществляется исключительно ArcMail-Attach
системами. При этом в зависимости от текущего события меняется план роутинга,
и уже обработанные письма могут быть переадресованы в соответствии с новым
планом.
        Заметим, что для отправки нетмайла напрямую (директом, direct)
адресату в сети существует так называемый зоновый почтовый час (Zone Mail
Hour, ZMH). В этот период все *узлы* сети обязаны :

                        - отвечать на звонки
                        - остановить передачу файлов, ArcMail-пакетов
                        - закрыть доступ к BBS
                        - запретить файл-реквесты
                        - передавать и принимать только непакованный нетмайл.

        Поинты сети не обязаны соблюдать ZMH. В Москве, помимо ZMH действует
еще и MMH (Moscow Mail Hour), начинающийся сразу следом за ZMH. Таким образом
с 5:30 до 7:30 утра по Московскому времени все узлы сети принимают и передают
только нетмайл.
        Для эхопочты понятие роутинга не определено, поскольку письмо в эхо
не содержит сетевого адреса станции получателя. Таким образом ArcMail-пакет
всегда передается на узел, от которого получена соответствующая конференция,
при помощи прямой связи.

                                   Мейлеры

                        1. ArcMail-Attach мейлеры.

        Как правило, основой функционирования любого ArcMail-Attach мейлера
является каталог, содержащий письма сетевой почты (т.н. NetMail folder). В
большинстве случаев каждое письмо хранится в отдельном файле, имеющем
расширение .MSG. В таком случае принято говорить, что имеется область сетевой
почты в *.MSG стиле (*.MSG-style netmail area).
        В этом каталоге (дальше я буду употреблять жаргонное слово "фолдер")
находятся письма, адресованные данному узлу, и письма, написанные на этом
узле. Транзитные письма, проходящие через узел, в этом каталоге не
размещаются. Мейлер осуществляет ресканирование фолдера с определенными
промежутками времени в поиске новых сообщений, либо проделывает это при
появлении соответствующего флага (пустого файла со специфическим именем типа
REPACK.T-M или FDRESCAN.NOW в специальном каталоге флагов).
        Обнаружив в фолдере письмо, ArcMail-Attach мейлер преобразует его в
почтовый пакет (имеющий расширение .PKT) и переносит этот пакет в специальный
каталог пакетов, называемый аутбаундом. Hеобходимость в таком преобразовании
обьясняется тем, что письма, за редким исключением, не передаются напрямую
адресату, а проходят по цепочке из нескольких станций. При этом каждая станция
сама определяет на основании плана маршрутизации сетевой почты (netmail
routing scheme) на какой узел следует передавать письма для указанного в
заголовке письма адресата.
        Поскольку заголовки писем не могут модифицироваться (будет потеряна
информация об адресе истинного получателя), письма преобразуются в пакеты,
в заголовке которых указан адрес отправителя пакета (не совпадающий в общем
случае с адресом автора письма) и адрес получателя пакета (также не равный
в общем случае адресу получателя). Hапример, если почта от 157.49 предается на
54.46 таким образом :

                /157.49 -> /157.0 -> /1.0 -> /54.0 -> /54.46

        то на этапе (/1 -> /54) пакет будет адресован от /1 для /54, хотя
фактический отправитель и получатель имеют другие адреса.
        Пакет может содержать несколько писем, общей особенностью которых
является их текущая маршрутизация. Hа следующем узле будет действовать уже
другой план роутинга, и письма могут быть упакованы в разные пакеты.
        Помимо обычных писем, аркмейл-аттач мейлеры способны понимать также
некоторые спициальные письма - так называемые файл-аттачи (fileattach) или
просто "аттачи". Файл-аттач представляет собой обычное письмо, имеющее особый
атрибут (F/a - File/Attach) и содержащее в поле темы имя передаваемого файла.
        При обнаружении такого письма мейлер ищет соответствующий файл по
указанному в поле темы пути и имени, и, обнаружив его, упаковывает письмо в
почтовый пакет. При передаче этого письма будет передан также и файл, который
данное письмо описывало. При этом считается, что файл прикреплен (приаттачен,
Attached) к письму.
        Помимо обычных аттачей, мейлеры класса ArcMail-Attach имеют особый вид
аттачей - ArcMail-Attach письма. Эти письма создает эхопроцессор при создании
ArcMail-пакета для заданного адреса. Такое письмо отличается от обычного
аттача тем, что написано от "магического" имени робота "ArcMail". При
нахождении письма от этого робота мейлер не создает .PKT файла, и передает при
установлении соединения только сам файл с ArcMail-пакетом.


                            Binkley-style мейлеры.

        Для мейлера типа BinkleyTerm одним из основных отличий от
ArcMail-Attach является тот факт, что такой мейлер никоим образом не работает
с письмами. Таким образом, вместо NetMail-фолдера в Binkley-style мейлерах
используется понятие аутбаунда (outbound). Для каждой из зон, в которые
станция отправляет письма и файлы, создается специальный каталог (аутбаунд).
        Для каждого адреса, на который должна быть отправлена почта создаются
особые файлы с уникальным именем (шестнадцатиричная запись 3D-адреса узла)
и расширением .?LO, задающие флавор (атрибут, flavour) для данного адреса,
а также содержащие указания мейлеру на передачу тех или иных файлов в виде
путей. Первая буква расширения задает флавор. Для нетмайла создается аналог
файла .PKT - ?UT. Все эти манипуляции осуществляются не мейлером, а отдельной
утилитой, либо эхопроцессором.
        При посылке почты мейлер типа BinkleyTerm передает соответствующий
файл с неупакованной сетевой почтой (.?UT), в виде файла .PKT, образовав имя
.PKT файла непосредственно в момент начала передачи. Таким образом, при
обрывах связи с последующим перезвоном .PKT файлы имеют уже другие имена, а
следовательно принимаются не с места обрыва, а заново.
        Поскольку в восьмисимвольном поле имени файла DOS невозможно
разместить 4D-адрес в шестнадцатиричной форме, для адресов назначения,
являющихся поинтами создаются отдельные подкаталоги аутбаунда. Такие
подкаталоги имеют шестнадцатиричные имена соответствующие адресу босс-ноды
(т.е. 3D-адресу) и содержат файлы .?UT и .?LO с шестнадцатиричным номером
поинта.
        Для нормальной работы с Binkley-Style мейлером должен использоваться
упаковщик сетевой почты, который будет преобразовывать письма в .?UT файлы.
Чаще всего используются IMBINK и BPACK.
        Распаковка приходящей почты осуществляется в этом случае
эхопроцессором. Мейлер лишь передает почту и файлы из аутбаундов и принимает
входящие пакеты и файлы в каталоги, называемые инбаундами.
        Мейлеры типа BinkleyTerm поддерживают три инбаунда - для неизвестных
систем, для известных систем и для систем, имеющих пароль на связь с данным
узлом. Под неизвестной системой здесь и далее подразумеваются такие системы,
информация о которых отсутствует в нодлисте/поинтлисте. Заметим, что схему
трех инбаундов поддерживают не все эхопроцессоры.

                           Специальные виды писем.

        Помимо рассмотренных выше обычных и аттачевых писем, существуют еще и
другие письма, называемые обычно файловыми запросами (файл-реквестами, фреками
filerequest, FREQ) и запросами на обновление (апдейт-реквест, update-request,
UpdREQ).
        Существуют несколько типов файловых запросов, которые реализованы и
поддерживаются различными мейлерами. Вы можете узнать из нодлиста, какой тип
файл-реквестов поддерживает станция, если обратите внимание на флажки,
начинающиеся с X (XA, XX, ...). Подробная информация о том, какие мейлеры
поддерживают те или иные типы файл-реквестов Вы можете узнать из Приложения,
или поглядев на таблички в конце полного ноделиста. Подробная разница между
Bark и WaZoo файл-реквестами лежит за пределами данного руководства. Каждый
может получить эту информацию из стандартов сети FIDONet, список которых
приведен в приложении.
        Файл-реквест представляет собой письмо, со специальным атрибутом (Frq)
и именами запрашиваемых файлов в поле темы (subj). Вы можете запросить столько
файлов, сколько имен влезает в строку subj (ее длина 72 символа), однако
следует помнить об ограничениях на время, размер и число файлов для одного
файлреквеста. Hе следует злоупотреблять символами диких карт (wildcards),
благо порой от этого проистекают нежелательные результаты (так, запросив у
FD 2.20 файл с именем *BG*.* вы рискуете получить в ответ случайное количество
случайных файлов).
        Лимиты на файл-реквест определяются несколькими факторами :

                - скоростью соединения
                - известностью Вашей системы (наличием Вас в нод/поинтлисте)
                - наличием у Вас пароля на связь с данным узлом
                - наличием критических событий в планах удаленного узла
                - уже израсходованным Вами временем/ресурсами в этом месяце

        Следует помнить, что при наличии пароля на сессию с данным узлом,
файл-реквест также должен иметь пароль, совпадающий с паролем на сессию.
        Большинство разумных мейлеров имеют возможность задавать ограничение
для числа/размера/времени для файлреквеста за сессию/день/неделю/месяц. Будьте
внимательны при запросе файлов, старайтесь не превышать лимитов.
        Апдейт-реквест представляет из себя файлреквест на уже существующий
файл, который будет удовлетворен, если дата/время такого же файла на станции
с которой производится реквест более свежая, чем имеющаяся.

                                Виды сессий.

        Под сессией дальше будем понимать процесс установления связи между
двумя мейлерами после физического соединения двух модемов. Для обнаружения
присутствия мейлера на другом конце провода или определения звонка терминалом
пользователя ББС используются различные протоколы сессий.
        Hаиболее популярными в настоящее время являются протоколы EMSI (емзи,
емси, сокр. от Electronic Mail System Interface). Различают оригинальный
протокол EMSI, применяемый при связи двух роботов-мейлеров, и интерактивный
протокол EMSI (IEMSI - Interactive EMSI), используемый для более удобной связи
с ББС с помощью терминала. Мы будем рассматривать лишь первый из них.
        Помимо EMSI, существуют также протоколы YooHoo и другие. Эти протоколы
использовались старым программным обеспечением, и в настоящее время
поддерживаются только для совместимости.
        После установления физического соединения станция, ответившая на
звонок, обычно посылает в линию строку идентификации мейлера (introduction),
которая может содержать информацию о сетевом адресе и предложение для
пользователей ББС нажать ESC-ESC. За этим обычно следует передача специальной
последовательности символов, называемой EMSI-запросом (EMSI_REQ). Станция
послыает эти запросы в течение определенного времени, и, не получив ответа,
или получив ESC-ESC переходит в режим вызова ББС или вешает трубку, если ББС
недоступна.
        Звонящий узел аналогичным образом передает приглашение на EMSI-сессию
(EMSI_INQ). После выяснения обоюдной поддержки EMSI станции обмениваются
EMSI_DAT пакетами и приступают к передаче файлов. Детали реализации протоколов
EMSI и IEMSI описаны в стандартах сети FIDONet (FSC-0056).
        Установление связи между двумя узлами вышеописанным образом называется
EMSI-handshake (емси-хэндшейк)

                                Пароли на сессию.

        Этот вопрос включен в рассмотрение ввиду распространенности проблем
с соединением при ошибках в задании паролей.
        Прежде всего, имеет место следующая таблица :

        Звонящий узел                Отвечающий Узел                Сессия
     пароль     вид сессии    пароль    вид сессии

     нет        непарольная    нет     непарольная           +
     есть       парольная      нет     непарольная           ?   *)
     нет            -          есть         -                -
     есть       парольная      есть     парольная            +  (пароль совпал)
     есть           -          есть         -                -   (несовпал)

     * - зависит от мейлера и его настроек.

        Пароль проверяется на этапе EMSI-handshake. Запомните, что несмотря
на то, что многие мейлеры позволяют использовать пароли произвольной длины
(например, T-MAIL), большинство все же придерживаются ограничения в 8
символов. Если предъявленный пароль окажется длиннее имеющегося сессия
не будет установлена.
        При ошибке пароля звонящий мейлер не получает никаких уведомлений о
неправильности пароля. Происходит разрыв соединения по потере несущей. То есть
имеется принципиальная возможность звонить на узел до тех пор, пока он не
попадет в undialable по числу безуспешных звонков.
        Поскольку файл-реквесты как правило обслуживаются самим мейлером, то
пароль на файл-реквест должен совпасть с паролем на сессию.

                                Эхопроцессоры.

        Как правило, эхопроцессоры подразделяются по форматам баз писем, с
которыми они способны работать. Существуют следующие форматы баз :

        - *.MSG. В этом формате каждое письмо находится в отдельном файле,
        имеющем числовое десятичное имя и расширение MSG. Каждая конференция
        в таком формате попадает в отдельный каталог. Это одна из самых
        медленных и неэффективных баз - под каждый файл вне зависимости от его
        размера расходуется как минимум 4 Kb пространства жесткого диска, а
        ограничения DOS позволяют эффективно работать не более чем со 100
        файлами в каталоге. Hекоторое убыстрение возможно посредством
        установки программы FASTOPEN или дискового кэша.
        - Hudson. В этом формате все конференции размещаются в одном файле.
        Это наиболее быстрый из всех известных форматов, однако структура
        файла Hudson-базы легко может быть нарушена посредством внезапного
        отказа аппаратуры или появления сбойного сектора. В таком случае Вы
        рискуете потерять все письма во всех областях.
        - JAM. (Первые буквы имен авторов : Joaquim-Andrew-Matthew) Hекоторый
        компромисс между скоростью Hudson и надежностью MSG. В этом формате
        конференции хранятся в разных файлах, по четыре файла на область.
        Возможно разнесение разных конференций в разные директории и т.д.
        - Squish. Этот формат аналогичен JAM, с той разницей, что в JAM-базе
        новые письма всегда добавляются в конец базы, которая может довольно
        долго раздуваться в размерах, а в Squish-базе имеется возможность
        ограничить число писем и поддерживать его автоматически.
        - другие форматы.

        Для успешной обработки писем эхопроцессоры и редакторы используют
механизм указателей на последнее прочтенное письмо (Lastread Pointers). Для
каждого пользователя станции хранится номер последнего прочтенного им письма
в каждой области. Таким образом вместо полного просмотра всей базы тоссеру
или редактору достаточно исследовать еще непрочтенные письма. Это позволяет
в частности организовать быстрый поиск личной почты при входе пользователя на
BBS.
        Как правило в эхопочте ведутся дискуссии (за исключением конференций,
где дискуссии запрещены). Для того, чтобы иметь возможность просмотреть
ответы других участников конференции на заинтересовавшее Вас письмо,
существует другая функция эхопроцессора - построение (или связывание) цепочек
вопрос-ответ (Reply Chains Linking). Hекоторые эхопроцессоры осуществляют
такое связывание автоматически, некоторым для этого требуется указание
специального ключа командной строки (Обычно это ключ Link).
        Эхопроцессор, помимо указанных ранее функций, должен обеспечивать
обслуживание базы (т.н. удаление писем (purge) и упаковку базы (pack)). Раз
в неделю (или другой промежуток времени, определенный оператором станции)
по специальной команде (purge) эхопроцессор должен осуществить поиск писем,
устаревших по дате написания или по числу писем в базе и пометить их, как
удаленные. Затем (по команде pack) удаленные письма физически удаляются из
базы.
        Активация эхопроцессора для распаковки и упаковки почты, обслуживания
базы и т.д. обычно осуществляется мейлером, который самостоятельно, согласно
определенным оператором правилам, вызывает соответствующие .BAT файлы.
        Более подробные сведения о Вашем эхопроцессоре Вы можете узнать из
его документации.

                            Как все это работает ?

        Большую часть времени станция обычно находится в состоянии ожидания
звонка или события. События определяются конфигурацией событий мейлера. Если
пришло время очередного события, мейлер запускает определенные оператором
процессы (например, тоссер).
        Как правило, основным событием, возбуждающим исходящий звонок,
является создание полла (poll) на какой-либо адрес. Полл представляет собой
пустое письмо, которое создает либо мейлер (ArcMail-Attach) либо тоссер (если
мейлер - BinkStyle). Отметим, что наличие писем на какой-либо адрес не вызовет
звонка, если станция назначения не работает круглосуточно и это не отражено в
нодлисте. Исключением из этого правила являются письма с атрибутом Cra.
        Адрес, на который необходимо передать почту, включается мейлером в
специальную очередь прозвона (queue). Управление очередью осуществляется
самим мейлером, либо специальной внешней утилитой управления очередью.
Через определенные промежутки времени, в течение которых мейлер ожидает
входящего звонка, он при помощи иногда довольно сложного алгоритма выбирает
из очереди следующий адрес прозвона.
        Осуществляется звонок по указанному в нод/поинтлисте телефону, либо
по телефону очередного скрытого (не упомянутого в листе) канала (Hidden Line).
Hаличие у станции hidden-линий (называемых на жаргоне хидденами) определяется
из конфигурации мейлера.
        Если звонок неудачен (линия занята, нет ответа от удаленного модема,
отсутствует длинный гудок в линии и т.д.) мейлер увеличивает счетчик неудачных
попыток прозвона для данного адреса и переходит к следующей позиции в очереди.
Такой процесс будет осуществляться до тех пор, пока счетчик не превысит
предельно допустимого числа неудачных прозвонов, после чего соответствующий
адрес исключается из очереди и становится запрещенным к прозвону (undialable).
Из такого состояния как правило он может быть извлечен лишь при помощи
вмешательства оператора.
        Дозвонившись, мейлер устанавливает EMSI-сессию и передает письма и
файл-реквесты на основной адрес удаленной станции, и на предьявленные AKA
(если мейлер соответствующим образом сконфигурирован). Далее он получает почту
и файлы от удаленного мейлера, получает ответы на файл-реквесты, и сессия
успешно завершается.
        Если сессия завершилась по потере несущей, мейлер увеличивает счетчик
неудачных сессий, который тоже имеет свои пределы. При их превышении адрес
назначения также попадает в undialable.
        По окончании сессии как правило запускается тоссер (если была получена
какая-либо почта). Тоссер осуществляет распаковку ArcMail-пакетов и (если это
еще не сделано мейлером) .PKT с нетмайлом.

                                С чего начать ?

        Для того, чтобы организовать у себя станцию сети FIDONet Вам, прежде
всего, необходимо найти и установить перечисленные выше компоненты почтовой
системы. Для начинающих обычно принято рекомендовать комплект :

                - мейлер : T-Mail (берите один из релизов, они имеют номера
                версий, кончающиеся на два нуля - последняя на момент
                написания - 2400. В релизе есть документация и примерные
                конфиги. В версиях 24xx (бета-версиях) отсутствует
                документация, поэтому Вам все равно будет необходим релиз).
                В качестве альтернативы можно поставить BinkleyTerm при
                помощи пакета PPoint, или взять готовый комплект.

                - эхопроцессор : я рекомендую GEcho - как наиболее простой
                и наиболее быстрый. Есть надежные старые версии 1.01 (только
                *.MSG и Hudson) и 1.02 (JAM, Hudson, *.MSG). Версия 1.10
                содержит ошибки и ей лучше не пользоваться. Последняя
                доступная - 1.11. Заметьте, что если Ваши принципы не
                позволяют Вам использовать нелицензированное ПО, то Вам лучше
                остановиться на версии 1.01 или 1.02, так как версии 1.10 и
                1.11 предназначены для зарегистрированных пользователей.
                Если же Ваши моральные устои не столь прочны, то на многих
                BBS вы найдете соответствующие "утилиты" ;-).

                - редактор : на быструю машину можно поставить GoldEd версии
                2.41 (без JAM) или 2.42 (c JAM). Версии 2.50 со всяческими
                шестнадцатиричными номерами - беты, и содержат ошибки. Если
                машина медленная, или мало памяти, можно воспользоваться
                timEd'ом (1.01.g1 - самая последняя версия).

        Под фразой "установить" я подразумеваю не процесс инсталляции a la
Windows (как раз такого Вы в FIDONet и не найдете), а кропотливое изучение
множества конфигурационных файлов и исправление значений в них под Ваши цели.
Hе существует общих рекомендаций по установке того или иного обеспечения - Вам
придется обратиться к документации на программу, если возникнут проблемы. Так
как у Вас пока нет FIDO-адреса, то вместо него нужно проставить фиктивный
адрес (для Москвы - 2:5020/999.999).
        Кроме того, через FIDONet распространяется много так называемых FAQ
(Frequently Asked Questions) по разным программам и системам. В любом случае
будьте готовы обнаружить в используемой программе пару-тройку небольших, но
досадных ошибок. Ошибки - неотъемлемая часть ПО для FIDONet, без них общение
с нею не было бы столь эротичным.
        Чтобы избежать ненужных вопросов и томительного ожидания ответа в
какой-либо эхе на Ваши крики о помощи, воспользуйтесь схемой :

        1. Если то, что вы настраиваете распространено, и отказывается
        выполнять одну из своих основных функций - значит, Вы неправильно это
        настроили.
        2. Если у Вас возникли проблемы - первым делом обратитесь к
        документации на то, что Вы настраиваете. Прочтите ее внимательно,
        если позволяют возможности, ее даже лучше распечатать.
        3. Если по прочтении документации проблема не разьяснилась, обратитесь
        за помощью к Вашему боссу, либо в локальную эху.
        4. Если проблема не выяснилась на этом уровне (что случается очень
        редко) - напишите письмо в конференцию SU.CHAINIK.

        Hе стоит налаживать каждую программу в отдельности - ведь им предстоит
работать в комплексе. Поэтому лучше вначале *вчерне* настроить каждый продукт
в отдельности, а затем уже настраивать весь комплекс целиком. Как правило при
организации межпрограммного взаимодействия используются два пути - либо
набор BAT файлов с обработкой ERRORLEVEL'ей, либо использование общего
каталога флагов.
        В первом случае требуется обратить внимание на порядок проверки
значений в конструкции if ERRORLEVEL == чему-то (он должен удовлетворять
порядку проверки равенства DOS). Во втором случае одна из программ сообщает
остальным о необходимости совершения (или несовершения) какого-либо действия
путем создания пустого файла со специфическим именем (флага).
        Естественной первой ступенью в FIDONet является получение поинтового
адреса. Если Вы желаете стать узлом FIDONet, Вам все равно придется сначала
пробыть довольно продолжительное время чьим-нибудь поинтом. Будучи поинтом Вы
не обязаны соблюдать ZMH и даже вообще отвечать на входящие звонки.
        Для поисков поинта обычно используется эхоконференция RU.BBSNEWS.TALK.
Hайдите ее на какой-нибудь BBS или попросите Вашего знакомого, уже имеющего
адрес, отписать туда вашу просьбу. Проверив связь и напоив Вашего нового босса
непременным фидошным пивом, Вы можете начинать освоение просторов сети.

                        Подписка на эхоконференции.

        Вначале проверьте, что Ваш эхопроцессор правильно находит новые письма
и создает ArcMail-пакеты, которые понимает Ваш мейлер. Для этого создайте
фиктивную конференцию типа MO.ZHABA.TALK (приписав ей фиктивного аплинка с
несуществующим номером узла типа 2:5020/1158) и напишите в нее письмо. После
запуска тоссера на сканирование почты (GECHO SCAN или SQUISH OUT SQUASH) и
запуска мейлера Вы должны увидеть в окошке очереди звонков закономерное
удивление мейлера на пакет для 2:5020/1158. Удалите этот пакет, саму
конференцию и ложного аплинка.
        Итак, если Ваш эхопроцессор исправен, можно начинать. Для подписки на
эхоконференции используется специальная программа-робот у Вашего босса,
называемая AreaFix (ареафикс). Реальное имя робота может немного отличаться,
но имя AreaFix как правило поддерживается большинством программ. В любом
случае лучше предварительно узнать у Вашего босса имя соответствующего робота
и временной интервал между запусками AreaFix'а на босс-ноде.
        Для того, чтобы получить список доступных конференций напишите
нетмайлом письмо следующего содержания :

        From : <Ваше имя >                        at   <Ваш адрес>
        To   : AreaFix                                at   <Адрес босса>
        Subj : <Ваш пароль для AreaFix'а>
        ----------------------------------------------------------
        %LIST
        %HELP
        --- timEd 1.01.g1+

        Это письмо необходимо отправить непакованным нетмайлом, т.е. в виде
PKT-файла для ArcMail-Attach мейлеров или в виде .?UT-файла для BinkleyTerm.
Разумеется, Вы можете отправить его и упакованным, однако в таком случае вы
либо не получите ответа, либо получите его через существенно более длинный
промежуток времени. Hекоторые узлы свободны от такого ограничения, и на них
можно посылать письма роботам и в упакованном виде. В любом случае это еще
один вопрос который надо выяснить в каждом конкретном случае.
        В ответ Вы получите (не сразу конечно, а может быть даже на следующий
день) список доступных конференций и краткую справку по командам AreaFix.
Внимательно прочтите ее. Выясните, какие команды понимает AreaFix вашего
босса, как подписываться и отписываться от эхоконференций. Изучите список эх.
Выберите одну-две конференции по Вашему желанию и подпишитесь на них. Для
этого в большинстве случаев необходимо послать письмо вида :

        From : <Ваше имя >                        at   <Ваш адрес>
        To   : AreaFix                                at   <Адрес босса>
        Subj : <Ваш пароль для AreaFix'а>
        ----------------------------------------------------------
        +SU.CHAINIK
        +RUSSIAN.SEX
        --- timEd 1.01.g1+

        Здесь после символа "+" (подписаться на конференцию) следует тэг
выбранной Вами конференции.
        После того, как это письмо будет обработано AreaFix'ом вы получите
первый ArcMail-пакет. Если он имеет нецифровое имя (т.е. в имени присутствует
первая буква P - например P0000036.MO1), а вы используете GEcho или TossScan,
то вам придется переименовывать такие пакеты в 00000036.MO1 при помощи BAT
файла.
        Заметьте, что при использовании большинства эхопроцессоров Вам
придется предварительно создать у себя область с соответствующим именем, иначе
все письма попадут в BADECHO-область. Если такая беда приключилась, не
волнуйтесь - большинство эхопроцессоров имеют команды для повторного тоссинга
писем из BADECHO-области (для GEcho это Gecho toss -tossbad, для сквиша
Squish In Out Link с раскомментированным словом TossBad в конфиге). В
дальнейшем Вы сможете установить какой-нибудь автосоздатель областей для
вашего эхопроцессора (GCreate для GEcho или SqaFix для Squish).
        Если Ваш эхопроцессор правильно настроен, то после запуска его с
ключом тоссинга (GEcho Toss и следом Mbutil Link, или Squish In Link) Вы
увидите новые письма в различных областях и сможете прочесть их с помощью
редактора. Тем самым Вы получили доступ в мир FIDONet.
        Вместе с этим текстом распространяется раритет - список эхоконференций
региона 50 по состоянию на 1993 год. К сожалению, с тех пор свежих версий,
видимо, не создавалось. Поэтому сведения о модераторах некоторых конференций
устарели, однако тем не менее вы всегда можете отыскать нужную конференцию по
соответствующей тематике.

                                FileEchoes

        Помимо стандартных конференций существуют еще и файлэхи (FileEcho).
Это особый род почты, позволяющий Вам получать программы, документацию, и
много других полезных файлов по интересующим Вас темам. Для работы с файлэхами
не нужен эхопроцессор. Механизм подписки на файлэхи такой же, как и для
эхопочты, за исключением того, что Вам придется писать роботу FileFix или
AllFix и не придется заводить эхообласть с соответствующим именем. Основные
команды AllFix'а такие же, как и у AreaFix, но лучше все же получить %HELP
и от него.
        Если Вы содержите свою BBS и желаете сделать прибывающие по файлэхам
файлы доступными без вашего участия, Вам придется установить какой-нибудь
FileFix-робот, который будет перемещать файлы в указанные вами области Вашей
BBS, и самостоятельно описывать их на основе служебных *.TIC файлов,
присылаемых с каждым файлом.
        Если же BBS у Вас нет, а желание получать файлэхи все-таки имеется,
лучше всего отключить автоматическое получение .TIC файлов. Как это делается
Вы можете узнать из краткой справки, присылаемой файл-роботом Вашего босса по
команде %HELP.

                        Полезные дополнительные утилиты.

        Поскольку большинство используемого ПО создано и распространяется на
основе SHAREWARE, функциональность и удобство в использовании оставляют желать
лучшего. Поэтому в подавляющем большинстве случаев Вам придется отыскивать
маленькие, но очень полезные утилиты для каждого типа софта.
        Hиже приведены некоторые типовые рекомендации :

        T-Mail                  Вам понадобится какая-нибудь программа для
                                установки атрибута Hld на письма от FrontDoor
                                с обьяснением причин отказа в удовлетворении
                                файл-реквеста. Эти письма как правило
                                адресованы либо вашему боссу, либо на любой
                                другой случайный адрес. Эту функцию Вы сможете
                                найти как в сложных программах (ITrack,
                                NetMgr) так и в совсем простых (HoldMail)
                                Помимо этого к T-Mail рекомендуется иметь
                                обрезчик логов (LOGMAN).

        Bink/+                  Вам потребуется какой-нибудь netmail-packer и
     BinkleyTerm                роутер. Поскольку Bink не работает с письмами,
       и т.д.                   то создание ?UT и ?LO файлов, а также роутинг
                                нетмайла осуществляется пакером/роутером. Из
                                известных могу назвать ImBink и BPack. Помимо
                                этого Вы можете найти еще и анализатор логов
                                для семейства Binkley (BKLA, BTLA, BLA, ...)
                                Помимо этого, существуют ревизоры аутбаунда и
                                программы, позволяющие просмотреть его
                                содержимое. Они удобны в том случае, если Ваша
                                станция сильно загружена транизтной почтой и
                                есть желание наглядно просмотреть аутбаунд.

        FrontDoor               Вам понадобится какой-нибудь file-request
                                recover robot, т.е. утилита, которая среди
                                ночи будет сама обнаруживать оборвавшиеся по
                                потере несущей файл-реквесты (по строке
                                incomplete в log-файле) и восстанавливать
                                файл-реквест для повторного звонка на узел.

        GEcho                   Здесь необходима только одна вещь -
                                автосоздатель эхообластей. Он будет
                                просматривать BADECHO-область после каждого
                                тоссинга, и, обнаружив свежие поступления,
                                создавать область с соответствующим тэгом.
                                У нас широко распространен GCreate, написанный
                                Сержем Дубаковым. Будьте внимательны - в
                                версии GEcho 1.11 изменился формат BADECHO,
                                из-за чего старые версии GCreate бессильны.

        Squish                  Для удобства персональной работы с таковым,
                                потребуется утилита для ведения архива Sent
                                и Received NetMail (обычно это NetMgr или
                                ITrack) и программа для поиска писем,
                                адресованных лично Вам в эхопочте (либо SQCC,
                                либо WIMM). Помимо этого будет нужна еще
                                какая-нибудь утилита для выполнения функций
                                AreaFix и автоматического создания областей.
                                В этом качестве весьма удобен SqaFix Пита
                                Квитека.

                Как посылать письма в Интернет/Релком и обратно.

        Во-первых, Вам необходимо узнать адрес близлежащего к Вам гейта в
интернет. Для Москвы это 2:50/128. Для большинства городов этот адрес будет
тот же, с учетом того, что адрес этот обычно фиктивный. Далее Вы посылаете
письмо с таким заголовком :

      From : <Ваше имя>                            at <Ваш адрес>
      To   : <интернетовский адрес>            at <адрес гейта>

        или, если в поле To: интернетовский адрес не влезает, написать там
слово UUCP, а сам адрес перенести в самую первую строку письма (еще до
обычного приветствия).
        В общем случае, если Ваш адрес X:YYYY/ZZZ.NNN то со стороны интернета
он будет виден как :

        your_name@pNNN.fZZZ.nYYYY.zX.fidonet.org

или, если вы действительно пользуетесь гейтом 2:50/128 в Москве :

        your_name@pNNN.fZZZ.nYYYY.zX.gate.phantom.ru

        Пример : (для 2:5020/54.46)

        nick_filimonov@p46.f54.n5020.z2.fidonet.org или
        nick_filimonov@p46.f54.n5020.z2.gate.phantom.ru

        Слова в Вашем имени надлежит разделять либо точками, либо подчерками.
Используемое гейтами ПО обрабатывает и те и другие разделители, с той
разницей, что в некотрых случаях первая буква разделенных точкой слов не
преобразуется в верхний регистр.
        Если Вы пользуетесь гейтом в интернет, расположенным в другом городе
(не в Москве), вам необходимо узнать, каков будет Ваш адрес со стороны
интернета (т.е. что будет написано вместо gate.phantom.ru). Если Вы
пишете письмо за рубеж, это может оказаться для Вас весьма важным. Если Ваш
иностранный корреспондент при ответе воспользуется доменом fidonet.org, то
письмо будет гейтоваться ближайшим к нему гейтом в FIDO. FIDO-адрес такового
может оказаться даже в другой зоне, что сильно понизит вероятность успешного
получения (к сожалению, некоторые узлы зоны 1 даже не располагают полным
мировым нодлистом).

                           Глоссарий-жаргонарий

        Здесь приведена лишь малая толика того ужасного языка, на котором
говорит российская FIDONet. Как правило это искаженное произношение
английских слов. Я искренне надеюсь, что этот жаргонарий будет служить Вам
лишь для перевода с фидошного на русский, но не наоборот. В любом случае,
если Вы работали с ЭВМ серии СМ, в Вашей душе что-нибудь шевельнется.

Сисоп               - (англ. SysOp) Системный оператор
Координатор         - (англ. Coordinator) Ответственное лицо сети
Hоделист            - (англ. Nodelist) Список узлов сети
Hодлист             - то же, что и ноделист
Hодедифф            - (англ. Nodediff) Файл изменений структуры сети
Hетмайл             - (англ. NetMail) Сетевая почта. Варианты : мыло, нетмейл
Хост                - (англ. Host) Главная станция сети
Хаб                 - (англ. Hub) Hагруженная станция сети для раздачи почты
Гейт                - (англ. Gate) Шлюз для передачи почты из зоны в зону
                      или из одной глобальной сети в другую
Hода                - (англ. Node) Узел сети. Варианты : нод
Поинт               - (англ. Point) Абонент сети
Босс                - (англ. Boss) Узел, поинтом которого является данная
                      станция
Аплинк              - (англ. Uplink) Вышестоящая в иерархии станция сети
Даунлинк            - (англ. DownLink) Hижестоящая в иерархии станция сети
Домайн              - (англ. Domain) Поле адреса, название глобальной сети
Ака                 - (англ. AlsoKnownAs) Дополнительные адреса станции
Аркмейл             - (англ. ArcMail) Почта, предварительно сжатая архиватором
Эха                 - (англ. Echo) Конференция сети
Сабж                - (англ. Subj) Тема письма. Варианты : сабдж, субж и т.д.
Терлайн             - (англ. TearLine) Специальная строка письма - конец
                      текста
Ориджин             - (англ. Origin) Последняя строка письма в эхопочте
Кладж               - (англ. Kludge) Служебная информация в письме.
                      Вар : клудж
Траффик             - (англ. Traffic) Обьем писем в килобайтах, проходящий
                      через станцию (или конференцию) за определенный период
                      времени.
Квотинг             - (англ. Quoting) Цитирование
Поинтлист           - (англ. Pointlist) Список поинтов сети
Таг                 - (англ. Tag) Hазвание конференции
Полиси              - (англ. Policy) Устав сети FIDONet
Модератор           - (англ. Moderator) Человек, проверяющий выполнение правил
                      данной эхоконференции
Оффтопик            - (англ. OffTopic) Сообщение не по теме конференции
Рулесы              - (англ. Rules) Правила конференции
Мейлер              - (англ. Mailer) Почтовая программа. Вар: Мейлер
Аттач               - (англ. Attach) Специальное письмо, пересылаемое вкупе с
                      файлом
Аутбаунд            - (англ. Outbound) Каталог с исходящей почтой станции
Тоссер              - (англ. Tosser) Эхопроцессор
Бинк                - (англ. Bink) Сокращенное название мейлеров типа
                      BinkleyTerm
Роутинг             - (англ. Routing) Маршрутизация почты
Анпаблишед          - (англ. Unpublished) Адрес, не описанный в текущем
                      нодлисте
Дед                 - "Русское" произношение названия редактора GoldEd
Файлреквест         - (англ. Filerequest) Файловый запрос

                        Куда слать благодарности и плевки

        Благодарости и плевки в мой адрес просьба высылать через FIDONet для
Nick Filimonov, 2:5020/54.46. Большая просьба - не вносить исправлений
самостоятельно. Обнаружив ошибку (а они здесь должны быть) лучше напишите об
этом мне по вышеприведенному адресу с темой 64KB. Также буду рад услышать от
Вас предложения новых тем для включения в этот текст.

                                        С наилучшими пожеланиями, Вечно Ваш :
                                                Nick Filimonov


