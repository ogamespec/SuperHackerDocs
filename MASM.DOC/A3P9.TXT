
                                     - 47 -
                                         
               
               
               
               
               
                            9. Глобальные объявления.

               
               Директивы  глобального объявления позволяют определять
         метки,  переменные  и  абсолютные  имена,  доступ  к которым
         возможен из всех сегментов программы независимо от того, как
         они ассемблировались.
               В  языке  ассемблера  имеются  2 директивы глобального
         объявления: PUBLIC и EXTRN, которые дополняют друг друга.
               
               Директива PUBLIC имеет следующий формат:
               
               PUBLIC имя,...
               
               Директива PUBLIC делает указанные в списке переменные,
         метки или абсолютные имена,  общими,  т.е.  доступными  всем
         модулям   программы.   Каждый  элемент  списка  должен  быть
         определен в текущем исходном файле. Абсолютные  имена,  если
         они указаны, должны представлять одно- или двухбайтные целые
         числа или строковые значения.
               Обычно  до копирования в объектный файл строчные буквы
         в общих именах преобразуются  в  заглавные.  Для  сохранения
         первоначального  написания имен с учетом регистра могут быть
         использованы опции /ML и /MX MASM.
               Директивой   PUBLIC   должны   быть   описаны   имена,
         используемые  при  работе  с  SYMDEB  в  режиме   символьной
         отладки.
               
               
               Директива EXTRN имеет следующий формат:
               
               EXTRN имя:тип,...
               
               Директива  EXTRN  определяет  внешние  по  отношению к
         текущему  сегменту  объекты  с  указанием  их  типа. Внешним
         объектом может быть переменная, метка или имя, объявленные в
         другом  модуле программы директивой PUBLIC. Тип, указанный в
         директиве EXTRN, должен соответствовать действительныму типу
         объекта  и  может  кодироваться  одним из следующих ключевых
         слов: BYTE, WORD, DWORD, QWORD, TBYTE, NEAR,  FAR  или  ABS.
         Тип  ABS  используется  при  описании  имен,  представляющих
         абсолютные значения. Остальные описатели типа имеют  обычный
         смысл.
               Несмотря  на то, что действительные адреса объектов до
         обработки  объектного  файла  программой  LINK   неизвестны,
         ассемблер,  основываясь на  местонахождении директивы EXTRN,
         может делать предположения  о  том,  какой  сегмент  следует

                                     - 48 -
         
         
         использовать  для адресации внешнего объекта. Если директива
         EXTRN находится внутри какого-либо сегмента, считается,  что
         указанные  внешние  объекты  связаны  с  этим  сегментом,  и
         описывающие  их  директивы  PUBLIC  должны   содержаться   в
         сегменте  с  тем  же  именем  и  теми  же  атрибутами.  Если
         директива EXTRN не входит ни в один сегмент, предположений о
         содержащем   внешний   объект   сегменте   не   делается,  и
         соответствующая директива PUBLIC может располагаться в любом
         сегменте.  В обоих случаях для подавления адресации внешнего
         объекта   относительно    умалчиваемого    сегмента    может
         использоваться оператор переключения сегмента (:).
