
     
     

                П А К Е Т   Р А З Р А Б О Т Ч И К А
      
                         ГРАФИЧЕСКИХ ПРОГРАММ
      
                                P C X
                         ********************
      
      
                        PCX Programmer's Toolkit
     
     
     
      
                             ПРИЛОЖЕНИЕ  А
                             =============
     
     
             ПЕРЕД ТЕМ КАК СВЯЗАТЬСЯ С КОМПАНИЕЙ GENUS
             -----------------------------------------
                                                                   
      
      Мы  придаем большое занчение обслуживанию наших клиентов. Если
 у Вас возник вопрос о наших продуктах, или Вам просто требуется по-
 мощь, мы ХОТИМ помочь Вам. Возможные способы того, как связаться  с
 нашей фирмой, изложены во Введении.
      
      Мы только хотим, чтобы Вы честно попытались найти решение сна-
 чала  в  самом  руководстве, или же попробовали несколько различных
 методов решения проблемы.
      
      В свете всего этого, мы подготовили специальное  приложение  к
 руководству,  посвященное  вопросам  помощи. В нем рассказывается о
 том, что Вам необходимо  сделать, перед тем как связаться с фирмой.
 В приложении имеется также контрольный список  информации,  которая
 необходима  нам,  если  Вы просите о помощи. Помимо этого, здесь Вы
 найдете ответы на наиболее часто встречающиеся ответы. Если Вы точ-
 но выполните все рекомендации, это поможет нам помочь Вам. Спасибо!
      
      Отдел сбыта
      ----------------------------------
      
      Обратитесь в отдел сбыта, если у Вас возник вопрос  по  поводу
 Ваашего  заказа, или же если Вы хотите сделать дополнительные зака-
 зы, или хотите получить информацию о продуктах и услугах фирмы.
      
      Отдел технического обслуживания
      ------------------------------------
                                       
      Обратитесь в отдел технического обслуживания, если Вам необхо-
 дима помощь по установке нашего продукта, или же Вам нужна дополни-
 тельная информация, касающаяся продуктов фирмы. Вы также можете по-
 лучить ответ на вопрос, касающийся технических аспектов работы апа-
 ратуры, программ и периферийных устройств семьи IBM.
      
      
      Контрольный список
      ----------------------------------
      
      Чтобы мы могли лучше помочь Вам, нам необходима некоторая  ин-
 формация.  Пожалуйста,  сообщите имя - или имя компании - владельца
 программного продукта Genus. Нам также знать и о конфигурации Вашей
 вычислительной системы. Мы подготовили контрольный список,  который
 Вам следует внимательно изучить, перед тем как связаться с компани-
 ей Genus:
      
      - Внимательно прочитайте данный раздел.
      
      - Выясните версию продукта и его серийный номер.
      
      - Узнайте, за кем зарегистрировапн продукт.
      
      - Уточните тип Вашего компьютера, адаптера дисплея и монитора.
      
      - Проверьте, какую версию DOS Вы используете.
      
      - Если Вы используете компилятор, проверьте его имя и версию.
      
      - Составьте список резидентных программ.
      
      - Ясно сформулируйте свою проблему.
      
      
      
      Наиболее часто встречающиеся
      проблемы и ошибки
      ---------------------------------------
      
      
      Функция pcxFileDisplay не может найти изображение
      в подкаталоге
      
      Помните,  что  в С используется символ \ (наклонная черта влево)
 для обозначения спецсимвола escape. Поэтому  для  обозначения  имен
 путей доступа требуется двойной символ \\. Пример:
      
      pcximage[] = "C:\\IMAGES\\MYIMAGE.PCX";
      
      Если это не решит проблемы, учтите, что функции пакета автома-
 тически НЕ ДОБАВЛЯЮТ расширение .PCC или .PCX.
      
      
      Что такое палитра?
      
      Она очень похожа на настоящую палитру художника. Палитра имеет
 место  только  для определенного набора цветов, несмотря на то, что
 художник (то есть аппаратура) имеет значительно большее  количество
 цветов, чем может уместиться на палитре за один раз.
      
      Таким  образом,  адаптер EGA может показать из 64 цветов любые
 16, а VGA - до 256 цветов из 256 тысяч. Определенный набор  16  или
 256 цветов и называется палитрой. Поэтому, несмотря на то, что дан-
 ные  для  изображения могут показываться правильно, Вам все-же при-
 дется выбрать нужные цвета посредством установки палитры дисплея.
      
      
      Функция pcxShow не показывает изображение или не может
      определить тип
      
      В заголовке изображения имеется недостаточно данных для  того,
 чтобы утилита pcxShow могла автоматически определить правильный ре-
 жим  дисплея. Если Вы знаете тип изображения, используйте опцию за-
 мены  режима. У Вас может не получиться  выполнить программу pcxFix
 с изображением для установки режима по умолчанию. В противном  слу-
 чае  используйте  утилиту  pcxHdr чтобы определить оригинальный тип
 изображения.
      
      
      Программа Paintbrush загружает мое изображение, но  все  цвета
      неправильны
      
      Если  Вы  используете 256-цветный режим, Вы работает со старой
 версией Paintbrush. Вам следует заменить ее.
      
      
      Я не могу использовать в пакете мою графическую библиотеку.
      
      Помните, что пакет не требует, чтобы Вы  использовали  функцию
 pcxSetMode.  Множество других графических библиотек связывают прог-
 рамму инициализации со своей функцией "установки режима".  Вызовите
 функцию pcxSetDisplay для конфигурации пакета, и вызовите собствен-
 ную функцию "установки режима" графической библиотеки - пакет узна-
 ет  изменение режима. Посмотрите также раздел "Использование других
 графических библиотек".
      
      
      Могу ли я показать изображение в любом разрешении?
      
      Да, можете. Но в большинстве случаев  изображение  может  быть
 показано только в оригинальном режиме дисплея. Это означает, что Вы
 не  можете показывать 16-цветное изображение EGA в 2- или 4-цветном
 режиме CGA. Однако, 2-цветные изображения могут, как правило,  быть
 показаны в другом 2-цветном или 16-цветном  режиме  (CGA,  EGA  или
 VGA).  Также,  16-цветные  изображения  могут быть показаны в любом
 16-цветном режиме, а 256-цветные изображения - в любом  256-цветном
 режиме.
      
      
      Почему я иногда получаю мусор при захвате экрана "Геркулеса" ?
      
      На "Геркулесе", утилита pcxGrab не может определить, находится
 ли дисплей в текстовом или графическом режиме. Поэтому, если Вы по-
 пытаетесь  захватить  текстовой экран вместо графического экрана (а
 утилита pcxGrab будет пытаться это сделать), то Вы получите  мусор.
 Чтобы избежать этого, выполняйте захват только графических экранов.
      
      
      Я не могу показать изображение в точных координатах (x,y)
      
      Вспомните  об ограничении границ байт: в целях увеличения ско-
 рости пакет округляет координату до  ближайшей  границы  байт,  что
 иногда влияет на точное помещение изображения.
      
      Для   точного   помещения   изображения   используйте  функции
 pcxGetImage и pcxPutImage.
      
      
      Когда я пытаюсь показать изображение экран очищается или
      нарушаются цвета
      
      Это может произойти, если изображение имеет  неправильную  па-
 литру,  или  же если Вы выключили палитру. Используйте опцию утилит
 /C для включения нормальных установок палитры.
      
 
 
      При  использовании  пакета  я  получаю  сообщение  "UNRESOLVED
      EXTERRNALS"
      
      Вы  забываете  произвести  компоновку в библиотеке пакета, или
 забыли определить пакет как библиотеку  Quick  Library.  Прочитайте
 инструкции  по  компиляции и компоновке в разделе "Быстрое начало".
 Проверьте другие свои библиотеки и объектные файлы.
      
      
      При  выполнении  программы   я   получаю   сообщение   "MEMORY
      ALLOCATION ERROR" (Ошибка при размещении памяти), а потом
      система зависает
      
      Это  происходит,  когда  данные записываются вне определенного
 буфера. Удостоверьтесь, что размер буферов палитр достаточно  велик
 (2  байта  для  CGA, 17 - для EGA, 48 для 16-цветного VGA, 768 байт
 для 256-цветного VGA).
      
      Размеры буферов изображений должны быть  определены  столь  же
 большие,  как и размер, передаваемый программам буфера пакета. Убе-
 дитесь в том, что определенный размер  буфера  соответствует  тому,
 что Вы используете в вызове функции.
      
      Для  виртуальных  функций, функции pcxCreateVirtual нужно дать
 размеры изображения, А НЕ разрешение экрана. Например,  сканирован-
 ная страница требует разрешения 2550х3300, а не 640х480. Эта  функ-
 ция  позволит Вам  создавать  буфер, который будет слишком мал, так
 что убедитесь, что Вы проверили размеры изображения,  которые нахо-
 дятся в заголовке изображения. Используйте функцию pcxGetFileHeader
 для  получения  доступа  к  ширине  (X2-X1 +1) и глубине (Y2-Y1 +1)
 изображения.
      
      
      
      
      
                         ПРИЛОЖЕНИЕ  В
                         =============
      
                       КОНСТАНТЫ ПАКЕТА
                       ----------------
      
                          О Б З О Р
      
      
      Наличие предопределенных констант облегчает использование  па-
 кета.  Эти константы используются для установки типов дисплея, гра-
 фических режимов и кодов ошибок. В данном  разделе  описана  каждая
 константа,  ее  назначение, а также ее различия или варианты в под-
 держиваемых компиляторах.
      
      
      ТИПЫ ДИСПЛЕЯ
      ---------------------------------------
      
      
      Для  пакета необходимо, чтобы Вы сообщали ему используемый тип
 дисплея для вызовов всех функций.  Это  осуществляется  посредством
 функции pcxSetDisplay, Заметьте, что в Бейсике символ подчеркивания
 недопустим  -  вместо  него  используется точка. Например, pcxCGA_4
 становится pcxCGA.4 и так далее. Определены следующие типы  дисплея
 (Максимальные  величины для ГОРИЗОНТАЛЬНОГО х ВЕРТИКАЛЬНОГО х ЦВЕТА
 даются в скобках):
      
      pcxMINDISP                0
      
      Это минимальная величина типа дисплея. Используйте ее для про-
 верки принадлежности к диапазону.
      
      pcxCGA_4                  0
      
      Это определяет CGA Режим 4H (320х200х4)
      
      pcxCGA_6                  1
      
      Это определяет CGA Режим 5H (640х200х2)
      
      pcxEGA_D                  2
      
      Это определяет EGA Режим DH (320х200х16)
      
      pcxEGA_E                  3
      
      Это определяет EGA Режим EH (640х200х16)
      
      pcxEGA_F                  4
      
      Это определяет EGA Режим FH (640х350х2)
      
      pcxEGA_10                 5
      
      Это определяет EGA Режим 10H (640х350х16)
      
      pcxVGA_11                 6
      
      Это определяет VGA Режим 11H (640х480х2)
      
      pcxVGA_12                 7
      
      Это определяет VGA Режим 12H (640х480х16)
      
      pcxVGA_13                 8
      
      Это определяет VGA Режим 13H (320х200х256)
      
      pcxHERC                   9
      
      Это определяет "Геркулес"    (720х348х2)
      
      pcxXGA_29                 10
      
      Это определяет Tseng Режим 29H (800х600х16)
      
      pcxXGA_2D                 11
      
      Это определяет Tseng Режим 2DH (640х350х256)
      
      pcxXGA_2E                 12
      
      Это определяет Tseng Режим 2EH (640х480х256)
      
      pcxXGA_30                 13
      
      Это определяет Tseng Режим 30H (800х600х256)
      
      pcxXGA_58                 14
      
      Это определяет Paradise Режим 58H (800х600х16)
      
      pcxXGA_59                 15
      
      Это определяет Paradise Режим 59H (800х600х2)
      
      pcxXGA_5E                 16
      
      Это определяет Paradise Режим 5EH (640х400х256)
      
      pcxXGA_5F                 17
      
      Это определяет Paradise Режим 5FH (640х480х256)
      
      pcxXGA_62                 18
      
      Это определяет Video Seven Режим 62H (800х600х16)
      
      pcxXGA_66                 19
      
      Это определяет Video Seven Режим 66H (640х400х256)
      
      pcxXGA_67                 20
      
      Это определяет Video Seven Режим 67H (640х480х256)
      
      pcxXGA_69                 21
      
      Это определяет Video Seven Режим 69H (800х600х256)
      
      pcxMAXDISP                21
      
      Это максимальная величина типа  дисплея.  Используйте  ее  для
 проверки принадлежности к диапазону.
      
      
      
      РЕЖИМЫ
      ---------------------------------------
      
      
      В пакете определены два режима - текстовой и графический. Пом-
 ните, что устанавливать режим при помощи функций пакета нет необхо-
 димости  - прекрасно подойдет и любой способ BIOS. Но для установки
 подходящего режима для любого типа дисплея в пакете  самым  простым
 из  возможных  методов,  просто используйте следующие определения с
 функцией pcxSetMode:
      
      pcxTEXT                    0
      
      Это устанавливает дисплей в обычный текстовой режим DOS.
      
      pcxGRAPHICS                1
      
      Устанавливает дисплей в правильный графический  режим  для
 установленного в настоящее время типа дисплея. Это гарантирует пра-
 вильность режима, а также устраняет необходимость изменять дополни-
 тельно код, каждый раз, когда меняется тип дисплея. Кроме того, но-
 мера режимов не нужно запоминать.
      
      
      
      КОДЫ ВОЗВРАТА
      ---------------------------------------
      
      
      Каждая  функция пакета возвращает код ошибки, если встречается
 проблема. Все коды ошибок отрицательны - их нельзя спутать с други-
 ми величинами возврата.
      
      ПРИМЕЧАНИЕ:  Вследствие ограничения длины имени в Clipper
                   до 10 символов, некоторые коды возврата
                   сокращены - эквивалентные определения
                   содержатся в файле PCXLIB.PRG.
      
      Ниже приводятся коды возврата, имеющиеся в пакете:
      
      pcxSUCCESS                 0
      
      Функция была выполнена успешно.
      
      pcxERR_OPEN               -1
      
      Ошибка произошла при попытке открытия файла. Это  могло  прои-
 зойти,  потому  что файл не был найден, или файл не может быть соз-
 дан, так как на диске нет свободного места  или  вследствие  защиты
 диска от записи.
      
      pcxERR_BUFSMALL           -2
      
      Изображение  слишком велико для данного буфера. Сделайте буфер
 больше, или убедитесь в том, что пакету был передан правильный раз-
 мер буфера.
      
      pcxERR_READ               -3
      
      Ошибка  произошла при чтении из файла. Файл может быть повреж-
 ден, или  же предварительно был достигнут конец файла.
      
      pcxERR_WRITE              -4
      
      На диске нет свободного места, или произошла общая ошибка  за-
 писи  диска.  Для гибкого диска: убедитесь, что диск на месте и за-
 щелка дисковода закрыта.
      
      pcxERR_NOTPCX             -5
      
      Запрошенный буфер или файл  не  является  файлом  или  буфером
 изображений PCX. Проверьте имя файла или указатель буфера.
      
      pcxERR_BADDISP            -6
      
      Дисплей  не  был установлен посредством функции pcxSetDisplay,
 или запрошенный тип дисплея оказался неправильным или не входящим в
 диапазон. Проверье, чтобы дисплей был установлен до того, как  про-
 изводятсмя  любые  вызовы  функций пакета. Также проверьте правиль-
 ность типа дисплея.
      
      pcxERR_BADMODE            -7
      
      Режим дисплея неверен  для  типа  изображения,  либо  функцией
 pcxSetMode был запрошен неверный режим. Проверьте тип изображения и
 режим дисплея. Убедитесь в том, что имеется подходящая аппаратура.
      
      pcxERR_BADPAGE            -8
      
      Запрошенная  страница  дисплея нен поддерживается для текущего
 типа дисплея. Обратитесь к функции  pcxSetPage  за  полным  списком
 поддерживаемых  режимов  дисплея  для  каждого  типа дисплея. Также
 прроверьте переменную страницы, используемую в вызове функции.
      
      pcxERR_BADPAL             -9
      
      Указанная палитра не соответствует  ожидаемому  формату.  Про-
 верьте буфер палитры.
      
      pcxERR_NOPAL              -10
      
      Все  256-цветные  изображения  не  имеют  палитр дисплея, если
 только они не созданы с помощью утилиты pcxGrab.  Либо  произведите
 захват  изображения,  либо  добавьте  палитру  при  помощи  функции
 pcxSetFilePalette.
      
      pcxERR_NOPALGRAB          -11
      
      Эта ошибка происходит, когда функция pcxEndPaletteGrab вызыва-
 ется перед функцией pcxBeginPaletteGrab. Палитра еще не была захва-
 чена.
      
      pcxERR_NOTPCXLIB          -12
      
      Определенная  библиотека  не  является  созданной  библиотекой
 pcxLib.  Проверьте правильность имени библиотеки, включая путь дос-
 тупа (префикс).
      
      pcxERR_NOSYNC             -13
      
      Во время поиска в библиотеке изображений программа поиска  по-
 теряла синхронизацию с местонахождениями изображений. Это серьезная
 ошибка - при возможности заново создайте библиотеку.
      
      pcxERR_NOTINLIB           -14
      
      Во время поиска в библиотеке не было найдено запрошенное изоб-
 ражение.  Проверьте правильность имени изображения (помните, имя не
 должно иметь префикс), а также проверьте, действительно ли  изобра-
 жение находится в библиотеке.
      
      pcxERR_CLIPARM            -15
      
      Функции  clipper  пакета бал передан неверный параметр или ряд
 параметров.
      
      pcxERR_BADPRINT           -16
      
      При вызове функции пакета был указан  неверный  тип  принтера.
 Проверьте  правильность определения, убедитесь, что переменная была
 инициализирована.  Это   происходит   при   использовании   функции
 pcxSetPrinter.
      
      pcxERR_BADPORT            -17
      
      Неправильно  определен  порт.  Он должен быть pcxLPT1, pcxLPT2
 или pcxLPT3.
      
      pcxERR_PRINTER            -18
      
      Ошибка произошла при печати изображения. Она может быть вызва-
 на тайм-аутом печати, ошибкой ввода/вывода или отсутствием бумаги в
 печатающем устройстве. Проверьте принтер и попробуйте заново.
      
      pcxERR_NOTBW              -19
      
      Функции пакета могут печатать только  черно-белые  (один  бит,
 одна  плоскость)  изображения. Выберите правильное изображение, или
 используйте для печати изображения другую  программу,  например  PC
 Paintbrush.
      
      pcxERR_ESCAPE             -20
      
      При  печатании изображения была нажата клавиша ESCAPE. Это со-
 ответствует экстренному прерыванию печати.
      
      pcxERR_NOEMM              -21
      
      В системе нет доступной расширенной памяти. Эта ошибка  проис-
 ходит  при  попытке  создать  виртуальный  буфер при помощи функции
 pcxCreateVirtual, с vtype = pcxEMM. Проверьте  наличие  расширенной
 памяти  (EMM)  при  помощи  функции pcxEMInstalled, или используйте
 обычную память (pcxCMM) вместо расширенной.
      
      pcxERR_EMMFAIL             -22
      
      Администратор расширенной памяти (EMM) не смог выполнить  зап-
 рос пакета. Это не должно происходить, если EMM доступна, но ошибка
 может  случиться, если другие устройства также используют расширен-
 ную память.
      
      pcxERR_EMMNOMEM            -23
      
      Для запроса недостаточно расширенной памяти  EMM.  Эта  ошибка
 может произойти при попытке создать слишком большой виртуальный бу-
 фер, или когда вся расширенная память уже  используется.  Либо  ис-
 пользуйте меньший буфер, либо уничтожьте неиспользуемый виртуальный
 буфер при помощи функции pcxDestroyVirtual.
      
      pcxERR_BADMEMTYPE         -24
      
      Функции пакета был передан неправильный тип виртуальной  памя-
 ти. Проверьте, чтобы тип памяти был либо pcxCMM, либо pcxEMM.
      
      pcxERR_CMMFAIL            -25
      
      Администратор  (программа управления) обычной памятью CMM (как
 правило, это DOS) не смог успешно выполнить запрос пакета.  Возмож-
 но, не хватает свободного места в памяти, или память повреждена.
      
      pcxERR_CMMNOMEM           -26
      
      Для  запроса недостаточно обычной памяти СMM. Эта ошибка может
 произойти при попытке создать слишком  большой  виртуальный  буфер,
 или когда вся память уже используется. Либо используйте меньший бу-
 фер,  либо  уничтожьте  неиспользуемый виртуальный буфер при помощи
 функции pcxDestroyVirtual.
      
      pcxERR_NOTIMPL            -900
      
      Эта ошибка не должна происходить, если же она произошла,  свя-
 житесь с компанией Genus. Запомните вызванную функцию и обстоятель-
 ства, при которых произошла эта ошибка.
      
      pcxERR_GENERAL            -999
      
      Это универсальный код ошибки. Он используется для неопределяе-
 мых или минимальных ошибок.
      
      
      
      ПАРАМЕТРЫ ПРИНТЕРА
      ---------------------------------------
      
      
      Пакет  поддерживает печать двухцветных изображений PCX. Вместе
 с функцией конфигурации печати pcxSetPrinter используются следующие
 определенные константы.
      
      Порты принтера
      ---------------------------------------
      
      pcxLPT1                    0
      
      Печать в порту принтера LPT 1.
      
      pcxLPT2                    1
      
      Печать в порту принтера LPT 2.
      
      pcxLPT3                    2
      
      Печать в порту принтера LPT 3.
      
      
      Типы принтера
      ---------------------------------------
      
      pcxMINPRINT                0
      
      Это минимальная величина типа  принтера.  Используйте  ее  для
 проверки принадлежности к диапазону.
      
      pcxLASER                   0
      
      Устройство печати - лазерный принтер HP LaserJet или совмести-
 мый с ним.
      
      pcxDOTMAT                  1
      
      Устройство  печати  - матричный принтер IBM или Epson или сов-
 местимый с ним.
         
      pcxMAXPRINT                1
      
      Это максимальная величина типа  принтера.  Используйте  ее для
 проверки принадлежности к диапазону.
      
      
      Режимы принтера
      ---------------------------------------
      
      pcxDRAFT                   0
      
      Черновая печать:  низкого качества, быстрая.
      
      pcxQUALITY                 1
      
      Качественная печать: высокого качества, медленная.
      
      
      Масштабы принтера
      ---------------------------------------
      
      pcxSCALE100                0
      
      Печать изображения с коэффициентом масштабирования 100% от на-
 чальных размеров (масштабирования нет).
      
      pcxSCALE75                 1
      
      Печать изображения с коэффициентом масштабирования 25%  от на-
 чальных размеров.
      
      pcxSCALE50                 2
      
      Печать изображения с коэффициентом масштабирования  50% от на-
 чальных размеров.
      
      pcxSCALE25                 3
      
      Печать изображения с коэффициентом масштабирования  75% от на-
 чальных размеров.
      
      pcxSCALE200                4
      
      Печать изображения с коэффициентом масштабирования 200% от на-
 чальных размеров.
      
      
      
      Флаги принтера
      ---------------------------------------
                    
      
      pcxNORESET                  0
      
      Не переустанавливать принтер после печати.
      
      pcxRESET                    1
      
      Переустанавливать принтер после печати.
      
      pcxNOEJECT                  0
      
      Не переводить (выбрасывать) страницу после печати.
      
      pcxEJECT                    1
      
      Переводить (выбрасывать) страницу после печати.
      
      
      
      
      ПОИСК В БИБЛИОТЕКЕ
      ---------------------------------------
                        
      
      
      Поиск в библиотеке осуществляется по принципу последовательно-
 го поиска ("найти первый, найти  следующий").  При  вызове  функции
 pcxLibSearch используются следующие константы.
      
      
      pcxFIRST                      0
      
      Найти первый соответствующий элемент.
      
      pcxNEXT                       1
      
      Найти следующий  соответствующий элемент.
      
      
      
      ЛОГИЧЕСКИЕ ОПЕРАЦИИ
      ---------------------------------------
      
      
      Изображение  может быть логически объединено с имеющимися дан-
 ными экрана. Это  позволяет  убрать  квадратную  рамку,  окружающую
 изображение,  или  реализовать  с  небольшими изображениями технику
 мультипликации.  Используйте  это   с   функциями   pcxGetImage   и
 pcxPutImage.
      
      
      pcxSET                        0
      
      Устанавливает или заменяет точки на экране точками из буфера.
      
      pcxAND                        1
      
      Выполняет логическую операцию AND над данными точек и  данными
 экрана.
      
      pcxOR                         2
      
      Выполняет логическую операцию  OR над данными точек и  данными
 экрана. Используйте это для удаления BLACK (черного) из изображения.
      
      pcxXOR                        3
      
      Выполняет логическую операцию XOR над данными точек и  данными
 экрана.  Используйте  эту мультипликацию так, чтобы следующая логи-
 ческая операция XOR восстановила начальное изображение.
      
      
      
      ВИРТУАЛЬНЫЕ ЭКРАНЫ
      ---------------------------------------
      
      
      
      Пакет позволяет иметь два вида  виртуальных  экранов:  экраны,
 расположенные  в  обычной  памяти  (DOS), и экраны, расположенные в
 расширенной памяти (EMM).
      
      pcxEMM                         0
      
      Определяет виртуальный буфер в расширенной памяти.
      
      pcxCMM                         1
      
      Определяет виртуальный буфер в обычной памяти.
      
      
      
      
      КОНФИГУРАЦИИ "ГЕРКУЛЕСА"
      ---------------------------------------
      
      
      Монохромные графические адаптеры "Геркулес" требуют, чтобы они
 были инициализированы  ПЕРЕД  использованием  графического  режима.
 Функция pcxSetHerc использует следующие константы.
      
      pcxHERCdiag                    0
      
      Устанавливает  плату  Геркулеса в режим диагностирования. Этот
 режим главным образом используется для тестирования; он НЕ ПОЗВОЛЯ-
 ЕТ показывать графику.
      
      pcxHERChalf                    1
      
      Устанавливает плату Геркулеса в конфигурацию half. Это необхо-
 димо, если в системе имеется еще одна цветная  плата.  Концигурация
 half (половина) поддерживает  только одну графическую страницу.
      
      pcxHERCfull                    3
      
      Устанавливает  плату  Геркулеса  в конфигурацию full (полная).
 Эта конфигурация поддерживает две графические страницы.
      
      
      
      ВИДЕО ИНФОРМАЦИЯ
      ---------------------------------------
      
      При помощи новой функции пакета pcxVideoInfo может быть  полу-
 чена  полная  видео  конфигурация  текущей системы. Приводимые ниже
 константы определяют различные конфигурации адаптера/монитора.
      
      Адаптеры
      ========
      
      viNONE                         0
      
      Адаптер/дисплей не найден. Это обычно происходит со второй па-
 рой адаптер/дисплей, когда в системе есть только один адаптер.
      
      viMDA                          1
      
      Означает, что был найден Монохромный адаптер дисплея (MDA).
      
      viCGA                          2
      
      Означает, что был найден Цветной графический адаптер (CGA).
      
      viEGA                          3
      
      Означает, что был найден Расширенный графический адаптер (EGA).
      
      viMCGA                         4
      
      Означает, что был  найден  Много-цветный  графический  адаптер
 (MCGA).
      
      viVGA                          5
      
      Означает, что был найден Видео графический адаптер   (VGA).
      
      viHGC                          80H
      
      Означает, что была найдена Графическая плата Геркулеса (HGC).
      
      viHGCPlus                      81H
      
      Означает,  что  была  найдена Графическая плата Геркулеса Плюс
 (HGCPlus).
      
      viHGCColor                     82H
      
      Означает, что была найдена Цветная плата Геркулеса (HGCColor).
      
      
      Дисплеи
      =======
      
      viMDAdisp                      1
      
      Означает, что был найден Монохромный дисплей (дисплей MDA).
      
      viCGAdisp                      2
      
      Означает, что был найден Цветной графический дисплей  (дисплей
 CGA).
      
      viEGAdisp                      3
      
      Означает, что был найден Расширенный графический дисплей (дис-
 плей EGA).
      
      viVGAmono                      4
      
      Означает, что был найден Видео графический монохромный дисплей
 (дисплей VGA).
      
      viVGAcolor                     5
      
      Означает, что был найден Видео графический цветной  дисплей
 (дисплей VGA).
      
      
      Наборы чипов VGA
      ================
      
      
      Функция пакета pcxQueryChipset определяет набор чипов адаптера
 VGA в текущей системе (если имеется) и возвращяет одну из следующих
 констант:
      
      chipUNKNOWN                    0
      
      Набор чипов VGA не может быть определен, или не может быть
 узнан.
      
      chipTSENG                      1
      
      Адаптер VGA основан на наборе чипов VGA Tseng Labs.
      
      chipPARA                       2
      
      Адаптер VGA основан на наборе чипов VGA Paradise.
      
      chipV7                         3
      
      Адаптер VGA основан на наборе чипов VGA Video Seven.
      
      
      
      
      СТРУКТУРЫ
      ---------------------------------------
      
      
      Несколько новых структур было добавлено, а структура PCXHEADER
 была  обновлена,  чтобы отразить последние изменения в формате PCX.
 Ниже определяются структуры для каждого языка.
      
      Си
      **
     
     
 /* Заголовок PCX */
 typedef struct pcxheader {
     char       manuf;           /* Всегда =10 для Paintbrush     */
     char       hard;            /* Информация о версии           */
     char       encod;           /* Групповое кодирование(=1)     */
     char       bitpx;           /* Бит на точку                  */
     int        x1;              /* Размеры картинки(включит.)    */
     int        y1;
     int        x2;
     int        y2;
     int        hres;            /* Гориз.разрешение дисплея      */
     int        vres;            /* Вертик.разрешение дисплея     */
     char       clrma[48];       /* Палитра                       */
     char       vmode;           /* (игнорируется)                */
     сhar       nplanes;         /* Кол-во плоскостей (вер.2.5=0) */
     int        bplin;           /* Байт на строку                */
     int        palinfo;         /* Информ.о палитре (1=цв.,2=сер)*/
     int        shres;           /* Разрешение сканнера           */
     int        svres            /*                               */
     char       xtra[54];        /* Доп.пустое место (фильтр)     */
 } PCXHEADER;
     
     
 /* Заголовок библиотеки изображений */
 typedef struct pcxlibheader {
     char       id[10]           /* Cтрока номера библиотеки      */
     char       copyright[50];   /* Извещение об авторском праве  */
     int        version;         /* Версия pcxLib                 */
     char       label[40];       /* Метка тома библиотеки         */
     char       xtra[20];        /* Доп.пустое место (фильтр)     */
 } PCXLIBHEADER;
     
     
 /* Заголовок изображения библиотеки изображений */
 typedef struct pcxlibdir {
     char       synch;           /* Байт синхронизации            */
     char       filename[13];    /* Имя файла изображения         */
     long       filesize;        /* Размер файла                  */
     unsigned   date;            /* Дата файла                    */
     unsigned   time;            /* Время файла                   */
     int        pack             /* Тип упаковки                  */
     char       note             /* Примечание к изображению      */
     char       xtra[20];        /* Дополнительный    фильтр      */
 } PCXLIBDIR;
     
     
 /* Видео информация */
 typedef struct pcxvinfo {
     char       adapter;         /* Видео адаптер                 */
     char       display;         /* Видео дисплей                 */
 } PCXVINFO;
     
     
 /* Информация о типе дисплея пакета PCX */
 typedef struct pcxdinfo {
     char       type;            /* Тип дисплея                   */
     char       descrip[21];     /* Описание строки               */
     char       mode;            /* Фактический режим BIOS        */
     char       bitpx;           /* Количество бит на точку       */
     int        hres;            /* Горизонтальное разрешение     */
     int        vres;            /* Вертикальное разрешение       */
     char       planes;          /* Количество плоскостей дисплея */
     char       pages;           /* Количество страниц дисплея    */
     int        begseg;          /* Начальный сегмент дисплея     */
     int        pagesize;        /* Размер страницы дисплея       */
     int        paltype;         /* Тип формата палитры (0-5)     */
     long       dispfunc;        /* Адрес функции дисплея         */
     long       bufffunc;        /* Адрес функции буфера          */
     long       virtfunc;        /* Адрес виртуальной функции     */
     long       getfunc;         /* Адрес функции чтения get      */
     long       putfunc;         /* Адрес функции вывода put      */
 } PCXDINFO;
     
     
     
      Паскаль
      *******
     
     
 {  Заголовок PCX }
 PCXHEADER = record
     manuf      :byte;            { Всегда =10 для Paintbrush      }
     hard       :byte;            { Информация о версии            }
     encod      :byte;            { Групповое кодирование(=1)      }
     bitpx      :byte;            { Бит на точку                   }
     x1         :word;            { Размеры картинки(включит.)     }
     y1         :word;            {                                }
     x2         :word;            {                                }
     y2         :word;            {                                }
     hres       :word;            { Гориз.разрешение дисплея       }
     vres       :word;            { Вертик.разрешение дисплея      }
     clrma      :array[0..47]ofbyte;  { Палитра                    }
     vmode      :byte;            { (игнорируется)                }
     nplanes    :byte;            { Кол-во плоскостей (вер.2.5=0) }
     bplin      :word;            { Байт на строку                }
     palinfo    :word;            { Информ.о палитре (1=цв.,2=сер)}
     shres      :word;            { Разрешение сканнера           }
     svres      :word;            {
     xtra       :array[0..53]of byte; { Доп.пустое место (фильтр)  }
 end;
     
      
  { Заголовок библиотеки изображений }
 PCXLIBHEADER = record
     id         :array[0..9] of byte;  { Cтрока номера библиотеки  }
     copyright  :array[0..49] of byte; { Извещение об авторск.праве}
     version    :word;                 { Версия pcxLib             }
     label      :array[0..39] of char; { Метка тома библиотеки     }
     xtra       :array[0..19] of byte; { фильтр                    }
 end;
     
      
  { Заголовок изображения библиотеки изображений }
 PCXLIBDIR = record
     synch      :byte;                 { Байт синхронизации        }
     filename   :array[1..12]of char;  { Имя файла изображения     }
     filesize   :longint;              { Размер файла }
     date       :word;                 { Дата файла                }
     time       :word;                 { Время файла               }
     pack       :word;                 { Тип упаковки              }
     note       :array[0..39]of char;  { Примечание к изображению  }
     xtra       :array[0..20]of byte;  { Дополнительный    фильтр  }
 end;
     
      
  { Информация о типе дисплея пакета PCX }
 PCXDINFO = record
     type       :byte;                 { Тип дисплея               }
     descrip    :array[0..112]of char; { Описание строки           }
     mode       :byte;                 { Фактический режим BIOS    }
     bitpx      :byte;                 { Количество бит на точку   }
     hres       :word;                 { Горизонтальное разрешение }
     vres       :word;                 { Вертикальное разрешение   }
     planes     :byte;                 { Кол-во плоскостей дисплея }
     pages      :byte;                 { Количество страниц дисплея}
     begseg     :word;                 { Начальный сегмент дисплея }
     paltype    :word;                 { Тип формата палитры (0-5) }
     dispfunc   :longint;              { Адрес функции дисплея     }
     bufffunc   :longint;              { Адрес функции буфера      }
     virtfunc   :longint;              { Адрес виртуальной функции }
     getfunc    :longint;              { Адрес функции чтения get  }
     putfunc    :longint;              { Адрес функции вывода put  }
 end;
     
     
  { Видео информация }
 PCXVINFO = record
     adapter    :byte;                 { Видео адаптер             }
     display    :byte;                 { Видео дисплей             }
 end;
      
      
      
      Бейсик
      ******
 
 ' Заголовок PCX
 TYPE PCXHEADER
     manuf      AS STRING*1       ' Всегда =10 для Paintbrush
     hard       AS STRING*1       ' Информация о версии
     encod      AS STRING*1       ' Групповое кодирование(=1)
     bitpx      AS STRING*1       ' Бит на точку
     x1         AS INTEGER        ' Размеры картинки(включит.)
     y1         AS INTEGER        '
     x2         AS INTEGER        '
     y2         AS INTEGER        '
     hres       AS INTEGER        ' Гориз.разрешение дисплея
     vres       AS INTEGER        ' Вертик.разрешение дисплея
     clrma      AS STRING*48      ' Палитра
     vmode      AS STRING*1       ' игнорируется)
     nplanes    AS STRING*1       ' Кол-во плоскостей (вер.2.5=0)
     bplin      AS INTEGER        ' Байт на строку
     palinfo    AS INTEGER        ' Информ.о палитре (1=цв.,2=сер)
     shres      AS INTEGER        ' Разрешение сканнера
     svres      AS INTEGER        '
     xtra       AS STRING*54      ' Доп.пустое место (фильтр)
 END TYPE
     
     
 ' Заголовок библиотеки изображений
 TYPE PCXLIBHEADER
     id         AS STRING*10      ' Cтрока номера библиотеки
     copyright  AS STRING*50      ' Извещение об авторск.праве
     version    AS INTEGER        ' Версия pcxLib
     label      AS STRING*40      ' Метка тома библиотеки
     xtra       AS STRING*20      ' фильтр
 END TYPE
     
     
 ' Заголовок изображения библиотеки изображений
 TYPE PCXLIBDIR
     synch      AS INTEGER        ' Байт синхронизации
     filename   AS STRING*13]     ' Имя файла изображения
     filesize   AS LONG           ' Размер файла
     date       AS INTEGER        ' Дата файла
     time       AS INTEGER        ' Время файла
     pack       AS INTEGER        ' Тип упаковки
     note       AS STRING*40      ' Примечание к изображению
     xtra       AS STRING*20      ' Дополнительный    фильтр
 END TYPE
      
      
 ' Информация о типе дисплея пакета PCX
 TYPE PCXDINFO
     type       AS STRING*1       ' Тип дисплея
     descrip    AS STRING*21      ' Описание строки
     mode       AS STRING*1       ' Фактический режим BIOS
     bitpx      AS STRING*1       ' Количество бит на точку
     hres       AS INTEGER        ' Горизонтальное разрешение
     vres       AS INTEGER        ' Вертикальное разрешение
     planes     AS STRING*1       ' Кол-во плоскостей дисплея
     pages      AS STRING*1       ' Количество страниц дисплея
     begseg     AS INTEGER        ' Начальный сегмент дисплея
     paltype    AS INTEGER        ' Тип формата палитры (0-5)
     dispfunc   AS LONG           ' Адрес функции дисплея
     bufffunc   AS LONG           ' Адрес функции буфера
     virtfunc   AS LONG           ' Адрес виртуальной функции
     getfunc    AS LONG           ' Адрес функции чтения get
     putfunc    AS LONG           ' Адрес функции вывода put
 END TYPE
     
 
 ' Видео информация
 TYPE PCXVINFO
     adapter    AS STRING*1       ' Видео адаптер
     display    AS STRING*1       ' Видео дисплей
 END TYPE
      
      
      
      Фортран
      *******
      
      
      Хотя Фортран не имеет фактическую структуру определений  запи-
 сей,  но  для  получения доступа к информации о типе структур можно
 использовать блок COMMON. Во включенном файле pcxDefs.FOR определе-
 ны следующие структуры, которые используются в Фортране:
      
 
      
 * Заголовок PCX
      COMMON/PCXHEADER/
      + manuf,hard,encod,bitpx,x1,y1,x2,y2,hres,vres,clrma,vmode,
      + nplanes,bplin,palinfo,shres,svres,xtra
      INTEGER*1              manuf,hard,encod,bitpx
      INTEGER*2              x1,y1,x2,y2,hres,vres
      INTEGER*1              clrma (48)
      INTEGER*1              vmode,nplanes
      INTEGER*2              bplin,palinfo,shres,svres
      INTEGER*1              xprs(54)
      
      
 * Заголовок библиотеки изображений
      COMMON/PCXLIBHEADER/
      + id,copyright,version,label,lextra
      INTEGER*1              id(10),copyright(50),version
      CHARACTER              label(40)
      INTEGER*1              lextra
      
      
 * Заголовок изображения библиотеки изображений
      COMMON/PCXLIBDIR/
      + synch,filename,filesize,date,time,pack,note,dextra
      INTEGER*1              synch
      CHARACTER*13           filename
      INTEGER*4              filesize
      INTEGER*2              date,time,pack
      CHARACTER*40           note
      INTEGER*1              xtra(20)
      INTEGER*1              synch
      INTEGER*1              synch
      
      
 * Информация о типе дисплея пакета PCX
      COMMON/PCXDINFO/
      + type,descrip,mode,dbitpx,dhres,dvres,dplanes,dpages,begseg
      + pagesize,paltype,dispfunc,bufffunc,virtfunc
      INTEGER*1           type
      CHARACTER           descript
      INTEGER*1           mode
      INTEGER*1           dbitpx
      INTEGER*2           dhres,dvres
      INTEGER*1           dplanes,dpages
      INTEGER*2           begseg,pagesize,paltype
      INTEGER*4           dispfunc,bufffunc,virtfunc,getfunc,putfunc
                                                             
      
 /* Видео информация */
      COMMON/PCXVINFO/
      + adapter1,display1,adapter2,display2
      INTEGER*1           adapter1,display1,adapter2,display2
      
      
      
      Клиппер
      *******
      
      ПРИМЕЧАНИЕ:   Для интерфейса Clipper эквивалентной
                    структуры заголовков не существует.
                                                       
      
      
      
      
                         ПРИЛОЖЕНИЕ  С
                         =============
      
                   СООБЩЕНИЯ УТИЛИТ ОБ ОШИБКАХ
                   ---------------------------
      
                           О Б З О Р
      
      
      
      В данном разделе описаны сообщения об ошибках, которые Вы  мо-
  жете получить при работе с сервисными программами (утилитами) PCX.
  Сначала  даются общие коды ошибок, а затем - сообщения об ошибках,
  свойственные каждой утилите. Все коды ошибок непосредственно соот-
  ветствуют ошибкам пакета, поэтому Вы можете в дальнейшем  сравнить
  код  ошибки  с константами кода возврата пакета, для получения до-
  полнительной информации.
      
                          ОБЩИЕ ОШИБКИ
                          ************
      
      
      > Could not allocate image buffer
      > Не могу разместить (выделить) буфер изображений
      
      Для загрузки изображения в дисплей необходимо разместить  (вы-
 делить)  буфер, который ускоряет процесс. Вследствие некоторых при-
 чин для него нет достаточного места в памяти. Это происходит,  если
 остается  менее  64 кбайт ОЗУ. Постарайтесь удалить несколько рези-
 дентных в памяти программ.
      
      
      > Error in viewing page: [?]
      > Ошибка в странице просмотра: [?]
      
      Была указана неверная страница дисплея. Режим дисплея, необхо-
 димый для показа изображения, не поддерживает эту страницу.
      
      
      > Error displaying image [имя файла]
      > Ошибка при показе изображения  [имя файла]
      
      Во  время  попытки  показать  изображения  произошла внутреняя
 ошибка.Возможно, поврежден файл, или это неверный файл.  Попробуйте
 загрузить  другое  изображение,  или  же  загрузите  изображение из
 Paintbrush для проверки файла.
      
      
      
      > Error in setting display mode: [?]
      > Ошибка при установке режима дисплея: [?]
      
      Для показа запрошенного изображения данный  режим  дисплея  не
 возможен. Эта ошибка случается во время замены режима, когда не ус-
 тановлена  необходимая  аппаратура.  На системе с двумя мониторами,
 попробуйте поменять активные дисплеи.
                                       
      
      
      > Error setting the display type: [?]
      > Ошибка при установке типа дисплея: [?]
      
      Эта ошибка вызвана внутренними причинами. Она не должна проис-
 ходить. Вследствие неких причин нарушен тип дисплея.
      
      
      > Could not determine [имя файла] image type
      > Не могу определить  тип изображения [имя файла]
      
      Для заголовка изображения не хватает  информации,  необходимой
 для  определения типа и режима дисплея. Это произойдет, когда пара-
 метры заголовка hres и vres не указывают оригинальные размеры экра-
 на. При возможности, используйте опцию замены режима для явной  ус-
 тановки типа и режима дисплея.
      
      
      > Image [имя файла] requires different hardware
      > Для изображения [имя файла] необходима другая аппаратура
      
      Программа обнаружила, что данная аппаратура не будет поддержи-
 вать  запрошенный  тип  изображения.  Она проверяет только активный
 адаптер, поэтому может помочь смена адаптеров (например  с  EGA  на
 "Геркулес", если они на одной машине). Эта ошибка происходит,напри-
 мер, в тех случаях, когда адаптер EGA пробует показать  изображение
 VGA и т.п.
      
      
      > Could not open [имя файла]
      > Не могу открыть [имя файла]
      
      Программа  не  может  найти запрошенный файл изображения. Про-
 верьте имя файла и путь доступа (префикс). Если это вырезка,  учти-
 те, что должно быть указано расширение .PCC.
      
      
      > Could not read from [имя файла]
      > Не могу читать из [имя файла]
      
      Произошла  общая ошибка чтения диска. Файл был открыт успешно,
 но не может быть прочитан. Эта ошибка может  происходить  и  тогда,
 когда требуемых данных не  имеется в файле.
      
      
      > [имя файла] is not a PCX file
      > Файл [имя файла] не является файлом PCX
      
      Все  программы проверяют, является ли запрошенный файл настоя-
 щим файлом PCX. Ошибка произошла, так как запрошенный файл не удов-
 летворяет требованиям к формату файлов PCX.
                                             
      
      
                 ОШИБКИ, ХАРАКТЕРНЫЕ ДЛЯ КАЖДОЙ УТИЛИТЫ
                 **************************************
      
      
      pcxShow
      -----------------------------
      
      > Virtual memory error ...
      > Ошибка виртуальной памяти
      
      Ошибка произошла при использовании либо обычной,либо расширен-
 ной памяти. Это происходит,как правило, вследствие ошибки  размеще-
 ния (выделения) памяти. Необходимо немедленно проверить память.
      
      
      
      > Not enough memory available...XXXXK total required
      > Нет достаточного места в памяти...необходимо XXXX кбайт
      
      Для  расширения  запрошенного изображения требуется, как мини-
 мум, XXXX кбайт. Проверьте объем свободной  памяти,  и  освободите,
 если возможно, дополнительное место в памяти. Если свободного места
 больше нет, показывайте изображение без расширения.
      
      
      > Could not find [имя файла] in [имя библиотеки]
      > Не могу найти  [имя файла] в [имя библиотеки]
                                      
      Поиск  в  библиотеке не может найти запрошенный файл изображе-
 ния. Проверьте имя файла; учтите, что для имени файла не нужен путь
 доступа (префикс). Для создания списка библиотеки, используйте ути-
 литу pcxLib.
      
      
      
      pcxGrab
      -----------------------------
             
      
      > WARNING: Unable to Mode Override
      > ВНИМАНИЕ: Не могу использовать опцию замены режима
      
      При установке утилиты pcxGrab с опцией замены режима /M,  ути-
 лита не может сопоставить (найти соответствие) данный номер режима с
 допустимым  типом  изображения  PCX. Убедитесь в том, что указанный
 режим поддерживается, а данная величина находится в шестнадцатирич-
 ной системе счисления.
      
      
      > WARNING: No Hercules found
      > ВНИМАНИЕ: "Геркулес" не найден
      
      При установке утилиты pcxGrab с опцией замены  режима  /M,  не
 бала найдена плата Геркулеса. Это вызовет проблемы при попытке зах-
 ватить экран.
      
      
      > pcxGrab is already installed
      > Утилита pcxGrab уже установлена
      
      Копия  утилиты pcxGrab уже находится в памяти. При попытке из-
 менить клавиши вызова, убирайте первую копию перед установкой  сле-
 дующей.
      
      ВНИМАНИЕ: Счетчик захватов будет перенустановлен, так что
                проверьте, чтобы все захваченные до этого
                изображения были бы переименованы, или же
                используйте для хранения изображений другой
                каталог.
      
      
      > Error in installing pcxGrab
      > Ошибка при установке  утилиты pcxGrab
      
      Внутренняя  ошибка произошла во время процесса установки. Поп-
 робуйте удалить некоторые другие резидентные программы и произведи-
 те утсановку утилиты pcxGrab заново.
      
      
      > pcxGrab could not be foundf
      > Не могу найти утилиту pcxGrab
      
      При попытке удалить программу из памяти, копия утилиты не была
 найдена в памяти. Чтобы программа могла удалить себя из памяти, не-
 обходимо выполнение некоторых  требований.  Программа  должна  быть
 последней загруженной программой; она должна располагать всеми сво-
 ими  векторами.  Если после утилиты pcxGrab была загружена еще одна
 программа, то удалить программу pcxGrab будет невозможно. Ее удале-
 ние  будет  невозможно  и  в  случае  работы  таких  программ,  как
 SideKick, которые "крадут" векторы. Если программа установлена и не
 может быть убрана, Вам придется, вероятно, произвести перезагрузку.
       
      
      > Error in removing pcxGrab
      > Ошибка при удалении программы pcxGrab
      
      Внутренняя  ошибка  произошла во время процесса удаления прог-
 раммы из памяти. Мы рекомендуем произвести перезагрузку.
      
      > "Звуковой сигнал"
      
      Когда программа pcxGrab резидентно находится в памяти, она со-
 общает Вам о своей работе посредством звуковых сигналов. Один  сиг-
 нал  означает, что где-то произошла ошибка. Наиболее часто это слу-
 чается при попытке захватить вместо графического  текстовый  экран.
 Двойной  звуковой  сигнал  свидетельствует о том, что захват прошел
 нормально.
      
      
      
      pcxPrint
      -----------------------------
      
      > Printer error
      > Ошибка на печатающем устройстве
      
      Принтер не отвечает (ошибка тайм-аута),  ошибка  произошла  во
 время  передачи  (ошибка ввода/вывода), или же в принтере кончилась
 бумага. Проверьте принтер и начните заново.
      
      
      > Escape pressed! Aborting after XX:XX minutes
      > Нажата клавиша ESC! Экстренное прерывание через XX:XX минут
      
      Печать прервана, так как программа  pcxPrint  обнаружила,  что
 была нажата клавиша ESCAPE.
      
      
      > Image is not Black and White
      > Не черно-белое изображение
      
      Изображение  PCX  не является изображением с одной плоскостью,
 одним битом (черно-белым). Попробуйте распечатать другое  черно-бе-
 лое изображение.
      
                 
      
      pcxFix
      -----------------------------
            
      
      > WARNING: Type may not be compatible with image data!
      > ВНИМАНИЕ: Тип может быть несовместим с данными
                  для изображения!
      
      Указанный  (опцией замены режима) режим не сответствует данным
 заголовка для изображения. Новый тип должен  точно  соответствовать
 правильному количеству плоскостей и бит на точку.
      
      
      > Unable to determine the correct type
      > Не могу определить правильный тип
      
      Утилита pcxFix не может определить тип изображения и автомати-
 чески  откорректировать  его. Используйте параметр /O для получения
 списка всех возможных опций замены режима, затем используйте  опцию
 замены режима /M для  корректировки изображения.
      
      
      
      pcxLib
      -----------------------------
            
      
      > Error in  creating library [имя библиотеки]
      > Ошибка при создании библиотеки [имя библиотеки]
      
      Библиотека не может быть создана и открыта, вследствие ограни-
 ченного  места на диске, или других проблем с диском. Проверьте имя
 библиотеки и путь доступа, а также наличие свободного места на ука-
 занном диске.
      
      
      > Error in  сreating index for [имя библиотеки]
      > Ошибка при создании индекса для библиотеки [имя библиотеки]
      
      При создании индекса библиотеки произошла  внутренняя  ошибка.
 Попробуйте снова создать библиотеку, а также проверьте наличие сво-
 бодного места на диске.
      
      
      > Error in  setting label for [имя библиотеки]
      > Ошибка при установке метки для библиотеки [имя библиотеки]
      
      Не может быть установлена метка тома библиотеки. Проверьте за-
 щиту от записи и наличие других проблем, связванных с диском.
      
      
      > Error <действие> images [имя файла] from [имя библиотеки]
      > Ошибка при <действие> изображений [имя файла] из
        [имя библиотеки]
      
      Программа  управления  библиотекой  pcxLib выполняет несколько
 "действий", которые включают в себя добавление, стирание,  обновле-
 ние,  удаление  и  т.п. Во время выполнения одного из этих действий
 произошла ошибка и операция осталась незавершенной. Однако,  перво-
 начальный файл библиотеки сохранен. Эта ошибка может также происхо-
 дить  при  недостатке  места на диске, так как программа управления
 библиотекой поддерживает резервную копию библиотеки.
      
      
      > Error in determining action
      > Ошибка при определении действия
      
      Действие не было указано, или же программа управления  библио-
 текой не может понять, какое действие необходимо выполнить. Укажите
 требуемое действие или упростите команду.
      
      
      > Error: No library name
      > Ошибка: нет имени библиотеки
      
      Для  операций  с  библиотекой  не было указано имя библиотеки.
 Укажите имя файла и необходимый путь доступа (префикс).
      
      
      
      pcxCut
      -----------------------------
      
      
      > Error saving header: [?]
      > Ошибка при сохранении заголовка: [?]
      
      При вырезании изображения не был сохранен  заголовок  вырезки.
 Проверьте наличие на диске достаточного места.
      
      
      > Error getting header
      > Ошибка при чтении заголовка
      
      При выборке заголовка изображения произошла внутренняя ошибка.
 Проверьте  правильность и целостность первоначального (оригинально-
 го) файла изображения.
      
      
      pcxLoc
      -----------------------------
      
      Для этой утилиты дополнительных сообщений об ошибках нет.
      
      
      pcxHdr
      -----------------------------
      
      Для этой утилиты дополнительных сообщений об ошибках нет.
      
            
      
      
      
      
                         ПРИЛОЖЕНИЕ  D
                         =============
      
                       ФОРМАТ ФАЙЛОВ PCX
                       -----------------
      
                           О Б З О Р
      
      
      Несмотря на то, что пакет дает полный набор функций, поддержи-
 вающих формат PCX, в некоторых случаях Вы должны будете знать явный
 формат. В данном разделе описывается информация  заголовка  PCX,  а
 также метод группового кодирования.
      
      
                           ЗАГОЛОВОК
                           *********
      
      
      Первые  128  байт каждого файла PCX или PCC содержат заголовок
 файла изображения. Заголовок определяет ширину и глубину  изображе-
 ния,  количество плоскостей, число бит на точку, а также другую ин-
 формацию, необходимую для многократного создания изображения.
      
      Заголовок несколько изменен в новой версии пакета. В него  до-
 бавлены  три новых поля: PALINFO, SHRES и SVRES. Поле palinfo опре-
 деляет, является ли изображение цветным (palinfo=1) или в  оттенках
 серого (palinfo=2). Когда программа PC Paintbrush загружает изобра-
 жение, и она видит, что это серое изображение, программа устанавли-
 вает  палитру  как свою собственную внутреннюю серую палитру. Пакет
 не обрабатывает палитры подобным способом (текущая  палитра  ВСЕГДА
 хранится  ВМЕСТЕ  с  изображением), поэтому он игнорирует это поле.
 Однако, в целях совместимости, пакет устанавливает флаг palinfo для
 обозначения цвета.
      
      Два других поля, shres и  svres,  предназначены  для  хранения
 разрешения  развертки  (сканнера). Они были созданы для того, чтобы
 не путать замену разрешения экрана на разрешение развертки (сканне-
 ра) в полях hres и vres. Прежние пользователи заметят, что это было
 бы показано как 'Разрешение дисплея: 75  х  75'  при  использовании
 утилиты  pcxHdr.  Теперь  поля hres и vres будут содержать экранное
 разрешение  создающего  устройства,   во   всех   будущих   версиях
 Paintbrush (1.62 и выше).
      
      Доступ к заголовку может быть произведен при помощи любой фун-
 кции  заголовка пакета. Структура заголовка уже была определена для
 каждого языка. Определения полей даны в  Приложении  B:  "Константы
 пакета".
      
      ПРИМЕЧАНИЕ   для пользователей Clipper: Клиппер не имеет экви-
                 валентеных структур, поэтому прямой доступ к  пара-
                 метрам  заголовка  получить нельзя. Для специальных
                 функций используйте систему  Расширенного  Клиппера
                 (Extend Clipper) и интерфейс Си пакета.
      
      
                          П А Л И Т Р Ы
                          *************
      
      
      Информация  палитры  хранится в одном из четырех форматов. Для
 режимов CGA, используется только первый и  четвертый  байт  палитры
 заголовка.  Первый байт обозначает цвет заднего фона - разделив его
 на 16 получим величину от 0 до 15. Четвертый байт  обозначает  цвет
 переднего  фона.  Число  палитр CGA равно 8, поэтому разделим на 32
 чтобы получить величину в пределах от 0 до 7.
      
      Для режимов EGA, данные хранятся в 16 "тройках". Тройка -  это
 3-байтовый  набор величин красного, зеленого и голубого цветов. Так
 как каждая величина может находиться в диапазоне от 0  до  255,  Вы
 должны  отобразить эти величины в одном из четырех возможных  уров-
 ней для каждого цвета. Следовательно, 256 разделить на 4 будет  64,
 поэтому  с  0 до 63 = уровень 0, с 64 до 127 = уровень 1, и так да-
 лее. Система BIOS адаптера EGA ожидает один байт  формата  00RGBrgb
 для  кажого регистра палитры. Четыремя возможными величинами для Bb
 являются 00, 01, 10 и 11. Когда Вы определили уровень  для  каждого
 цвета, скомбинируйте их в байте, совместимом с BIOS (Базовой систе-
 мой ввода-вывода).
      
      Для  16-цветных  режимов  VGA, палитра снова хранится в "трой-
 ках". Для преобразования в совместимый формат BIOS, сдвиньте каждый
 байт вправо на два бита. Это преобразование автоматически  выполня-
 ется функцией pcxGetFilePalette или функцией pcxDecodePalette.
      
      И последний формат поддерживает 256-цветный режим VGA. Так как
 каждый цвет требует тройку RGB (R (red)- Красный, G (green) - зеле-
 ный, B (blue) - голубой), для хранения всей палитры VGA будет необ-
 ходимо  768  байт. Формат PCX, однако, может поддерживать только 16
 цветов как максимум, поэтому палитра не может храниться в заголовке
 изображения по своему обычному адресу.
      
      Формат 256-цветной палитры претерпел мало изменений с тех пор,
 когда были впервые созданы 256-цветные режимы.  Заголовок  PCX  был
 изначально  создан для хранения 16 цветов как максимум, и длина его
 составляет всего 128 байт. Для 256-цветной  палитры  требуется  768
 байт (3 умножить на 256) - очевидно, что надо внести изменение.
      
      Первая  попытка  решить  эту  проблему, предпринятая компанией
 ZSoft, заключалась в том, чтобы хранить палитру  в  файле  шаблонов
 Patterns, который используется для редактирования цветов и шаблонов
 в Paintbrush. Это решение, хотя оно и работало для Paintbrush, ока-
 залось неудобным, так как для каждого 256-цветного изображение тре-
 бовалось уже два файла.
      
      В мае 1988 года вышел Пакет программиста PCX,  версия  3.0.  В
 нем для хранения палитры использовался другой способ. Данные палит-
 ры  добавлялись в конец файла изображения; им предшествовал иденти-
 фикационный байт 10 (такой же идентификатор, что и заголовок  PCX).
 Регистры  палитры  хранились в совместимом с BIOS формате RGB (один
 байт для красного, один - для зеленого и один для голубого  цвета),
 используя младшие 6 битов в байте.
      
      В  конце  1988  года, компания ZSoft приняла такой же способ и
 для хранения 256-цветной палитры. Однако, палитры хранятся  различ-
 но, вследствие  того, что  они имеют формат "независимый от устрой-
 ства". Другими  словами, это значит, что что каждый регистр палитры
 сдвинут влево на 2 бита, так что используются старшие 6 бит  в бай-
 те. Для определения нового формата палитры используется   идентифи-
 катор 12, или 0CH. Это позволяет пакету скрыто обрабатывать  разли-
 чные форматы палитр,  так что могут читаться оба формата, но версия
 3.5 теперь осуществляет сохранение только в новом формате.Программа
 Paintbrush,однако, не будет читать 256-цветные изображения "старой"
 версии  пакета.  Для  обновления "старого"  изображения Вам следует
 использовать сервисную программу pcxFix.
      
      Для того, чтобы определить, содержит ли 256-цветное изображе-
 ние палитру:
      
      - Заголовок должен обозначать номер версии 5 - что представля-
        ет версию 3.0 Paintbrush с палитрой.
      
      -  Байт,  предшествующей палитре, должен соответствовать байту
         производителя PCX - первому байту в заголовке, который дол-
         жен иметь величину 10.
      
      Если эти два условия выполнены, то палитра имеется.
      
                       
      
                       ГРУППОВОЕ КОДИРОВАНИЕ
                       *********************
      
      
      
                                            
      Формат PCX использует компрессию (сжатие), которое  называется
 групповым  кодированием. При хранении изображения оно сжимается при
 помощи подсчета повторяющихся байт. Если для  изображения  хранится
 несколько (больше одной) цветовых плоскостей, каждая строка хранит-
 ся  в  плоскости  по основанию плоскости. Ниже приводится псевдокод
 для метода декодирования.
      
      Для каждого байта прочитать X,
        если верхние два бита X оба равны 1, то
          repeatcount = (6 младших битов X)
          data = (следующий байт после X)
        else
          repeatcount = 1
          data = X
      
      При показе, Вы можете замаскировать последний  байт  в  строке
 развертки (просмотра), чтобы изображение заканчивалось на том бите,
 где  оно  должно  заканчиваться. В противном случае по правому краю
 изображения будет появляться различный "мусор".
      
      Метод  кодирования  аналогичен  описанному выше, но в обратном
 порядке. Подсчет байтов, пока не произойдет различие, затем  хране-
 ние байта данных и подсчета. Обработка идет пока не будет сохранена
 область.
      
      Для  тех,  кто  пишет свои собственные программы, сделаем нес-
 колько дополнительных замечаний.
      
 *    Если байт счета обозначен как два верхние  бита равные  едини-
 *    це, то что делать с байтом данных, который имеет  оба  верхних
 *    бита включенными?
      
      Это просто: если данные повторяются, это не представляет проб-
 лему.  Если они не повторяются, просто запишите байт счета как 1, а
 затем байт данных.
      
 *    Где останавливается подсчет повторений - в конце строки на
 *    каждой плоскости бит?
      
      Нет, в действительности подсчет в пакете не прерывается. Байты
 повторяются по плоскостям бит и по  строкам  развертки.  Однако,  в
 последнем  техническом  руководстве  компапния ZSoft указала, что в
 конце  каждой  строки  развертки  ИМЕЕТСЯ вынужденная остановка. Но
 подсчет в плоскостях бит не прерывается. В любом  случае,  как  сам
 пакет,  так  и Paintbrush прекрасно читают и записывают изображения
 друг друга.
      
 *    Почему кажется, что в конце строки просмотра (развертки)
 *     и в конце файла имеются лишние данные?
      
      Программа  Paintbrush  округляет  число  байт, необходимых для
 строки просмотра (развертки) до следующей границы слова. Это  озна-
 чает, что для каждой строки может иметься лишний байт, который сов-
 сем не нужен. Для того, чтобы найти фактические данные, используйте
 формулу (x2-x1 +1) для определения количества бит, а затем раздели-
 те  на  8 для получения числа байт. Если есть остаток, добавьте еще
 один байт. Кроме того, количество сохраненных строк развертки иног-
 да округляется до следующего умножения восьми.  Пакет  осуществляет
 округление  до  границ  слова,  но никогда не хранит дополнительные
 строки просмотра (развертки). Для получения правильного числа строк
 развертки (просмотра) воспользуйтесь формулой (y2-y1 +1).
      
      
      Несмотря на то, что формат PCX весьма несложен,  в  программи-
 ровании  аппаратуры  для показа на уровне регистров возникают труд-
 ности. Для декомпрессии (развертывания) изображения может  быть ис-
 пользован любой язык высокого уровня, но обычно они слишком медлен-
 ны или же не способны должным образом управлять  показом.  Если  Вы
 интересуетесь  этой  проблемой,  закажите  исходный  код в компании
 Genus. Он оправдает себя, даже если сэкономит Вам два часа,  потра-
 ченные на программирование.
      
      Дополнительную информацию Вы можете получить в техническом ру-
 ководстве компании ZSoft по формату PCX. Мы  рекомендуем  Вам  так-
 же обратиться к общему справочному материалу по графике, который Вы
 сможете найти в следующих изданиях:
      
 -------------------------------------------------------------------
 Автор        Название                                    Издание
 -------------------------------------------------------------------
 R.Wilton     Руководство программиста по системам        Microsoft
              дисплея PC и PS/2.                          Press
              (Programmer's Guide to PC and PS/2
              Display Systems)
      
 R.F.Ferraro  Руководство программиста по платам          Addison-
              адаптера EGA и VGA.                         Wesley
              (Programmer's Guide to EGA and VGA Cards)
      
 D.D.Doty     Руководство программиста по  графическим    Addison-
              платам "Геркулеса"                          Wesley
              (Programmer's Guide to the Hercules
              Graphics Cards)
 -------------------------------------------------------------------
      
      
      
      
      
      
                        КОНЕЦ  ЧЕТВЕРТОЙ  ЧАСТИ
      
      
      
      
               
      
      
