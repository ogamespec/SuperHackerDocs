


                             ГЛАВА 6.


                    Создание и сохранение программ.


6.1.  Программы и модули:
      Программный список
      6.1.1. Одно-модульные программы.
      6.1.2. Много-модульные программы.
      6.1.3. Работа с программными списками.
      6.1.4. Как пакет Quick-C использует программные
             списки.
      6.1.5. Общие вопросы о встроенных программах и
             программных списках.
6.2.  Обработка исходных файлов:
      Меню File
      6.2.1. Создание новых программ.
             Команда New.
      6.2.2. Загрузка файлов для редактирования:
             Команда Open...
             6.2.2.1. Загрузка файлов с помощью команды
                      Open...
             6.2.2.2. Распечатка файлов с помощью команды
                      Open...
      6.2.3. Открытие последнего редактируемого файла:
             Команда Open Last File.
      6.2.4. Слияние файлов: Команда Merge...
      6.2.5. Сохранение файлов: Команда Save и
             Команда save As...
      6.2.6. Создание и загрузка программного списка:
             Команда Set Program List.
      6.2.7. Очистка текущего программного списка:
             Команда Clear Program List.
      6.2.8. Редактирование программного списка:
             Команда Edit Program List.
      6.2.9. Печать файлов: Команда Print.
      6.2.10.Временный выход в DOS:
             Команда DOS Shell.
      6.2.11.Выход из пакета Quick-C:
             Команда Exit.



    В данной Главе  объясняется, как создавать  и сохранять программы  с
помощью компилятора Microsoft Quick-C. Во-первых, в ней  рассказывается,
как модули  объединяются и  формируют программу,  и описывается  понятие
"программного списка", который поддерживается каждой программой. Затем в
данной Главе  показывается, как  использовать команды  из меню  File для
создания, сохранения и респечатки исходных файлов Quick-C.


             6.1. Программы и модули: программный список.

    Программа Quick-C  состоит из  одного или  более исходных  файлов на
языке  СИ,  иначе  "модулей".  Программа,  построенная  из одного модуля
называется "одномодульная программа".  Программа, построенная из  более,
чем  одного  модуля,  называется  "многомодульной программой". Вы можете
подготовить список модулей, из которых состоит программа на языке СИ,  в
файле,  называемой  "программный   список".  Пакет  Quick-C   использует
программный  список  для  повторного  построения программы при изменении
одного из  модулей. Данный  механизм гарантирует,  что программа  всегда
перестраивается, используя наиболее "свежую" версию модулей.


                   6.1.1. Одно-модульные программы.

    Одно-модульные  программы  создать  легче  всего.  Обычный   процесс
написания одномодульных программ состоит в следующем:

      1. Выберите команду New (Раздел 6.2.1) из меню File для созда-
         ния нового исходного СИ-файла, или команду Open... (Раздел
         6.2.2) из меню File для открытия существующего исходного
         файла.

      2. Введите текст программы, используя ключи редактирования и
         команды, описанные в Главе 7.

      3. Скомпилируйте, выполните и отладьте программу с помощью
         команд, описанных в Главе 8.

    Для  одномодульной  программы  не  требуется  создавать  программный
список. Если  вы не  создали программный  список, программа  создается в
памяти, причем выполняемый файл не записывается на диск.

    Если программа вызывает стандартные библиотечные процедуры на  языке
СИ, большинство определений данных процедур встроены в программную среду
пакета  Quick-C.   Таблица  6.1   перечисляет  библиотечные   процедуры,
встроенные  в   среду  Quick-C,   которые  известны,   как  "оперативная
библиотека" Quick-C.

                                                 Таблица 6.1.

      Библиотека процедур на языке СИ, определенная в файле QC.EXE.



abort        _fmalloc      Itoa         rmdir         strncat
access       _fmsize       malloc       rmtmp         strncmp
atexit       fopen         memavl       sbrk          strnepy
atof         fprintf       memccpy      scanf         strnset
atoi         fputc         memchr       segread       strpbrk
atol         fputs         memcmp       setbuf        strrchr
bdos         fread         memcpy       setjmp        strrev
brk          free          _memmax      setmode       strset
calloc       _freect       memmove      setvbuf       strspn
chdir        fscanf        memset       signal        strstr
chmod        fseek         mkdir        sopen         strtok
clearerr     fstat         movedata     spawnl2       strupr
close        ftell         _msize       spawnl2       system
cputs        fwrite        _nfree       spawnlp2      tell
creat        getch         _nheapchk    spawnlge2     time
dosexterr    getche        _nheapset    spawnv2       tmpfile
eof          getcwd        _nheapwalk   spawnvpe2     tmpnam
_exit        _getdate      _nmalloc     sprintf       tolower
exit         getenv        _nmsize      sscanf        toupper
_expand      gets          onexit       stackavail    tzset
fclose       gettime       open         strcat        ultoa
fflush       int86         printf       strchr        ungetc
_ffree       int86x        putch        strcmp        unlink
fgets        intdosx       puts         strcmpi       vfprintf
_fheapchk    isatty        raise        strcpy        vprintf
_fheapset    itoa          read         strcspn       vsprintf
_fheapwalk   kbhit         realloc      strdup        write
filelength   longjmp       remove       stricmp
flushall     lseek         rewind       strlwr


    1. Семейство функций halloc, hfree и exec определены в файле QC.EXE,
но не могут быть вызваны программами, работающими в среде Quick-C.

    2.  Данные  функции  не  могут  быть  вызваны  с  флагом  P  OVERLAY
программами  ,  работающими  в  среде  программирования  Quick-C.   Если
программа вызывает стандартные библиотечные функции, не перечисленные  в
Таблице 6.1, вы  должны выполнить один  из следующих шагов  для гарантии
того, что определения для данных функций будут найдены:

    1. Создайте  библиотеку Quick-C,  содержащие функции,  не вошедшие в
список  (смотрите  разделы  10.1.1  и  1.1.3).  Затем  загрузите  данную
библиотеку  во  время  старта  пакета  Quick-C (Раздел 10.1.2). В данном
случае,  недостающие  определения  функций  будут  найдены  в библиотеке
Quick-C.

    2. Выберите команду Set Program List (Раздел 6.2.6) из меню File для
создания программного  списка. Затем  выберетекоманду Edit  Program List
...  (Редактирование программного  списка, Раздел 6.2.8)  чтобы добавить
программный модуль к новому программному списку и сохранить  программный
список. В данном случае недостающие определения функций будут найдены  в
комбинированной библиотеке  средней модели  памяти MLIBCE.LIB  на диске;
смотрите  раздел  6.1.4  для  более  подробной  информации  о  том,  как
используются программные списки Quick-C.


                   6.1.2. Многомодульные программы.

    Для   многомодульных   программ   вам   обязательно   нужно  создать
программный список для того, чтобы компилятор Quick-C знал, какие модули
использовать  при  создании  программы.  Для  построения  многомодульной
программы проделайте следующие шаги:

      1. Для создания, компиляции и отладки исходных файлов, из кото-
      рых состоит программа, применяются следующие действия:

        а)Выберите команду New (Раздел 6.2.1) из меню File для созда-
        ния нового исходного файла, или команду Open...(Раздел 6.2.2)
        из меню File, чтобы открыть существующий исходный файл для
        редактирования.

        в)Введите текст для исходного файла, используя ключи редакти-
        рования и команды, описанные в Главе 7.
        Выберите команду Compile... (Раздел 8.1.4) из меню Run для
        компиляции исходного файла и проверки на синтаксические ошиб-
        ки.

    2.  Выберите  команду  Set  Program  List...  (Раздел 6.2.6) из меню
File, чтобы  создать программный  список или  загрузить существующий для
редактирования.

    3. Выберите команду Edit  Program List...  (Раздел 6.2.8)  для того,
чтобы  добавить  или  убрать  модули  из  программного  списка  и  затем
запомнить программный список. Обратите внимание, что вы можете  добавить
в программный  список также  объектные файлы  или автономные  библиотеки
(библиотеки с расширениями .LIB).

    4. Повторяйте шаги 1-3, для новых программных модулей.

    5.  Компилируйте,  запускайте  и  отлаживайте  программу,  с помощью
команд, описанных в Главе 8.

    При  компиляции  многомодульной  программы,  пакет Quick-C проверяет
программный  список,  чтобы  определить,  были  ли  какие-нибудь  модули
изменены со времени последней компиляции программы. Если изменения были,
измененные модули перекомпилируются  перед повторной сборкой  программы.
Такой механизм гарантирует, что программа всегда соответствует последним
изменениям ее компонентов.

    Компилятор  записывает  программный  список  на  диск с тем же самым
базовым именем,  что и  программа с  расширением .MAK.  Вне среды пакета
Quick-C, вы можете дать расширение .MAK входному файлу утилиты MAKE  при
редактировании  программы.  Смотрите  Раздел  11.5  для  более подробной
информации о файлах .MAK.

---------------------------------------------------------------------

    Замечание.

    Не удаляйте  файл .MAK  для программы,  имеющий программный  список.
Если  вы  копируете  программу,  имеющую  программный  список  в  другой
каталог, вам нужно также скопировать файл .MAK в новый каталог.

---------------------------------------------------------------------



                6.1.3. Работа с программными списками.

    Компилятор Quick-C делает легким прогцесс создания и  редактирования
программных списков. В следующей таблице приведены операции, которые  вы
можете выполнить над программным  списком, и команды, которые  вы можете
использовать для выполнения данных операций:

Операции               Меню/Команды


Создать программный    File/Set Program List... (Раздел 6.2.6)
список
Открытие существующего File/Set Program List... (Раздел 6.2.6)
программного списка
для редактирования
Высвечивание содержи-  File/Set Program List... (6.2.6) или
мого программного спи- View/Source... (Раздел 5.1)
ска
Высвечивание или реда- View/Source... (Раздел 5.1)
ктирование модуля в
программном списке
Редактирование и сох-  File/Edit Program List... (Раздел 6.2.8)
ранение программного
списка
Очистка текущего прог- File/New (Razdel 6.2.1),
раммного списка из     File/Clear Program List (Раздел 6.2.7), или
памяти                 File/Edit Program List... с командной кнопкой
                       Clear List (Раздел 6.2.8).




    Если вы  потеряете след  программного списка,  имеющегося в  памяти,
запомните, что имя программного списка (без расширения .MAK)  появляется
после программного списка (Program List): индикатор на строке  состояния
на дне экрана пакета Quick-C.


        6.1.4. Как пакет Quick-C использует программный список.

    Компилятор Quick-C выполняет при компиляции одномодульной  программы
с  программным   списком  или   перестройкой  многомодульной   программы
следующие шаги:

      1. Перекомпилирует любые модули из программного списка, ко-
      торые получили изменения со времени последней компиляции. Этот
      процесс создает измененные объектные файлы на диске.

      2. Создает файл для компановщика с тем же самым именем, что
      и программа с расширением .LNK.

      3. Вызывает компановщик LINK.EXE. Компановщик связывает
      объектные файлы, созданные на шаге 1 со всеми объектными фай-
      лами, созданными из программных модулей и все объектные файлы и
      автономные библиотеки, заданные в программном списке, создавая
      на диске выполняемые файлы. Редактор связей ищет определение
      стандартных СИ-процедур в следующих местах:

        -Оперативная память, встроенная в программную среду Quick-C.

        -Библиотека Quick, если она загружена в данный момент.

        -Автономная библиотека MLIBCE.LIB на диске.

    Если компановщик  не может  найти какую-либо  из данных  процедур, в
результате будет выдана ошибка, и программа прекратит выпол- нение.


      4. Компилятор перезагрузит заново созданный выполняемый файл в
      среду Quick-C, где программа может быть выполнена.

    Обратите внимание, что объектные файлы создаются на шаге 1, файл для
компановщика создается на шаге 2,  а выполняемый файл создается на  шаге
3, причем записывается на диск.  Остальные файлы могут быть записаны  на
диск, в  зависимости от  опций, используемых  при компиляции  программы.
Например, если вы включаете в программу отладочную информацию  (смотрите
в Разделе  8.1.4.3 информацию  по опции  Debug), на  диск будет  записан
также файл карты распределения памяти.

    Чтобы управлять действиями редактора связей на шаге 2, в файле  .MAK
вы  можете   задать  опции   редактора  связей,   описанные  в   Разделе
9.5.1-9.5.14. За инструкциями обратитесь к Разделу 11.5.3.


              6.1.5. Общие вопросы о встроенных в память
                   программах и программных списках.

    Вопросы и ответы в данном разделе освещают информацию о встроенных в
память программах, программных списках и библиотеках Quick.

    Вопрос:  Я   получил  неразрешенные   внешние  ссылки   при  попытке
компиляции программы в среде Quick-C. Как я могу разрешить эту проблему?

    Ответ: Наиболее вероятная  причина неразрешенных внешних  ссылок для
встроенных в память программ-это то, что программа вызывает  стандартные
библиотечные процедуры СИ, не  содержащиеся во встроенной в  программную
среду библиотеке Quick-C (смотрите Таблицу 6.1).

    Если ваша программа  использует стандартные библиотечные  процедуры,
не  содержащиеся  в  Таблице  6.1,  воспользуйтесь  одним  из  следующих
методов:

      -Создайте одномодульный программный список, который включает
      в себя имя текущей программы (смотрите Раздел 6.2.6-6.2.8). В
      данном случае, редактор связей разрешит внешние ссылки, испо-
      льзуя комбинированную библиотеку средней модели памяти
      MLIBCE.LIB,находящуюся на диске.

      -Построить и загрузить библиотеку Quick, содержащую недостающие
      процедуры (смотрите Разделы 10.1.1-10.1.3). В данном случае,
      внешние ссылки разрешаются с помощью функций из библиотеки
      Quick.

    Вопрос: Если  моя программа  использует функции,  не перечисленные в
Таблице  6.1,  что  лучше?  Создать  и  загрузить программный список или
создать и загрузить библиотеку Quick?

    Ответ: Если вы работаете на  системе с жестким диском, обычно  легче
создать программный список, поскольку этот метод избавляет вас от  забот
по построению библиотеки Quick.  Кроме того, компилятор должен  вызывать
редактор  связей  и  обращаться  к  диску,  чтобы  искать  функции,   не
содержащиеся  в  оперативной  памяти.  Жесткий  диск минимизирует время,
требуемое для данного процесса.

    Если   вы   запускаете   пакет   на   системе   с   гибкими дисками.
предпочтительнее  создать  и  загрузить  библиотеку  Quick,   содержащую
недостающие  функции.  Это  удобнее,  поскольку  все  функции, требуемые
программе, могут быть найдены  в памяти, либо во  встроенной библиотеке,
либо в библиотеке Quick, и не требуется обращений к диску.

    Вопрос: Как мне создать новый программный список?

    Ответ: Выберете команду Set Program List...  (Раздел 6.2.6) из  меню
File и задайте имя, которое вы выбрали для нового программного списка  в
текстовой  рамке  File  Name.  Обычно,  это  базовое  имя  программы   с
расширением .MAK. Если данный программный список не существует,  Quick-C
спрашивает вас, хотите ли вы его создать; выберите командную кнопку Yes.
Пакет  Quick-C  автоматически  выполняет  команду  Edit  Program List...
(Раздел 6.2.8), то  есть вы можете  добавить модули в  новый программный
список. После того, как  вы закончите добавление модулей  к программному
списку,  выберите  командную  кнопку  Save  List,  чтобы сохранить новый
список.

    Вопрос: Как я могу  легко перемещаться между модулями  в программном
списке?

    Ответ: Выберите  команду Source  из меню  View и  модуль, который вы
хотите редактировать.

    Вопрос: Как мне  удалить программный список  из памяти, если  он уже
загружен?

    Ответ: Выберите команду Clear Program List из меню File.

    Вопрос: Как мне создать библиотеку Quick?

    Ответ: Посмотрите  инструкции в  Разделе 10.1.1.  Основная процедура
состоит в следующем:

      1. Создайте программу main, которая вызывает функции, помеща-
      емые вами в библиотеку Quick.

      2. Скомпилируйте данную программу с опциями компилятора /c и
      /AM .

      3. Свяжите результирующий файл с объектным файлом QUICKLIB.OBJ
      и опцией редактора связей /QU.

    Вопрос:  Как  я  могу  подключить  существующий  объектный  файл или
автономную библиотеку к программе, находящейся в памяти?

    Ответ:  Создайте  программный  список  (Раздел  6.2.6)  и   добавьте
объектные  файлы  или  билиотеки  в  программный  список (Раздел 6.2.8).
Заметим,  что  когда  вы  помещаете  в  программный  список   автономную
библиотеку,  редактор  связей  помещает  в  программу  полное содержимое
библиотеки.

    Вопрос: Поскольку  редактор связывает  модули в  программном списке,
существует ли способ  определить опции, управляющие  действием редактора
связей?

    Ответ:  Определите  опции  редактора  связей (Раздел 9.5.1-9.5.14) с
помощью  макрокоманды  с  именем   LDFLAGS  в  файле  .MAK,   содержащем
программный список. За указаниеми обратитесь а Разделу 11.5.3.


                    6.2. Обработка исходных файлов:
                              Меню File.

    Команды в меню File используются для создания новых файлов, загрузки
существующих   файлов   для   редактирования,   создания   и  сохранения
программных списков, сохранения редактируемых файлов, объединения файлов
и печати файлов.

    Как только  вы выберете  File, на  полосе меню  появится меню файлов
(File), которое будет открыто для работы:

    Команды из меню File выполняют следующие действия:

Команда                Действие


New                    Создает новый файл
Open...                Загружает существующий файл для редактирова-
                       ния.
Open Last File         Загружает недавно редактируемый файл и возмож-
                       но сохраняет текущий файл, если он был изменен
                       Ключ быстрого реагирования для данной команды
                       F2.
Merge...               Копируется с диска в текущий файл после стро-
                       ки, на которой установлен в данный момент кур-
                       сор.
Save                   Сохраняет отредактированный файл под его теку-
                       щим именем.
Save As...             Сохраняет отредактированный файл под другим
                       именем.
Set Program List...    Создает новый программный список или загружает
                       существующий программный список в среду
                       Quick-C.
Clear Program List     Удаляет текущий программный список из памяти.
Edit Program List...   Добавляет модули или удаляет модули из текуще-
                       го программного списка.
Print...               Печатает выбранный текст или содержимое теку-
                       щего файла.
Dos Shell              Временный выход в DOS и затем возвращение в
                       среду Quick-C.
Exit                   Заканчивает сеанс работы с Quick-C и выходит
                       в DOS.



    В разделах  6.2.1-6.2.11 описывается,  как пользоваться  командами в
меню File.


                    6.2.1. Создание новых программ:
                             Команда New.

    Команда New  создает новый  файл в  памяти. Данный  файл может  быть
любого типа,  включая исходный  СИ-файл, включаемый  файл или  документ.
Назначьте имя файлу при сохранении  его с помощью команды Save  или Save
As... .


    Команда  New  также  очищает  из  памяти текущий программный список.
Чтобы  создать  программный  список  для  новой  программы,  используйте
команду Set Program List...  (Раздел 6.2.6).


              6.2.2. Загрузка файлов для редактирования:
                            Команда Open...

    Команда Open... загружает  существующий файл для  редактирования. Вы
можете  также  использовать   команду  Open...  для   просмотра  файлов,
находящийся в вашей системе в различных каталогах.

    Как  только  вы  выберите  из  меню  File команду Open..., на экране
появится диалоговая рамка.

    Используйте опции  из диалоговой  рамки и  перечисленные ниже, чтобы
описать файл, который вы хотите открыть:

Опция                  Использование


Имя файла              Введите имя файла, который вы хотите открыть.
                       Если вы хотите просто выбрать данный файл из
                       списка, введите спецификацию для файлов, кото-
                       рые вы хотите увидеть в списке. Чтобы получить
                       информацию, обратитесь к Разделам 6.2.2.1.
                       "Загрузка файлов с помощью Open... ", 6.2.2.2
                       "Распечатка файлов с помощью команды Open...".
Спецификация маршрута  Текущая спецификация маршрута появится между
                       текстовой рамкой File Name и рамкой списка
                       файлов.
Рамка списка файлов    В текстовой рамке File Name появятся файлы,
                       соответствующие спецификации файлов и маршру-
                       та, которые вы ввели
                       Имена файлов и каталогов высвечиваются по ко-
                       лонкам в алфавитном порядке. Имена каталогов
                       подсвечиваются и выводятся в верхнем регистре;
                       имена файлов появляются в нижнем регистре.
                       Если имена файлов не умещаются в рамке, нажми-
                       те ключи управления курсором RIGHT и LEFТ для
                       того, чтобы переместить реверсную подсветку
                       на край рамки и прокрутить список. Если вы
                       применяете мышь, пользуйтесь полосой прокрутки
                       на дне рамки списка файлов для прокрутки спис-
                       ка направо или налево. Для более подробной ин-
                       формации смотрите Разделы 6.2.2.1. "Загрузка
                       файлов с помощью команды Open..." и 6.2.2.2.
                       "Высвечивание файлов с  помощью команды
                       Open...".
OK                     Используйте данную командную кнопку для того,
                       чтобы открыть выбранный файл.
Cansel                 Используйте данную командную кнопку для снятия
                       команды Open...



    Когда диалоговая  рамка Open...  появляется первый  раз, в текстовой
рамке появляется ярко подсвеченная  спецификация файла *.C. Все  файлы в
текущем каталоге, имеющие расширение .C появятся в рамке списка файлов.


          6.2.2.1. Загрузка файлов с помощью команды Open...

    Вы можете  определить файл,  который вам  нужно загрузить  с помощью
одного из следующих шагов:

      1. Введите имя файла, затем нажмите ENTER. Пакет Quick-C пред-
      полагает расширение .C для всех имен файлов без расширений.
      Если вы хотите загрузить файл, не имеющий расширения, введите
      точку (.) непосредственно после имени файла.

      2. Нажмите ключ TAB, чтобы переместить фокус ввода на рамку спи
      ска файлов и пользуйтесь ключами управленич курсором, чтобы пе-
      ремещаться по списку файлов до тех пор, пока файл, который вы
      хотите загрузить не подсветится. Затем нажмите ENTER, чтобы за-
      грузить файл.
      Вы можете также ввести первую букву имени файла, который вы хо-
      тите загрузить. Это действие автоматически переместит подсветку
      на перво имя файла или каталога в списке, которое начинается на
      данную букву. Например, если вы ищете файл PROG1.C, ввод буквы
      P переместит фокус ввода на первое имя файла, начинающееся с
      буквы "Р".

      3. При использовании мыши быстро нажмите два раза имя файла в
      рамке списка.


            6.2.2.2. Вывод файлов с помощью команды Open...

    Чтобы  высветить  на  экране  содержимое  любого  каталога  в  вашей
системе, вы можете воспользоваться  текстовой рамкой в диалоговой  рамке
команды Open...

    В рамке  списка файлов  имена файлов  выводятся в  нижнем регистре а
имена каталогов в подсвеченном верхнем регистре. Символы ".." в  верхнем
левом углу рамки списка файлов представляют каталог, являющийся текущим.
Когда вы введете имя каталога в текстовую рамку или выберете каталог  из
рамки списка файлов, Quick-C  перечислит файлы в данном  каталоге.(Когда
вы выберете или введете имя  файла, он загружается в память).  Вы можете
использовать  символы  шаблонов  DOS  (?  и *), чтобы перечислить группы
файлов.


           6.2.3. Открытие последнего редактируемого файла:
                        Команда Open Last File.

    Команда Open Last  File загружает файл,  редактировавшийся последний
раз. Если вы не сохраните изменений текущего файла, Quick-C спросит вас,
хотите  ли  вы  сохранить  их  перед  загрузкой нового файла. Если вы не
редактировали  других  файлов,  с  тех  пор,  как вы стартовали Quick-C,
нового файла не загружается.

    Если  вы  редактируете  два  исходных  файла,  данная команда делает
простым  перемещение  между  двумя  этими  файлами.  После  того, как вы
запомнили  один  исходный  файл  и  загрузили  второй  исходный файл для
редактирования,    первый    исходный    файл    становится  "последним"
редактируемым   файлом.   Чтобы   перезагрузить   этот    предварительно
запомненный файл для редактирования,  просто выберете команду Open  Last
File или нажмите ключ F2 снова.


                6.2.4. Слияние файлов: Команда Merge...

    Команда Merge...  вставляет файл,  после строки,  на которой  курсор
установлен в окне редактирования. Когда вы выберете


    из меню File команду Merge..., на экране появится диалоговая  рамка,
открытая для работы.

    Опции диалоговой  рамки команды  Merge... те  же самые,  что и опции
диалоговой рамки команды Open... Для более подробной информации смотрите
Раздел 6.2.2.


                      6.2.5. Сохранение файлов:
                       Команды Save и Save As...

    Команды Save  и Save  As... записывают  редактируемый файл  на диск.
Команда Save  используется, чтобы  сохранить файл  под его  оригинальным
именем, а команда Save As..., чтобы изменить имя данного файла. Если  вы
записываете новый  файл, не  имеющий пока  имени, можно  применить любую
команду для задания  имени файла. Если  вы выберете команду  Save As...,
появится диалоговая рамка, открытая для работы.

    Диалоговая рамка Save As... имеет следующие опции:

Опция                  Использование

Имя файла              Если вы записываете новый, не названный файл,
                       введите имя файла в текстовой рамке. Если вы
                       сохраняете файл, уже имеющий имя, имя файла по
                       является в текстовой рамке. Если вы используе-
                       те то же самое имя файла, просто нажмите
                       ENTER; чтобы изменить имя файла, введите его.
                       Новое имя заменит старое.
Спецификация маршрута  Между текстовой рамкой имени файла и командной
                       кнопкой появится текущая спецификация марш-
                       рута.
OK                     Данную командную кнопку следует выбрать, чтобы
                       сохранить файл с именем, заданным в текстовой
                       рамке.
Cancel                 Данная командная кнопка выбирается для снятия
                       команды Save As... и возвращения в редактор.




            6.2.6. Создание и загрузка программных списков:
                      Команда Set Program List...

    Команда Set  Program List...  создает новый  программный список  или
загружает существующий программный список в программную среду Quick-C.

    Если вы  выбрали команду  Set Program  List..., появится  диалоговая
рамка,  аналогичная  диалоговой  рамке  команды  Open..., за исключением
того, что  спецификацией файла  в рамке  списка имен  файлов будет .MAK.
(Программные списки сохраняются в файлах с расширениеми .MAK). Вы можете
выбрать  файлы  .MAK  для  редактирования  или  высвечивания  из  любого
каталога  на  вашей  системе,  так  же,  как в команде Open...; смотрите
Разделы   6.2.2.1-6.2.2.2.   Если   вы   выбираете   для  редактирования
существующий файл  .MAK, для  выполнения изменений  в файлах используйте
команду Edit Program List...

    Если  вы  зададите  имя  несуществующего  файла  .MAK, пакет Quick-C
спросит вас, хотите  ли вы создать  файл. Если вы  ответите "Yes", пакет
Quick-C  автоматически  открывает  диалоговую  рамку  для  команды  Edit
Program List..., теперь вы можете добавлять модули к новому программному
списку.

    После того,  как вы  загрузите программный  список, имя программного
списка появится после слов Program List: (на строке состояния).

    При компиляции программ,  командные кнопки Build  Program (Построить
программу) и Rebuild All (Перестроить все) действуют только на модули  в
данном  программном  списке,   а  не  на   исходный  файл,  который   вы
редактируете.


             6.2.7. Очистка текущего программного списка:
                      Команда Clear Program List.

    Команда Clear  Program List  удаляет текущий  программный список  из
памяти.  Индикатор  на  строке  состояния  Program  List:  изменяется на
<none>, чтобы обозначить, что в памяти в данный момент нет  программного
списка. До тех пор, пока вы  не загрузите с помощью команды Set  Program
List... новый программный  список, компилятор Quick-C  предполагает, что
любые  компилируемые  файлы  являются  одномодульными  программами,   не
являющиеся частью программного списка.


              6.2.8. Редактирование программного списка:
                      Команда Edit Program List.

    Команда Edit  Program List  обрабатывает список  модулей, из которых
состоит программа.

    Когда вы  выберете команду  Edit Program  List... из  меню File, или
после того, как вы создадите новый программный список с помощью  команды
Set Program List..., на экране появится открытая диалоговая рамка.

    Чтобы  задать  программный  список  для  редактирования  и   сделать
желаемые изменения, используйте следующие опции диалоговой рамки команды
Edit Program List...:

Опция                  Использование


Имя файла              Введите имя файла .MAK, содержащего программ-
                       ный список, который вы хотите редактировать,
                       или введите спецификацию для тех файлов, кото-
                       рые вы хотите вывести в рамке списка файлов.
                       Для вывода списка файлов текущего устройства
                       или текущего каталога команда Edit Program
                       List...используется аналогично команде
                       Open...; За подробностями обратитесь к Разде-
                       лам 6.2.2.1 "Загрузка файлов с помощью команды
                       Open..." и 6.2.2.2 "Вывод списка файлов с по-
                       мощью команды Open...".
Спецификация маршрута  Между текстовой рамкой имени файла и командны-
                       ми кнопками появляется текущая спецификация
                       маршрута.
Файлы                  Данная рамка списка файлов выводит все диско-
                       вые файлы, соответствующие спецификации марш-
                       рута, заданной в текстовой рамке имени файла.
                       Как только вы выберете имя файла из рамки спи-
                       ска файлов, воспользуйтесь командной кнопкой
                       Add/Remove для добавления или удаления файлов
                       из программного списка. Вы можете выбрать фай-
                       лы из рамки списка файлов или высветить файлы
                       из различных каталогов, как вы делали это для
                       команды Open... меню File. Подробные инструк-
                       ции смотрите в Разделах 6.2.2.1 "Загрузка фай-
                       лов с помощью команды Open..." и 6.2.2.2 "Вы-
                       вод списка файлов с помощью команды Open...".
Программный список     Данная списковая рамка выводит все файлы, свя-
                       занные с загруженным в данный момент программ-
                       ным списком. Выбирайте файлы для удаления из
                       программного списка аналогично тому, как вы
                       выбирали файлы для команды Open...; смотрите
                       Раздел 6.2.2.1 "Загрузка файлов с помощью ко-
                       манды Open...".
Add/Remove             Используйте данную командную кнопку для того,
(добавить/удалить)     чтобы добавить выбранный файл к программному
                       списку или удалить его из списка. Если файл
                       еще не находится в программном списке, он до-
                       бавляется в него. Если файл уже находится в
                       программном списке, он удаляется из него. Про-
                       граммный список реально не изменяется до тех
                       пор, пока вы не воспользуетесь командной кноп-
                       кой Save List.
Clear List             Данная командная кнопка используется для того,
(Очистить список)      чтобы удалить из текущего программного списка
                       все модули. Обратите внимание, что командная
                       кнопка Clear List удаляет все модули из прог-
                       раммного списка независимо от того, была или
                       нет "нажата" командная кнопка Save List; ко
                       манда Cancel не восстанавливает оригинальный
                       программный список.
Save List              Данная командная кнопка используется для сох-
                       ранения всех изменений программного списка в
                       файле .MAK.
Cancel (Снять)         Данная командная кнопка используется для сня-
                       тия команды Edit Program List...


    Для  редактирования   программного  списка   используется  следующая
процедура:

    1. Выберете команду Edit Program List из меню File.

    2.  Выберете  директорию,  из  которой  вы  хотите  добавить файлы в
программный список. Смотрите Раздел  6.2.2.1 "Загрузка файлов с  помощью
команды Open..." и Раздел  6.2.2.2 "Распечатка файлов с  помощью команды
Open...".

    3. Выберете файл для удаления или добавления в программный список из
рамки списка файлов.

    4. Нажмите Enter. Если файла,  который вы выбрали нет в  программном
списке,  пакет  Quick-C  добавит  его.  Если  он  уже  находится в рамке
программного  списка,  Quick-C  удалит  его  из списка. Диалоговая рамка
останется на экране.

    5. Повторяйте шаги 4-5 до тех пор, пока программный список не  будет
содержать файлы, которые вам требуются.

    6. Введите  ALT+S для  сохранения программного  списка и  обновления
файла  .MAK,  либо  наберите  ALT+C  для  очистки  программного  списка.
Диалоговая  рамка  исчезнет  с  экрана.  Чтобы  прервать  в  любое время
выполнение  команды  Edit  Program  List...,  нажмите  ESC  или выберете
командную кнопку Cancel.


                       6.2.9. Распечатка файлов:
                           Команда Print...

    Команда Print... распечатывает  либо файл, который  вы редактируете,
либо выбранный  текст из  файла. Файлы  распечатываются без  разрывов на
страницы и без заголовков.

    Если  вы  применяете  данную   команду,  ваш  принтер  должен   быть
подсоединен к LPT1 (либо вы можете использовать команду DOS MODE,что  бы
переадресовать LPT1 в COM1).

    Как  только  вы  выберете  из  меню  File команду Print..., появится
диалоговая рамка, открытая для работы.

    Вы можете выбрать одну из следующих опций:

Опция                  Использование


Print File             Распечатывает содержимое редактируемого
файла.
(печать файла)
Print Selected Text    Распечатывает только выбранный в окне обзора
(распечатка выбран-    текст (подсвеченный)
ного текста)

    В  то  время,  как  текст  распечатывается,  на  экране   появляется
диалоговая  рамка  с  командной  кнопкой  Cancel. Чтобы прервать печать,
нажмите просто ESC или клавишу пробела.


                    6.2.10. Временный выход в DOS:
                          Команда DOS Shell.

    Команда DOS  Shell позволяет  вам временно  выйти на  уровень команд
операционной системы DOS, где  вы можете выполнить другие  программы или
команды DOS, причем  Quick-C остается в  памяти. Обратите внимание,  что
вам не  нужно удалять  перед возвратом  в Quick-C  файлы .MAK,  исходные
файлы СИ или текущий программный список.

    Чтобы  выполнить  команду  DOS  Shell,  пакет  Quick-C  должен иметь
возможность найти файл COMMAND.COM.  В первую очередь Quick-C  ищет этот
файл в директории , заданной в переменной среды COMSPEC, затем в текущей
директории. Обратитесь за подробной  информацией о файлах COMMAND.Com  и
COMSPEC к документации об использовании операционной системы DOS.

    Для возврата в пакет Quick-C с командного уровня DOS введите команду
DOS EXIT.


                   6.2.11. Выход из пакета Quick-C:
                             Команда EXIT.

    Команда EXIT удаляет пакет Quick-C из памяти и возвращает вас в DOS.

    Если  вы  редактировали  файл,  но  не  сохранили  его,  специальное
сообщение  опросит  вас,  хотите  ли  вы сохранить данную программу. Для
сохранения программы, нажмите ENTER, либо нажмите командную кнопку Yes с
помощью мыши. Если программа  не имеет имени, появится  диалоговая рамка
Save As...

    Чтобы  вернуться  в  системы  без  сохранения  файла, введите h, или
нажмите с помощью мыши командную кнопку No.
